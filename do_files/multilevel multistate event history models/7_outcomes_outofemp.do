* ---------------------------------------------------------------------------- *
* ANALYSIS OF OUTCOMES FOR UNEMPLOYED OR INACTIVE INDIVIDUALS
* Evaluates outcomes for individuals categorized as Unemployed (U) or Inactive (I)
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset for analysis
clear
use "$datadir\analysis_transitions_2_digits"

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp1: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *
* Count total individuals for initial overview
count

* Create risk set: individuals classified as Unemployed or Inactive
gen indicator = .
forvalues i = 1/90 { 
    replace indicator = 1 if cat`i' == 5
	replace indicator = 1 if cat`i' == 6
}
drop if indicator==.
drop indicator

* Construct the 'beginning' variable
gen beginning = .
replace beginning = cat1_start if cat1==5
replace beginning = cat1_start if cat1==6
replace beginning = cat2_start if cat1!=5 & cat1!=6 & cat2==5
replace beginning = cat2_start if cat1!=5 & cat1!=6 & cat2==6
replace beginning = cat3_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3==5
replace beginning = cat3_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3==6
replace beginning = cat4_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4==5
replace beginning = cat4_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4==6
replace beginning = cat5_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning = cat5_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning = cat6_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning = cat6_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning = cat7_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning = cat7_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning = cat8_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning = cat8_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning = cat9_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning = cat9_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning = cat10_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning = cat10_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning = cat11_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning = cat11_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning = cat12_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning = cat12_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning = cat13_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning = cat13_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning = cat14_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning = cat14_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning = cat15_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning = cat15_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning = cat16_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning = cat16_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning = cat17_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning = cat17_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning = cat18_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning = cat18_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning = cat19_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning = cat19_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning = cat20_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning = cat20_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning = cat21_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning = cat21_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning = cat22_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning = cat22_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning = cat23_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=6 & cat22!=5 & cat23==5
replace beginning = cat24_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning = cat24_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning = cat29_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==6
replace beginning = cat28_start if cat1!=5 & cat1!=6 & cat2!=5 & cat2!=6 & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28==5

* Make sure that there are no missings
tab beginning,m

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

* Construct the 'end' variable
* Initialize 'end' with 'cat1_end' value if 'cat2_end' is missing
gen end = cat1_end if missing(cat2_end)

* Re-order variables
order folio_n20 beginning end

* Loop through the 'cat_end' variables from 2 to the last one needed
forvalues i = 2/89 {
    * Update 'end' if this 'cat_end' is not missing and the next one is missing or if it's the last 'cat_end' in the sequence
    local next = `i' + 1  // Calculate the next index
    replace end = cat`i'_end if missing(cat`next'_end) & !missing(cat`i'_end)
}

replace end=cat90_end if end==.

* Check the 'end' variable tabulation, make sure there is no missings
tab end, m

* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/50 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label define state1 1 "Unemployed" 2 "Inactive"
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
replace event=1 if beginning==cat1_start & cat1==6 & cat2==6 & cat3==6 & cat4==1
replace event=10 if beginning==cat1_start & cat1==6 & cat2==6 & cat3==10
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=0 if beginning==cat1_start & cat1==6 & cat2==6 & cat3==.
replace event=8 if beginning==cat1_start & cat1==6 & cat2==6 & cat3==8
replace event=0 if beginning==cat22_start & cat23==.
replace event=3 if beginning==cat2_start & cat2==5 & cat3==5 & cat4==3

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat3_start - beginning if beginning==cat1_start & cat1==6 & cat2==6 & cat3==8
replace duration = cat4_start - beginning if beginning==cat2_start & cat2==5 & cat3==5 & cat4==3
replace duration = cat4_start - beginning if beginning==cat1_start & cat1==6 & cat2==6 & cat3==6 & cat4==1
replace duration = cat3_start - beginning if beginning==cat1_start & cat1==6 & cat2==6 & cat3==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp1", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =1

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling1 if beginning==cat1_start & education==.
replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling4 if beginning==cat4_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.

tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Construct the 'previous_occ' variable
gen previous_occ = .
replace previous_occ = 0 if beginning==cat1_start
replace previous_occ =1 if beginning==cat2_start & cat1==1
replace previous_occ =2 if beginning==cat2_start & cat1==2
replace previous_occ =3 if beginning==cat2_start & cat1==3
replace previous_occ =4 if beginning==cat2_start & cat1==4
replace previous_occ =7 if beginning==cat2_start & cat1==7
replace previous_occ =8 if beginning==cat2_start & cat1==8
replace previous_occ =9 if beginning==cat2_start & cat1==9
replace previous_occ =10 if beginning==cat2_start & cat1==10
replace previous_occ =0 if beginning==cat2_start & cat1==.
replace previous_occ =1 if beginning==cat3_start & cat2==1
replace previous_occ =2 if beginning==cat3_start & cat2==2
replace previous_occ =3 if beginning==cat3_start & cat2==3
replace previous_occ =4 if beginning==cat3_start & cat2==4
replace previous_occ =7 if beginning==cat3_start & cat2==7
replace previous_occ =8 if beginning==cat3_start & cat2==8
replace previous_occ =9 if beginning==cat3_start & cat2==9
replace previous_occ =10 if beginning==cat3_start & cat2==10
replace previous_occ =3 if beginning==cat3_start & cat2==. & cat1==3
replace previous_occ =7 if beginning==cat3_start & cat2==. & cat1==7
replace previous_occ =9 if beginning==cat3_start & cat2==. & cat1==9
replace previous_occ =1 if beginning==cat4_start & cat3==1
replace previous_occ =2 if beginning==cat4_start & cat3==2
replace previous_occ =3 if beginning==cat4_start & cat3==3
replace previous_occ =4 if beginning==cat4_start & cat3==4
replace previous_occ =7 if beginning==cat4_start & cat3==7
replace previous_occ =8 if beginning==cat4_start & cat3==8
replace previous_occ =9 if beginning==cat4_start & cat3==9
replace previous_occ =10 if beginning==cat4_start & cat3==10
replace previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =10 if beginning==cat5_start & cat4==. & cat3==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =3 if beginning==cat12_start & cat11==3
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =8 if beginning==cat29_start & cat28==8
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =4 if beginning==cat4_start & cat3==. & cat2==4
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =3 if beginning==cat11_start & cat10==3
tab previous_occ, m

recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp1", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp2: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset for analysis
clear
use "$resultdir\sample_Outofemp1"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp2 across multiple categories
gen indicator = . // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=0 if beginning==cat14_start & cat15==.
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/50 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat20_start & cat21==9
replace event=0 if beginning==cat3_start & cat3==5 & cat4==5 & cat5==.
replace event=1 if beginning==cat6_start & cat6==6 & cat7==6 & cat8==1
replace event=8 if beginning==cat5_start & cat5==5 & cat6==5 & cat7==8
replace event=9 if beginning==cat5_start & cat5==5 & cat6==5 & cat7==9
replace event=1 if beginning==cat4_start & cat4==6 & cat5==6 & cat6==1
replace event=10 if beginning==cat15_start & cat16==10
replace event=4 if beginning==cat5_start & cat5==5 & cat6==5 & cat7==4
replace event=10 if beginning==cat3_start & cat3==5 & cat4==5 & cat5==10

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat8_start - beginning if beginning==cat6_start & cat6==6 & cat7==6 & cat8==1
replace duration = cat7_start - beginning if beginning==cat5_start & cat5==5 & cat6==5 & cat7==8
replace duration = cat7_start - beginning if beginning==cat5_start & cat5==5 & cat6==5 & cat7==9
replace duration = cat6_start - beginning if beginning==cat4_start & cat4==6 & cat5==6 & cat6==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat7_start - beginning if beginning==cat5_start & cat5==5 & cat6==5 & cat7==4
replace duration = cat5_start - beginning if beginning==cat3_start & cat3==5 & cat4==5 & cat5==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp2", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =2

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling4 if beginning==cat4_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling10 if beginning==cat10_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.

tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Construct previous_occ
gen previous_occ = .
replace previous_occ =1 if beginning==cat3_start & cat2==1
replace previous_occ =2 if beginning==cat3_start & cat2==2
replace previous_occ =3 if beginning==cat3_start & cat2==3
replace previous_occ =4 if beginning==cat3_start & cat2==4
replace previous_occ =7 if beginning==cat3_start & cat2==7
replace previous_occ =8 if beginning==cat3_start & cat2==8
replace previous_occ =9 if beginning==cat3_start & cat2==9
replace previous_occ =10 if beginning==cat3_start & cat2==10
replace previous_occ =3 if beginning==cat3_start & cat2==. & cat1==3
replace previous_occ =7 if beginning==cat3_start & cat2==. & cat1==7
replace previous_occ =9 if beginning==cat3_start & cat2==. & cat1==9
replace previous_occ =0 if beginning==cat3_start & cat3==5 & cat2==6 & cat1==5
replace previous_occ =0 if beginning==cat3_start & cat2==5 & cat1==6
replace previous_occ =1 if beginning==cat4_start & cat3==1
replace previous_occ =2 if beginning==cat4_start & cat3==2
replace previous_occ =3 if beginning==cat4_start & cat3==3
replace previous_occ =4 if beginning==cat4_start & cat3==4
replace previous_occ =7 if beginning==cat4_start & cat3==7
replace previous_occ =8 if beginning==cat4_start & cat3==8
replace previous_occ =9 if beginning==cat4_start & cat3==9
replace previous_occ =10 if beginning==cat4_start & cat3==10
replace previous_occ =9 if beginning==cat4_start & cat3==. & cat2==9
replace previous_occ =0 if beginning==cat4_start & cat4==6 & cat3==5 & cat2==6
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6 & cat1==7
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6 & cat1==9
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6 & cat1==10
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==4
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==9
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==2
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==8
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==3
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==7
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==10
replace previous_occ =0 if beginning==cat4_start & cat3==6 & cat2==5 & cat1==.
replace previous_occ =7 if beginning==cat4_start & cat3==. & cat2==7
replace previous_occ =4 if beginning==cat4_start & cat3==. & cat2==4
replace previous_occ =2 if beginning==cat4_start & cat3==. & cat2==2
replace previous_occ =0 if beginning==cat4_start & cat3==5 & cat2==6 & cat1==.
replace previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==10
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==2
replace previous_occ =10 if beginning==cat5_start & cat4==. & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==4
replace previous_occ =10 if beginning==cat6_start & cat5==. & cat4==10
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==8
replace previous_occ =8 if beginning==cat7_start & cat6==. & cat5==8
replace previous_occ =10 if beginning==cat7_start & cat6==. & cat5==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==9
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==9
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==4
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =1 if beginning==cat11_start & cat10==1
replace previous_occ =10 if beginning==cat11_start & cat10==10
replace previous_occ =3 if beginning==cat11_start & cat10==3
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==9
replace previous_occ =10 if beginning==cat12_start & cat11==10
replace previous_occ =4 if beginning==cat12_start & cat11==4
replace previous_occ =8 if beginning==cat12_start & cat11==8
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==4
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =4 if beginning==cat5_start & cat4==. & cat3==4
replace previous_occ =1 if beginning==cat13_start & cat12==1
tab previous_occ, m

recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp2", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp3: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset for analysis
clear
use "$resultdir\sample_Outofemp2"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp3 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat33_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33==5
replace beginning2=cat17_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/50 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat20_start & cat21==9
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=8 if beginning==cat15_start & cat16==8
replace event=10 if beginning==cat16_start & cat17==10
replace event=10 if beginning==cat33_start & cat34==10
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat17_start & cat18==.

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp3", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =3

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling10 if beginning==cat10_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling12 if beginning==cat12_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling17 if beginning==cat17_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==5 & cat1==6
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==4
replace previous_occ =10 if beginning==cat6_start & cat5==. & cat4==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==4
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==4
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==6 & cat2==5 & cat1==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==6 & cat1==5
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==8
replace previous_occ =10 if beginning==cat7_start & cat6==. & cat5==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==4
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==3
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==8
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==7
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==9
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==2
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==1
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==4
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==8
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==9
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==10
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==4
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==1
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==4
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =1 if beginning==cat11_start & cat10==1
replace previous_occ =10 if beginning==cat11_start & cat10==10
replace previous_occ =3 if beginning==cat11_start & cat10==3
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==9
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==10
replace previous_occ =7 if beginning==cat11_start & cat10==7
replace previous_occ =8 if beginning==cat11_start & cat10==8
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==1
replace previous_occ =10 if beginning==cat12_start & cat11==10
replace previous_occ =4 if beginning==cat12_start & cat11==4
replace previous_occ =8 if beginning==cat12_start & cat11==8
replace previous_occ =3 if beginning==cat12_start & cat11==3
replace previous_occ =2 if beginning==cat12_start & cat11==2
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =1 if beginning==cat12_start & cat11==1
replace previous_occ =7 if beginning==cat12_start & cat11==7
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat14_start & cat13==9
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =4 if beginning==cat14_start & cat13==4
replace previous_occ =1 if beginning==cat14_start & cat13==1
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat32_start & cat31==9
replace previous_occ =10 if beginning==cat33_start & cat32==10
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp3", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp4: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset for analysis
clear
use "$resultdir\sample_Outofemp3"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp4 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=0 if beginning==cat34_start & cat35==.
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/50 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=0 if beginning==cat18_start & cat19==.
replace event=0 if beginning==cat8_start & cat8==5 & cat9==5 & cat10==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=9 if beginning==cat7_start & cat7==5 & cat8==5 & cat9==9
replace event=7 if beginning==cat10_start & cat10==6 & cat11==6 & cat12==7
replace event=0 if beginning==cat7_start & cat7==6 & cat8==6 & cat9==.
replace event=7 if beginning==cat14_start & cat15==7
replace event=9 if beginning==cat17_start & cat18==9
replace event=8 if beginning==cat15_start & cat16==8
replace event=10 if beginning==cat18_start & cat19==10
replace event=10 if beginning==cat26_start & cat27==10
replace event=10 if beginning==cat15_start & cat16==10

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat9_start - beginning if beginning==cat7_start & cat7==5 & cat8==5 & cat9==9
replace duration = cat12_start - beginning if beginning==cat10_start & cat10==6 & cat11==6 & cat12==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp4", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =4

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling10 if beginning==cat10_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling12 if beginning==cat12_start & education==.
replace education=schooling13 if beginning==cat13_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling15 if beginning==cat15_start & education==.
replace education=schooling17 if beginning==cat17_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==5 & cat1==6
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==4
replace previous_occ =10 if beginning==cat6_start & cat5==. & cat4==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==4
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==4
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==6 & cat2==5 & cat1==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==3
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==8
replace previous_occ =10 if beginning==cat7_start & cat6==. & cat5==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==4
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==3
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==5 & cat1==6
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==1
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==4
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==8
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==7
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==9
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==10
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==2
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==8
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==7
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==3
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==3
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==2
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==1
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==4
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==8
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==9
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==2
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==7
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==10
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==9
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==3
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==4
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==4
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==9
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==8
replace previous_occ =10 if beginning==cat10_start & cat9==. & cat8==10
replace previous_occ =1 if beginning==cat10_start & cat9==. & cat8==1
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =1 if beginning==cat11_start & cat10==1
replace previous_occ =10 if beginning==cat11_start & cat10==10
replace previous_occ =3 if beginning==cat11_start & cat10==3
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==8
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==9
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==9
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==10
replace previous_occ =7 if beginning==cat11_start & cat10==7
replace previous_occ =8 if beginning==cat11_start & cat10==8
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==1
replace previous_occ =10 if beginning==cat12_start & cat11==10
replace previous_occ =4 if beginning==cat12_start & cat11==4
replace previous_occ =8 if beginning==cat12_start & cat11==8
replace previous_occ =3 if beginning==cat12_start & cat11==3
replace previous_occ =2 if beginning==cat12_start & cat11==2
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =1 if beginning==cat12_start & cat11==1
replace previous_occ =7 if beginning==cat12_start & cat11==7
replace previous_occ =8 if beginning==cat13_start & cat12==8
replace previous_occ =1 if beginning==cat13_start & cat12==1
replace previous_occ =2 if beginning==cat13_start & cat12==2
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =7 if beginning==cat14_start & cat13==7
replace previous_occ =8 if beginning==cat14_start & cat13==8
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat14_start & cat13==9
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =4 if beginning==cat14_start & cat13==4
replace previous_occ =1 if beginning==cat14_start & cat13==1
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat34_start & cat33==9
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==10
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==8
replace previous_occ =7 if beginning==cat13_start & cat12==7
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==3
replace previous_occ =7 if beginning==cat15_start & cat14==7
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==8
replace previous_occ =8 if beginning==cat15_start & cat14==8
replace previous_occ =10 if beginning==cat17_start & cat16==10

tab previous_occ,m
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp4", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp5: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset for analysis
clear
use "$resultdir\sample_Outofemp4"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp5 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat16_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat19_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/60 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=8 if beginning==cat18_start & cat19==8
replace event=7 if beginning==cat14_start & cat15==7
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=4 if beginning==cat28_start & cat29==4

* Make sure there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==4
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5

* Make sure there are no missings
tab duration,m

save "$resultdir\sample_Outofemp5", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =5

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling10 if beginning==cat10_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling12 if beginning==cat12_start & education==.
replace education=schooling13 if beginning==cat13_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling16 if beginning==cat16_start & education==.
replace education=schooling18 if beginning==cat18_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==3
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==9
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==4
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5 & cat2==2
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==1
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==10
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==7
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6 & cat2==5 & cat1==6
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==4
replace previous_occ =10 if beginning==cat6_start & cat5==. & cat4==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==8
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==9
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==4
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==1
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==3
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==9
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==5 & cat2==6 & cat1==4
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==6 & cat2==5 & cat1==2
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6 & cat3==7
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5 & cat3==3
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==8
replace previous_occ =10 if beginning==cat7_start & cat6==. & cat5==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==9
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==4
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==3
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==2
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==5 & cat1==6
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==8
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==5 & cat3==6 & cat2==2
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6 & cat4==1
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==4
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==8
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5 & cat4==7
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==9
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==9
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==5 & cat4==6 & cat3==3
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==10
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==2
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==8
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==7
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==3
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==3
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==2
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==1
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==4
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6 & cat5==8
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5 & cat5==9
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==2
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==7
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==10
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==9
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==5 & cat5==6 & cat4==9
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==6 & cat5==5 & cat4==2
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==1
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==8
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==8
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5 & cat6==2
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==9
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==3
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6 & cat6==4
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==4
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==9
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==2
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==10
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==6 & cat6==5 & cat5==6 & cat4==5 & cat3==2
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6 & cat7==8
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==3
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==2
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==8
replace previous_occ =10 if beginning==cat10_start & cat9==. & cat8==10
replace previous_occ =1 if beginning==cat10_start & cat9==. & cat8==1
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =1 if beginning==cat11_start & cat10==1
replace previous_occ =10 if beginning==cat11_start & cat10==10
replace previous_occ =3 if beginning==cat11_start & cat10==3
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==8
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==9
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==2
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==8
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==9
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==10
replace previous_occ =7 if beginning==cat11_start & cat10==7
replace previous_occ =8 if beginning==cat11_start & cat10==8
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6 & cat8==1
replace previous_occ =0 if beginning==cat12_start & cat11==6 & cat10==5 & cat9==10
replace previous_occ =0 if beginning==cat12_start & cat11==6 & cat10==5 & cat9==3
replace previous_occ =10 if beginning==cat12_start & cat11==10
replace previous_occ =4 if beginning==cat12_start & cat11==4
replace previous_occ =8 if beginning==cat12_start & cat11==8
replace previous_occ =3 if beginning==cat12_start & cat11==3
replace previous_occ =2 if beginning==cat12_start & cat11==2
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =1 if beginning==cat12_start & cat11==1
replace previous_occ =7 if beginning==cat12_start & cat11==7
replace previous_occ =8 if beginning==cat13_start & cat12==8
replace previous_occ =1 if beginning==cat13_start & cat12==1
replace previous_occ =2 if beginning==cat13_start & cat12==2
replace previous_occ =7 if beginning==cat13_start & cat12==7
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =7 if beginning==cat14_start & cat13==7
replace previous_occ =8 if beginning==cat14_start & cat13==8
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat14_start & cat13==9
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =4 if beginning==cat14_start & cat13==4
replace previous_occ =1 if beginning==cat14_start & cat13==1
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =7 if beginning==cat15_start & cat14==7
replace previous_occ =2 if beginning==cat15_start & cat14==2
replace previous_occ =9 if beginning==cat15_start & cat14==. & cat13==9
replace previous_occ =8 if beginning==cat15_start & cat14==8
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =4 if beginning==cat20_start & cat19==4
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5 & cat7==4
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5 & cat8==10
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =0 if beginning==cat10_start & cat9==. & cat8==5 & cat7==6 & cat6==7
replace previous_occ =10 if beginning==cat28_start & cat27==10
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp5", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp6: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data and set directory
clear
use "$resultdir\sample_Outofemp5"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp6 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=0 if beginning==cat21_start & cat22==.
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat18_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5

* Make sure that there are no more missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/70 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=9 if beginning==cat14_start & cat14==5 & cat15==5 & cat16==9
replace event=7 if beginning==cat12_start & cat12==5 & cat13==5 & cat14==7
replace event=3 if beginning==cat14_start & cat14==5 & cat15==5 & cat16==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat23_start & cat24==9
replace event=8 if beginning==cat18_start & cat19==8
replace event=0 if beginning==cat20_start & cat21==.
replace event=9 if beginning==cat13_start & cat13==5 & cat14==5 & cat15==9

* Make sure there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat16_start - beginning if beginning==cat14_start & cat14==5 & cat15==5 & cat16==9
replace duration = cat14_start - beginning if beginning==cat12_start & cat12==5 & cat13==5 & cat14==7
replace duration = cat16_start - beginning if beginning==cat14_start & cat14==5 & cat15==5 & cat16==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat15_start - beginning if beginning==cat13_start & cat13==5 & cat14==5 & cat15==9

* Make sure there are no missings
tab duration,m

save "$resultdir\sample_Outofemp6", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =6

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling12 if beginning==cat12_start & education==.
replace education=schooling13 if beginning==cat13_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling15 if beginning==cat15_start & education==.
replace education=schooling17 if beginning==cat17_start & education==.
replace education=schooling19 if beginning==cat19_start & education==.
replace education=schooling21 if beginning==cat21_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat5_start & cat4==1
replace previous_occ =2 if beginning==cat5_start & cat4==2
replace previous_occ =3 if beginning==cat5_start & cat4==3
replace previous_occ =4 if beginning==cat5_start & cat4==4
replace previous_occ =7 if beginning==cat5_start & cat4==7
replace previous_occ =8 if beginning==cat5_start & cat4==8
replace previous_occ =9 if beginning==cat5_start & cat4==9
replace previous_occ =10 if beginning==cat5_start & cat4==10
replace previous_occ =3 if beginning==cat5_start & cat4==. & cat3==3
replace previous_occ =0 if beginning==cat5_start & cat4==6 & cat3==5
replace previous_occ =0 if beginning==cat5_start & cat4==5 & cat3==6
replace previous_occ =1 if beginning==cat6_start & cat5==1
replace previous_occ =2 if beginning==cat6_start & cat5==2
replace previous_occ =3 if beginning==cat6_start & cat5==3
replace previous_occ =4 if beginning==cat6_start & cat5==4
replace previous_occ =7 if beginning==cat6_start & cat5==7
replace previous_occ =8 if beginning==cat6_start & cat5==8
replace previous_occ =9 if beginning==cat6_start & cat5==9
replace previous_occ =10 if beginning==cat6_start & cat5==10
replace previous_occ =0 if beginning==cat6_start & cat5==5 & cat4==6
replace previous_occ =10 if beginning==cat6_start & cat5==. & cat4==10
replace previous_occ =0 if beginning==cat6_start & cat5==6 & cat4==5
replace previous_occ =1 if beginning==cat7_start & cat6==1
replace previous_occ =2 if beginning==cat7_start & cat6==2
replace previous_occ =3 if beginning==cat7_start & cat6==3
replace previous_occ =4 if beginning==cat7_start & cat6==4
replace previous_occ =7 if beginning==cat7_start & cat6==7
replace previous_occ =8 if beginning==cat7_start & cat6==8
replace previous_occ =9 if beginning==cat7_start & cat6==9
replace previous_occ =10 if beginning==cat7_start & cat6==10
replace previous_occ =0 if beginning==cat7_start & cat6==5 & cat5==6
replace previous_occ =10 if beginning==cat7_start & cat6==. & cat5==10
replace previous_occ =0 if beginning==cat7_start & cat6==6 & cat5==5
replace previous_occ =1 if beginning==cat8_start & cat7==1
replace previous_occ =2 if beginning==cat8_start & cat7==2
replace previous_occ =3 if beginning==cat8_start & cat7==3
replace previous_occ =4 if beginning==cat8_start & cat7==4
replace previous_occ =7 if beginning==cat8_start & cat7==7
replace previous_occ =8 if beginning==cat8_start & cat7==8
replace previous_occ =9 if beginning==cat8_start & cat7==9
replace previous_occ =10 if beginning==cat8_start & cat7==10
replace previous_occ =0 if beginning==cat8_start & cat7==5 & cat6==6
replace previous_occ =0 if beginning==cat8_start & cat7==6 & cat6==5
replace previous_occ =1 if beginning==cat9_start & cat8==1
replace previous_occ =2 if beginning==cat9_start & cat8==2
replace previous_occ =3 if beginning==cat9_start & cat8==3
replace previous_occ =4 if beginning==cat9_start & cat8==4
replace previous_occ =7 if beginning==cat9_start & cat8==7
replace previous_occ =8 if beginning==cat9_start & cat8==8
replace previous_occ =9 if beginning==cat9_start & cat8==9
replace previous_occ =10 if beginning==cat9_start & cat8==10
replace previous_occ =0 if beginning==cat9_start & cat8==5 & cat7==6
replace previous_occ =0 if beginning==cat9_start & cat8==6 & cat7==5
replace previous_occ =1 if beginning==cat10_start & cat9==1
replace previous_occ =2 if beginning==cat10_start & cat9==2
replace previous_occ =3 if beginning==cat10_start & cat9==3
replace previous_occ =4 if beginning==cat10_start & cat9==4
replace previous_occ =7 if beginning==cat10_start & cat9==7
replace previous_occ =8 if beginning==cat10_start & cat9==8
replace previous_occ =9 if beginning==cat10_start & cat9==9
replace previous_occ =10 if beginning==cat10_start & cat9==10
replace previous_occ =0 if beginning==cat10_start & cat9==5 & cat8==6
replace previous_occ =0 if beginning==cat10_start & cat9==6 & cat8==5
replace previous_occ =10 if beginning==cat10_start & cat9==. & cat8==10
replace previous_occ =1 if beginning==cat10_start & cat9==. & cat8==1
replace previous_occ =4 if beginning==cat11_start & cat10==4
replace previous_occ =2 if beginning==cat11_start & cat10==2
replace previous_occ =9 if beginning==cat11_start & cat10==9
replace previous_occ =1 if beginning==cat11_start & cat10==1
replace previous_occ =10 if beginning==cat11_start & cat10==10
replace previous_occ =3 if beginning==cat11_start & cat10==3
replace previous_occ =0 if beginning==cat11_start & cat10==6 & cat9==5
replace previous_occ =0 if beginning==cat11_start & cat10==5 & cat9==6
replace previous_occ =7 if beginning==cat11_start & cat10==7
replace previous_occ =8 if beginning==cat11_start & cat10==8
replace previous_occ =0 if beginning==cat12_start & cat11==6 & cat10==5
replace previous_occ =0 if beginning==cat12_start & cat11==5 & cat10==6
replace previous_occ =10 if beginning==cat12_start & cat11==10
replace previous_occ =4 if beginning==cat12_start & cat11==4
replace previous_occ =8 if beginning==cat12_start & cat11==8
replace previous_occ =3 if beginning==cat12_start & cat11==3
replace previous_occ =2 if beginning==cat12_start & cat11==2
replace previous_occ =9 if beginning==cat12_start & cat11==9
replace previous_occ =1 if beginning==cat12_start & cat11==1
replace previous_occ =7 if beginning==cat12_start & cat11==7
replace previous_occ =8 if beginning==cat13_start & cat12==8
replace previous_occ =1 if beginning==cat13_start & cat12==1
replace previous_occ =2 if beginning==cat13_start & cat12==2
replace previous_occ =7 if beginning==cat13_start & cat12==7
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =0 if beginning==cat13_start & cat12==6 & cat11==5
replace previous_occ =0 if beginning==cat13_start & cat12==5 & cat11==6
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =7 if beginning==cat14_start & cat13==7
replace previous_occ =8 if beginning==cat14_start & cat13==8
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat14_start & cat13==9
replace previous_occ =0 if beginning==cat14_start & cat13==5 & cat12==6
replace previous_occ =0 if beginning==cat14_start & cat13==6 & cat12==5
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =4 if beginning==cat14_start & cat13==4
replace previous_occ =1 if beginning==cat14_start & cat13==1
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =7 if beginning==cat15_start & cat14==7
replace previous_occ =1 if beginning==cat15_start & cat14==1
replace previous_occ =2 if beginning==cat15_start & cat14==2
replace previous_occ =9 if beginning==cat15_start & cat14==. & cat13==9
replace previous_occ =8 if beginning==cat15_start & cat14==8
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =7 if beginning==cat17_start & cat16==7
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =8 if beginning==cat18_start & cat17==8
replace previous_occ =1 if beginning==cat18_start & cat17==1
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =0 if beginning==cat19_start & cat18==5 & cat17==6
replace previous_occ =2 if beginning==cat19_start & cat18==2
replace previous_occ =7 if beginning==cat19_start & cat18==7
replace previous_occ =8 if beginning==cat19_start & cat18==8
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =9 if beginning==cat20_start & cat19==9
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =0 if beginning==cat13_start & cat12==5 & cat11==6
replace previous_occ =0 if beginning==cat12_start & cat11==5 & cat10==6
replace previous_occ =1 if beginning==cat19_start & cat18==1
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =8 if beginning==cat17_start & cat16==8
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =7 if beginning==cat20_start & cat19==7
replace previous_occ =0 if beginning==cat13_start & cat12==6 & cat11==5
replace previous_occ =0 if beginning==cat17_start & cat16==5 & cat15==6
replace previous_occ =4 if beginning==cat30_start & cat29==4
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp6", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp7: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp6"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp7 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat21_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat21_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/50 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat25_start & cat26==9
replace event=4 if beginning==cat14_start & cat14==6 & cat15==6 & cat16==4
replace event=8 if beginning==cat20_start & cat21==8

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat16_start - beginning if beginning==cat14_start & cat14==6 & cat15==6 & cat16==4
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp7", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =7

* Define the years and corresponding schooling variables
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling13 if beginning==cat13_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling15 if beginning==cat15_start & education==.
replace education=schooling16 if beginning==cat16_start & education==.
replace education=schooling17 if beginning==cat17_start & education==.
replace education=schooling19 if beginning==cat19_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =8 if beginning==cat13_start & cat12==8
replace previous_occ =1 if beginning==cat13_start & cat12==1
replace previous_occ =2 if beginning==cat13_start & cat12==2
replace previous_occ =7 if beginning==cat13_start & cat12==7
replace previous_occ =10 if beginning==cat13_start & cat12==10
replace previous_occ =0 if beginning==cat13_start & cat12==6 & cat11==5
replace previous_occ =0 if beginning==cat13_start & cat12==5 & cat11==6
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =4 if beginning==cat13_start & cat12==4
replace previous_occ =3 if beginning==cat13_start & cat12==3
replace previous_occ =9 if beginning==cat13_start & cat12==9
replace previous_occ =3 if beginning==cat14_start & cat13==3
replace previous_occ =7 if beginning==cat14_start & cat13==7
replace previous_occ =8 if beginning==cat14_start & cat13==8
replace previous_occ =2 if beginning==cat14_start & cat13==2
replace previous_occ =9 if beginning==cat14_start & cat13==9
replace previous_occ =0 if beginning==cat14_start & cat13==5 & cat12==6
replace previous_occ =0 if beginning==cat14_start & cat13==6 & cat12==5
replace previous_occ =10 if beginning==cat14_start & cat13==10
replace previous_occ =4 if beginning==cat14_start & cat13==4
replace previous_occ =1 if beginning==cat14_start & cat13==1
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =7 if beginning==cat15_start & cat14==7
replace previous_occ =1 if beginning==cat15_start & cat14==1
replace previous_occ =0 if beginning==cat15_start & cat14==5 & cat13==6
replace previous_occ =2 if beginning==cat15_start & cat14==2
replace previous_occ =9 if beginning==cat15_start & cat14==. & cat13==9
replace previous_occ =8 if beginning==cat15_start & cat14==8
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =8 if beginning==cat17_start & cat16==8
replace previous_occ =1 if beginning==cat17_start & cat16==1
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =7 if beginning==cat17_start & cat16==7
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =7 if beginning==cat18_start & cat17==7
replace previous_occ =8 if beginning==cat18_start & cat17==8
replace previous_occ =1 if beginning==cat18_start & cat17==1
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =0 if beginning==cat19_start & cat18==5 & cat17==6
replace previous_occ =2 if beginning==cat19_start & cat18==2
replace previous_occ =7 if beginning==cat19_start & cat18==7
replace previous_occ =8 if beginning==cat19_start & cat18==8
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =9 if beginning==cat20_start & cat19==9
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =0 if beginning==cat14_start & cat13==5 & cat12==6
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =8 if beginning==cat20_start & cat19==8
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =0 if beginning==cat13_start & cat12==5 & cat11==6
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp7", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp8: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp7"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp8 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat22_start & cat23==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat21_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat22_start & cat23==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/60 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=10 if beginning==cat24_start & cat25==10
replace event=8 if beginning==cat20_start & cat21==8
replace event=0 if beginning==cat27_start & cat28==.
replace event=4 if beginning==cat19_start & cat20==4
replace event=0 if beginning==cat23_start & cat24==.
* Make sure there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4

* Make sure there are no missings
tab duration,m

save "$resultdir\sample_Outofemp8", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =8

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling16 if beginning==cat16_start & education==.
replace education=schooling17 if beginning==cat17_start & education==.
replace education=schooling18 if beginning==cat18_start & education==.
replace education=schooling19 if beginning==cat19_start & education==.
replace education=schooling21 if beginning==cat21_start & education==.
replace education=schooling22 if beginning==cat22_start & education==.
replace education=schooling27 if beginning==cat27_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =10 if beginning==cat15_start & cat14==10
replace previous_occ =9 if beginning==cat15_start & cat14==9
replace previous_occ =4 if beginning==cat15_start & cat14==4
replace previous_occ =7 if beginning==cat15_start & cat14==7
replace previous_occ =1 if beginning==cat15_start & cat14==1
replace previous_occ =0 if beginning==cat15_start & cat14==5 & cat13==6
replace previous_occ =2 if beginning==cat15_start & cat14==2
replace previous_occ =9 if beginning==cat15_start & cat14==. & cat13==9
replace previous_occ =8 if beginning==cat15_start & cat14==8
replace previous_occ =3 if beginning==cat15_start & cat14==3
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =0 if beginning==cat16_start & cat15==6 & cat14==5
replace previous_occ =0 if beginning==cat16_start & cat15==5 & cat14==6
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =8 if beginning==cat17_start & cat16==8
replace previous_occ =1 if beginning==cat17_start & cat16==1
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =7 if beginning==cat17_start & cat16==7
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =0 if beginning==cat17_start & cat16==5 & cat15==6
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =7 if beginning==cat18_start & cat17==7
replace previous_occ =8 if beginning==cat18_start & cat17==8
replace previous_occ =1 if beginning==cat18_start & cat17==1
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =0 if beginning==cat19_start & cat18==5 & cat17==6
replace previous_occ =2 if beginning==cat19_start & cat18==2
replace previous_occ =7 if beginning==cat19_start & cat18==7
replace previous_occ =8 if beginning==cat19_start & cat18==8
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =4 if beginning==cat20_start & cat19==4
replace previous_occ =8 if beginning==cat20_start & cat19==8
replace previous_occ =2 if beginning==cat20_start & cat19==2
replace previous_occ =3 if beginning==cat20_start & cat19==3
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =9 if beginning==cat20_start & cat19==9
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =8 if beginning==cat21_start & cat20==8
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp8", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp9: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load dataset
clear
use "$resultdir\sample_Outofemp8"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp9 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
tab indicator,m
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat25_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat28_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat21_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5

* Make sure there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/70 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=8 if beginning==cat22_start & cat23==8
replace event=1 if beginning==cat21_start & cat22==1
replace event=1 if beginning==cat25_start & cat26==1
replace event=7 if beginning==cat20_start & cat21==7

* Make sure there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==1
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7

* Make sure there are no missings
tab duration,m

save "$resultdir\sample_Outofemp9", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =9

* Define the education variables
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling18 if beginning==cat18_start & education==.
replace education=schooling19 if beginning==cat19_start & education==.
replace education=schooling20 if beginning==cat20_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =0 if beginning==cat16_start & cat15==6 & cat14==5
replace previous_occ =0 if beginning==cat16_start & cat15==5 & cat14==6
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =8 if beginning==cat17_start & cat16==8
replace previous_occ =1 if beginning==cat17_start & cat16==1
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =7 if beginning==cat17_start & cat16==7
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =0 if beginning==cat17_start & cat16==5 & cat15==6
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =7 if beginning==cat18_start & cat17==7
replace previous_occ =8 if beginning==cat18_start & cat17==8
replace previous_occ =1 if beginning==cat18_start & cat17==1
replace previous_occ =0 if beginning==cat18_start & cat17==5 & cat16==6
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =0 if beginning==cat19_start & cat18==6 & cat17==5
replace previous_occ =1 if beginning==cat19_start & cat18==1
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =0 if beginning==cat19_start & cat18==5 & cat17==6
replace previous_occ =2 if beginning==cat19_start & cat18==2
replace previous_occ =7 if beginning==cat19_start & cat18==7
replace previous_occ =8 if beginning==cat19_start & cat18==8
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =4 if beginning==cat20_start & cat19==4
replace previous_occ =8 if beginning==cat20_start & cat19==8
replace previous_occ =7 if beginning==cat20_start & cat19==7
replace previous_occ =1 if beginning==cat20_start & cat19==1
replace previous_occ =2 if beginning==cat20_start & cat19==2
replace previous_occ =3 if beginning==cat20_start & cat19==3
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =9 if beginning==cat20_start & cat19==9
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =0 if beginning==cat18_start & cat17==5 & cat16==6
replace previous_occ =0 if beginning==cat18_start & cat17==6 & cat16==5
replace previous_occ =9 if beginning==cat30_start & cat29==9
replace previous_occ =0 if beginning==cat17_start & cat16==5 & cat15==6
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp9", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp10: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp9"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp10 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat26_start & cat27==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat24_start & cat25==.
replace indicator=0 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat25_start & cat26==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat23_start & cat24==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=1 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==.
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat34_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==6
replace beginning2=cat24_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat27_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat28_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat31_start if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=0 if beginning==cat23_start & cat24==.
replace event=6 if beginning==cat20_start & cat20==5 & cat21==6
replace event=9 if beginning==cat29_start & cat30==9
replace event=7 if beginning==cat20_start & cat21==7
replace event=3 if beginning==cat24_start & cat25==3
replace event=5 if beginning==cat20_start & cat20==6 & cat21==5
replace event=5 if beginning==cat21_start & cat21==6 & cat22==5
replace event=3 if beginning==cat30_start & cat31==3
replace event=10 if beginning==cat26_start & cat27==10
replace event=1 if beginning==cat22_start & cat23==1
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat25_start & cat26==9
replace event=9 if beginning==cat31_start & cat32==9
replace event=3 if beginning==cat25_start & cat26==3
replace event=4 if beginning==cat25_start & cat26==4

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==5 & cat21==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==6 & cat21==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==6 & cat22==5
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==1
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==3
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==4

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp10", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =10

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling20 if beginning==cat20_start & education==.
replace education=schooling21 if beginning==cat21_start & education==.
replace education=schooling22 if beginning==cat22_start & education==.
replace education=schooling24 if beginning==cat24_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =9 if beginning==cat16_start & cat15==9
replace previous_occ =10 if beginning==cat16_start & cat15==10
replace previous_occ =8 if beginning==cat16_start & cat15==8
replace previous_occ =2 if beginning==cat16_start & cat15==2
replace previous_occ =0 if beginning==cat16_start & cat15==6 & cat14==5
replace previous_occ =0 if beginning==cat16_start & cat15==5 & cat14==6
replace previous_occ =3 if beginning==cat16_start & cat15==3
replace previous_occ =7 if beginning==cat16_start & cat15==7
replace previous_occ =4 if beginning==cat16_start & cat15==4
replace previous_occ =8 if beginning==cat17_start & cat16==8
replace previous_occ =1 if beginning==cat17_start & cat16==1
replace previous_occ =3 if beginning==cat17_start & cat16==3
replace previous_occ =10 if beginning==cat17_start & cat16==10
replace previous_occ =7 if beginning==cat17_start & cat16==7
replace previous_occ =2 if beginning==cat17_start & cat16==2
replace previous_occ =0 if beginning==cat17_start & cat16==5 & cat15==6
replace previous_occ =9 if beginning==cat17_start & cat16==9
replace previous_occ =4 if beginning==cat17_start & cat16==4
replace previous_occ =9 if beginning==cat18_start & cat17==9
replace previous_occ =7 if beginning==cat18_start & cat17==7
replace previous_occ =8 if beginning==cat18_start & cat17==8
replace previous_occ =1 if beginning==cat18_start & cat17==1
replace previous_occ =0 if beginning==cat18_start & cat17==5 & cat16==6
replace previous_occ =10 if beginning==cat18_start & cat17==10
replace previous_occ =4 if beginning==cat18_start & cat17==4
replace previous_occ =2 if beginning==cat18_start & cat17==2
replace previous_occ =3 if beginning==cat18_start & cat17==3
replace previous_occ =0 if beginning==cat19_start & cat18==6 & cat17==5
replace previous_occ =1 if beginning==cat19_start & cat18==1
replace previous_occ =3 if beginning==cat19_start & cat18==3
replace previous_occ =0 if beginning==cat19_start & cat18==5 & cat17==6
replace previous_occ =2 if beginning==cat19_start & cat18==2
replace previous_occ =7 if beginning==cat19_start & cat18==7
replace previous_occ =8 if beginning==cat19_start & cat18==8
replace previous_occ =9 if beginning==cat19_start & cat18==9
replace previous_occ =4 if beginning==cat19_start & cat18==4
replace previous_occ =10 if beginning==cat19_start & cat18==10
replace previous_occ =4 if beginning==cat20_start & cat19==4
replace previous_occ =0 if beginning==cat20_start & cat19==5 & cat18==6
replace previous_occ =8 if beginning==cat20_start & cat19==8
replace previous_occ =7 if beginning==cat20_start & cat19==7
replace previous_occ =1 if beginning==cat20_start & cat19==1
replace previous_occ =2 if beginning==cat20_start & cat19==2
replace previous_occ =3 if beginning==cat20_start & cat19==3
replace previous_occ =10 if beginning==cat20_start & cat19==10
replace previous_occ =9 if beginning==cat20_start & cat19==9
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =9 if beginning==cat34_start & cat33==9
replace previous_occ =7 if beginning==cat22_start & cat21==7
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp10", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp11: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp10"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp11 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat2_start & cat3==5 | beginning==cat2_start & cat4==5 | beginning==cat2_start & cat5==5 | beginning==cat2_start & cat6==5 | beginning==cat2_start & cat7==5 | beginning==cat2_start & cat8==5 | beginning==cat2_start & cat9==5 | beginning==cat2_start & cat10==5 | beginning==cat2_start & cat11==5 | beginning==cat2_start & cat12==5 | beginning==cat2_start & cat13==5 | beginning==cat2_start & cat14==5 | beginning==cat2_start & cat15==5 | beginning==cat2_start & cat16==5 | beginning==cat2_start & cat17==5 | beginning==cat2_start & cat18==5 | beginning==cat2_start & cat19==5 | beginning==cat2_start & cat20==5 | beginning==cat2_start & cat21==5 | beginning==cat2_start & cat22==5 | beginning==cat2_start & cat23==5 | beginning==cat2_start & cat24==5 | beginning==cat2_start & cat25==5 | beginning==cat2_start & cat26==5 | beginning==cat2_start & cat27==5 | beginning==cat2_start & cat28==5 | beginning==cat2_start & cat29==5 | beginning==cat2_start & cat30==5 | beginning==cat2_start & cat31==5 | beginning==cat2_start & cat32==5 | beginning==cat2_start & cat33==5 | beginning==cat2_start & cat34==5 | beginning==cat2_start & cat35==5 | beginning==cat2_start & cat36==5 | beginning==cat2_start & cat37==5 | beginning==cat2_start & cat38==5 | beginning==cat2_start & cat39==5 | beginning==cat2_start & cat40==5 | beginning==cat2_start & cat41==5 | beginning==cat2_start & cat42==5 | beginning==cat2_start & cat43==5 | beginning==cat2_start & cat44==5 | beginning==cat2_start & cat45==5 | beginning==cat2_start & cat46==5 | beginning==cat2_start & cat47==5 | beginning==cat2_start & cat48==5 | beginning==cat2_start & cat49==5 | beginning==cat2_start & cat50==5 | beginning==cat2_start & cat51==5 | beginning==cat2_start & cat52==5 | beginning==cat2_start & cat53==5 | beginning==cat2_start & cat54==5 | beginning==cat2_start & cat55==5 | beginning==cat2_start & cat56==5 | beginning==cat2_start & cat57==5 | beginning==cat2_start & cat58==5 | beginning==cat2_start & cat59==5 | beginning==cat2_start & cat60==5 | beginning==cat2_start & cat61==5 | beginning==cat2_start & cat62==5 | beginning==cat2_start & cat63==5 | beginning==cat2_start & cat64==5 | beginning==cat2_start & cat65==5 | beginning==cat2_start & cat66==5 | beginning==cat2_start & cat67==5 | beginning==cat2_start & cat68==5 | beginning==cat2_start & cat69==5 | beginning==cat2_start & cat70==5 | beginning==cat2_start & cat71==5 | beginning==cat2_start & cat72==5 | beginning==cat2_start & cat73==5 | beginning==cat2_start & cat74==5 | beginning==cat2_start & cat75==5 | beginning==cat2_start & cat76==5 | beginning==cat2_start & cat77==5 | beginning==cat2_start & cat78==5 | beginning==cat2_start & cat79==5 | beginning==cat2_start & cat80==5 | beginning==cat2_start & cat81==5 | beginning==cat2_start & cat82==5 | beginning==cat2_start & cat83==5 | beginning==cat2_start & cat84==5 | beginning==cat2_start & cat85==5 | beginning==cat2_start & cat86==5 | beginning==cat2_start & cat87==5 | beginning==cat2_start & cat88==5 | beginning==cat2_start & cat89==5 | beginning==cat2_start & cat90==5
replace indicator=1 if beginning==cat2_start & cat3==6 | beginning==cat2_start & cat4==6 | beginning==cat2_start & cat5==6 | beginning==cat2_start & cat6==6 | beginning==cat2_start & cat7==6 | beginning==cat2_start & cat8==6 | beginning==cat2_start & cat9==6 | beginning==cat2_start & cat10==6 | beginning==cat2_start & cat11==6 | beginning==cat2_start & cat12==6 | beginning==cat2_start & cat13==6 | beginning==cat2_start & cat14==6 | beginning==cat2_start & cat15==6 | beginning==cat2_start & cat16==6 | beginning==cat2_start & cat17==6 | beginning==cat2_start & cat18==6 | beginning==cat2_start & cat19==6 | beginning==cat2_start & cat20==6 | beginning==cat2_start & cat21==6 | beginning==cat2_start & cat22==6 | beginning==cat2_start & cat23==6 | beginning==cat2_start & cat24==6 | beginning==cat2_start & cat25==6 | beginning==cat2_start & cat26==6 | beginning==cat2_start & cat27==6 | beginning==cat2_start & cat28==6 | beginning==cat2_start & cat29==6 | beginning==cat2_start & cat30==6 | beginning==cat2_start & cat31==6 | beginning==cat2_start & cat32==6 | beginning==cat2_start & cat33==6 | beginning==cat2_start & cat34==6 | beginning==cat2_start & cat35==6 | beginning==cat2_start & cat36==6 | beginning==cat2_start & cat37==6 | beginning==cat2_start & cat38==6 | beginning==cat2_start & cat39==6 | beginning==cat2_start & cat40==6 | beginning==cat2_start & cat41==6 | beginning==cat2_start & cat42==6 | beginning==cat2_start & cat43==6 | beginning==cat2_start & cat44==6 | beginning==cat2_start & cat45==6 | beginning==cat2_start & cat46==6 | beginning==cat2_start & cat47==6 | beginning==cat2_start & cat48==6 | beginning==cat2_start & cat49==6 | beginning==cat2_start & cat50==6 | beginning==cat2_start & cat51==6 | beginning==cat2_start & cat52==6 | beginning==cat2_start & cat53==6 | beginning==cat2_start & cat54==6 | beginning==cat2_start & cat55==6 | beginning==cat2_start & cat56==6 | beginning==cat2_start & cat57==6 | beginning==cat2_start & cat58==6 | beginning==cat2_start & cat59==6 | beginning==cat2_start & cat60==6 | beginning==cat2_start & cat61==6 | beginning==cat2_start & cat62==6 | beginning==cat2_start & cat63==6 | beginning==cat2_start & cat64==6 | beginning==cat2_start & cat65==6 | beginning==cat2_start & cat66==6 | beginning==cat2_start & cat67==6 | beginning==cat2_start & cat68==6 | beginning==cat2_start & cat69==6 | beginning==cat2_start & cat70==6 | beginning==cat2_start & cat71==6 | beginning==cat2_start & cat72==6 | beginning==cat2_start & cat73==6 | beginning==cat2_start & cat74==6 | beginning==cat2_start & cat75==6 | beginning==cat2_start & cat76==6 | beginning==cat2_start & cat77==6 | beginning==cat2_start & cat78==6 | beginning==cat2_start & cat79==6 | beginning==cat2_start & cat80==6 | beginning==cat2_start & cat81==6 | beginning==cat2_start & cat82==6 | beginning==cat2_start & cat83==6 | beginning==cat2_start & cat84==6 | beginning==cat2_start & cat85==6 | beginning==cat2_start & cat86==6 | beginning==cat2_start & cat87==6 | beginning==cat2_start & cat88==6 | beginning==cat2_start & cat89==6 | beginning==cat2_start & cat90==6
replace indicator=0 if beginning==cat2_start & indicator==.
replace indicator=1 if beginning==cat3_start & cat4==5 | beginning==cat3_start & cat5==5 | beginning==cat3_start & cat6==5 | beginning==cat3_start & cat7==5 | beginning==cat3_start & cat8==5 | beginning==cat3_start & cat9==5 | beginning==cat3_start & cat10==5 | beginning==cat3_start & cat11==5 | beginning==cat3_start & cat12==5 | beginning==cat3_start & cat13==5 | beginning==cat3_start & cat14==5 | beginning==cat3_start & cat15==5 | beginning==cat3_start & cat16==5 | beginning==cat3_start & cat17==5 | beginning==cat3_start & cat18==5 | beginning==cat3_start & cat19==5 | beginning==cat3_start & cat20==5 | beginning==cat3_start & cat21==5 | beginning==cat3_start & cat22==5 | beginning==cat3_start & cat23==5 | beginning==cat3_start & cat24==5 | beginning==cat3_start & cat25==5 | beginning==cat3_start & cat26==5 | beginning==cat3_start & cat27==5 | beginning==cat3_start & cat28==5 | beginning==cat3_start & cat29==5 | beginning==cat3_start & cat30==5 | beginning==cat3_start & cat31==5 | beginning==cat3_start & cat32==5 | beginning==cat3_start & cat33==5 | beginning==cat3_start & cat34==5 | beginning==cat3_start & cat35==5 | beginning==cat3_start & cat36==5 | beginning==cat3_start & cat37==5 | beginning==cat3_start & cat38==5 | beginning==cat3_start & cat39==5 | beginning==cat3_start & cat40==5 | beginning==cat3_start & cat41==5 | beginning==cat3_start & cat42==5 | beginning==cat3_start & cat43==5 | beginning==cat3_start & cat44==5 | beginning==cat3_start & cat45==5 | beginning==cat3_start & cat46==5 | beginning==cat3_start & cat47==5 | beginning==cat3_start & cat48==5 | beginning==cat3_start & cat49==5 | beginning==cat3_start & cat50==5 | beginning==cat3_start & cat51==5 | beginning==cat3_start & cat52==5 | beginning==cat3_start & cat53==5 | beginning==cat3_start & cat54==5 | beginning==cat3_start & cat55==5 | beginning==cat3_start & cat56==5 | beginning==cat3_start & cat57==5 | beginning==cat3_start & cat58==5 | beginning==cat3_start & cat59==5 | beginning==cat3_start & cat60==5 | beginning==cat3_start & cat61==5 | beginning==cat3_start & cat62==5 | beginning==cat3_start & cat63==5 | beginning==cat3_start & cat64==5 | beginning==cat3_start & cat65==5 | beginning==cat3_start & cat66==5 | beginning==cat3_start & cat67==5 | beginning==cat3_start & cat68==5 | beginning==cat3_start & cat69==5 | beginning==cat3_start & cat70==5 | beginning==cat3_start & cat71==5 | beginning==cat3_start & cat72==5 | beginning==cat3_start & cat73==5 | beginning==cat3_start & cat74==5 | beginning==cat3_start & cat75==5 | beginning==cat3_start & cat76==5 | beginning==cat3_start & cat77==5 | beginning==cat3_start & cat78==5 | beginning==cat3_start & cat79==5 | beginning==cat3_start & cat80==5 | beginning==cat3_start & cat81==5 | beginning==cat3_start & cat82==5 | beginning==cat3_start & cat83==5 | beginning==cat3_start & cat84==5 | beginning==cat3_start & cat85==5 | beginning==cat3_start & cat86==5 | beginning==cat3_start & cat87==5 | beginning==cat3_start & cat88==5 | beginning==cat3_start & cat89==5 | beginning==cat3_start & cat90==5
replace indicator=1 if beginning==cat3_start & cat4==6 | beginning==cat3_start & cat5==6 | beginning==cat3_start & cat6==6 | beginning==cat3_start & cat7==6 | beginning==cat3_start & cat8==6 | beginning==cat3_start & cat9==6 | beginning==cat3_start & cat10==6 | beginning==cat3_start & cat11==6 | beginning==cat3_start & cat12==6 | beginning==cat3_start & cat13==6 | beginning==cat3_start & cat14==6 | beginning==cat3_start & cat15==6 | beginning==cat3_start & cat16==6 | beginning==cat3_start & cat17==6 | beginning==cat3_start & cat18==6 | beginning==cat3_start & cat19==6 | beginning==cat3_start & cat20==6 | beginning==cat3_start & cat21==6 | beginning==cat3_start & cat22==6 | beginning==cat3_start & cat23==6 | beginning==cat3_start & cat24==6 | beginning==cat3_start & cat25==6 | beginning==cat3_start & cat26==6 | beginning==cat3_start & cat27==6 | beginning==cat3_start & cat28==6 | beginning==cat3_start & cat29==6 | beginning==cat3_start & cat30==6 | beginning==cat3_start & cat31==6 | beginning==cat3_start & cat32==6 | beginning==cat3_start & cat33==6 | beginning==cat3_start & cat34==6 | beginning==cat3_start & cat35==6 | beginning==cat3_start & cat36==6 | beginning==cat3_start & cat37==6 | beginning==cat3_start & cat38==6 | beginning==cat3_start & cat39==6 | beginning==cat3_start & cat40==6 | beginning==cat3_start & cat41==6 | beginning==cat3_start & cat42==6 | beginning==cat3_start & cat43==6 | beginning==cat3_start & cat44==6 | beginning==cat3_start & cat45==6 | beginning==cat3_start & cat46==6 | beginning==cat3_start & cat47==6 | beginning==cat3_start & cat48==6 | beginning==cat3_start & cat49==6 | beginning==cat3_start & cat50==6 | beginning==cat3_start & cat51==6 | beginning==cat3_start & cat52==6 | beginning==cat3_start & cat53==6 | beginning==cat3_start & cat54==6 | beginning==cat3_start & cat55==6 | beginning==cat3_start & cat56==6 | beginning==cat3_start & cat57==6 | beginning==cat3_start & cat58==6 | beginning==cat3_start & cat59==6 | beginning==cat3_start & cat60==6 | beginning==cat3_start & cat61==6 | beginning==cat3_start & cat62==6 | beginning==cat3_start & cat63==6 | beginning==cat3_start & cat64==6 | beginning==cat3_start & cat65==6 | beginning==cat3_start & cat66==6 | beginning==cat3_start & cat67==6 | beginning==cat3_start & cat68==6 | beginning==cat3_start & cat69==6 | beginning==cat3_start & cat70==6 | beginning==cat3_start & cat71==6 | beginning==cat3_start & cat72==6 | beginning==cat3_start & cat73==6 | beginning==cat3_start & cat74==6 | beginning==cat3_start & cat75==6 | beginning==cat3_start & cat76==6 | beginning==cat3_start & cat77==6 | beginning==cat3_start & cat78==6 | beginning==cat3_start & cat79==6 | beginning==cat3_start & cat80==6 | beginning==cat3_start & cat81==6 | beginning==cat3_start & cat82==6 | beginning==cat3_start & cat83==6 | beginning==cat3_start & cat84==6 | beginning==cat3_start & cat85==6 | beginning==cat3_start & cat86==6 | beginning==cat3_start & cat87==6 | beginning==cat3_start & cat88==6 | beginning==cat3_start & cat89==6 | beginning==cat3_start & cat90==6
replace indicator=0 if beginning==cat3_start & indicator==.
replace indicator=1 if beginning==cat4_start & cat5==5 | beginning==cat4_start & cat6==5 | beginning==cat4_start & cat7==5 | beginning==cat4_start & cat8==5 | beginning==cat4_start & cat9==5 | beginning==cat4_start & cat10==5 | beginning==cat4_start & cat11==5 | beginning==cat4_start & cat12==5 | beginning==cat4_start & cat13==5 | beginning==cat4_start & cat14==5 | beginning==cat4_start & cat15==5 | beginning==cat4_start & cat16==5 | beginning==cat4_start & cat17==5 | beginning==cat4_start & cat18==5 | beginning==cat4_start & cat19==5 | beginning==cat4_start & cat20==5 | beginning==cat4_start & cat21==5 | beginning==cat4_start & cat22==5 | beginning==cat4_start & cat23==5 | beginning==cat4_start & cat24==5 | beginning==cat4_start & cat25==5 | beginning==cat4_start & cat26==5 | beginning==cat4_start & cat27==5 | beginning==cat4_start & cat28==5 | beginning==cat4_start & cat29==5 | beginning==cat4_start & cat30==5 | beginning==cat4_start & cat31==5 | beginning==cat4_start & cat32==5 | beginning==cat4_start & cat33==5 | beginning==cat4_start & cat34==5 | beginning==cat4_start & cat35==5 | beginning==cat4_start & cat36==5 | beginning==cat4_start & cat37==5 | beginning==cat4_start & cat38==5 | beginning==cat4_start & cat39==5 | beginning==cat4_start & cat40==5 | beginning==cat4_start & cat41==5 | beginning==cat4_start & cat42==5 | beginning==cat4_start & cat43==5 | beginning==cat4_start & cat44==5 | beginning==cat4_start & cat45==5 | beginning==cat4_start & cat46==5 | beginning==cat4_start & cat47==5 | beginning==cat4_start & cat48==5 | beginning==cat4_start & cat49==5 | beginning==cat4_start & cat50==5 | beginning==cat4_start & cat51==5 | beginning==cat4_start & cat52==5 | beginning==cat4_start & cat53==5 | beginning==cat4_start & cat54==5 | beginning==cat4_start & cat55==5 | beginning==cat4_start & cat56==5 | beginning==cat4_start & cat57==5 | beginning==cat4_start & cat58==5 | beginning==cat4_start & cat59==5 | beginning==cat4_start & cat60==5 | beginning==cat4_start & cat61==5 | beginning==cat4_start & cat62==5 | beginning==cat4_start & cat63==5 | beginning==cat4_start & cat64==5 | beginning==cat4_start & cat65==5 | beginning==cat4_start & cat66==5 | beginning==cat4_start & cat67==5 | beginning==cat4_start & cat68==5 | beginning==cat4_start & cat69==5 | beginning==cat4_start & cat70==5 | beginning==cat4_start & cat71==5 | beginning==cat4_start & cat72==5 | beginning==cat4_start & cat73==5 | beginning==cat4_start & cat74==5 | beginning==cat4_start & cat75==5 | beginning==cat4_start & cat76==5 | beginning==cat4_start & cat77==5 | beginning==cat4_start & cat78==5 | beginning==cat4_start & cat79==5 | beginning==cat4_start & cat80==5 | beginning==cat4_start & cat81==5 | beginning==cat4_start & cat82==5 | beginning==cat4_start & cat83==5 | beginning==cat4_start & cat84==5 | beginning==cat4_start & cat85==5 | beginning==cat4_start & cat86==5 | beginning==cat4_start & cat87==5 | beginning==cat4_start & cat88==5 | beginning==cat4_start & cat89==5 | beginning==cat4_start & cat90==5
replace indicator=1 if beginning==cat4_start & cat5==6 | beginning==cat4_start & cat6==6 | beginning==cat4_start & cat7==6 | beginning==cat4_start & cat8==6 | beginning==cat4_start & cat9==6 | beginning==cat4_start & cat10==6 | beginning==cat4_start & cat11==6 | beginning==cat4_start & cat12==6 | beginning==cat4_start & cat13==6 | beginning==cat4_start & cat14==6 | beginning==cat4_start & cat15==6 | beginning==cat4_start & cat16==6 | beginning==cat4_start & cat17==6 | beginning==cat4_start & cat18==6 | beginning==cat4_start & cat19==6 | beginning==cat4_start & cat20==6 | beginning==cat4_start & cat21==6 | beginning==cat4_start & cat22==6 | beginning==cat4_start & cat23==6 | beginning==cat4_start & cat24==6 | beginning==cat4_start & cat25==6 | beginning==cat4_start & cat26==6 | beginning==cat4_start & cat27==6 | beginning==cat4_start & cat28==6 | beginning==cat4_start & cat29==6 | beginning==cat4_start & cat30==6 | beginning==cat4_start & cat31==6 | beginning==cat4_start & cat32==6 | beginning==cat4_start & cat33==6 | beginning==cat4_start & cat34==6 | beginning==cat4_start & cat35==6 | beginning==cat4_start & cat36==6 | beginning==cat4_start & cat37==6 | beginning==cat4_start & cat38==6 | beginning==cat4_start & cat39==6 | beginning==cat4_start & cat40==6 | beginning==cat4_start & cat41==6 | beginning==cat4_start & cat42==6 | beginning==cat4_start & cat43==6 | beginning==cat4_start & cat44==6 | beginning==cat4_start & cat45==6 | beginning==cat4_start & cat46==6 | beginning==cat4_start & cat47==6 | beginning==cat4_start & cat48==6 | beginning==cat4_start & cat49==6 | beginning==cat4_start & cat50==6 | beginning==cat4_start & cat51==6 | beginning==cat4_start & cat52==6 | beginning==cat4_start & cat53==6 | beginning==cat4_start & cat54==6 | beginning==cat4_start & cat55==6 | beginning==cat4_start & cat56==6 | beginning==cat4_start & cat57==6 | beginning==cat4_start & cat58==6 | beginning==cat4_start & cat59==6 | beginning==cat4_start & cat60==6 | beginning==cat4_start & cat61==6 | beginning==cat4_start & cat62==6 | beginning==cat4_start & cat63==6 | beginning==cat4_start & cat64==6 | beginning==cat4_start & cat65==6 | beginning==cat4_start & cat66==6 | beginning==cat4_start & cat67==6 | beginning==cat4_start & cat68==6 | beginning==cat4_start & cat69==6 | beginning==cat4_start & cat70==6 | beginning==cat4_start & cat71==6 | beginning==cat4_start & cat72==6 | beginning==cat4_start & cat73==6 | beginning==cat4_start & cat74==6 | beginning==cat4_start & cat75==6 | beginning==cat4_start & cat76==6 | beginning==cat4_start & cat77==6 | beginning==cat4_start & cat78==6 | beginning==cat4_start & cat79==6 | beginning==cat4_start & cat80==6 | beginning==cat4_start & cat81==6 | beginning==cat4_start & cat82==6 | beginning==cat4_start & cat83==6 | beginning==cat4_start & cat84==6 | beginning==cat4_start & cat85==6 | beginning==cat4_start & cat86==6 | beginning==cat4_start & cat87==6 | beginning==cat4_start & cat88==6 | beginning==cat4_start & cat89==6 | beginning==cat4_start & cat90==6
replace indicator=0 if beginning==cat4_start & indicator==.
replace indicator=1 if beginning==cat5_start & cat6==5 | beginning==cat5_start & cat7==5 | beginning==cat5_start & cat8==5 | beginning==cat5_start & cat9==5 | beginning==cat5_start & cat10==5 | beginning==cat5_start & cat11==5 | beginning==cat5_start & cat12==5 | beginning==cat5_start & cat13==5 | beginning==cat5_start & cat14==5 | beginning==cat5_start & cat15==5 | beginning==cat5_start & cat16==5 | beginning==cat5_start & cat17==5 | beginning==cat5_start & cat18==5 | beginning==cat5_start & cat19==5 | beginning==cat5_start & cat20==5 | beginning==cat5_start & cat21==5 | beginning==cat5_start & cat22==5 | beginning==cat5_start & cat23==5 | beginning==cat5_start & cat24==5 | beginning==cat5_start & cat25==5 | beginning==cat5_start & cat26==5 | beginning==cat5_start & cat27==5 | beginning==cat5_start & cat28==5 | beginning==cat5_start & cat29==5 | beginning==cat5_start & cat30==5 | beginning==cat5_start & cat31==5 | beginning==cat5_start & cat32==5 | beginning==cat5_start & cat33==5 | beginning==cat5_start & cat34==5 | beginning==cat5_start & cat35==5 | beginning==cat5_start & cat36==5 | beginning==cat5_start & cat37==5 | beginning==cat5_start & cat38==5 | beginning==cat5_start & cat39==5 | beginning==cat5_start & cat40==5 | beginning==cat5_start & cat41==5 | beginning==cat5_start & cat42==5 | beginning==cat5_start & cat43==5 | beginning==cat5_start & cat44==5 | beginning==cat5_start & cat45==5 | beginning==cat5_start & cat46==5 | beginning==cat5_start & cat47==5 | beginning==cat5_start & cat48==5 | beginning==cat5_start & cat49==5 | beginning==cat5_start & cat50==5 | beginning==cat5_start & cat51==5 | beginning==cat5_start & cat52==5 | beginning==cat5_start & cat53==5 | beginning==cat5_start & cat54==5 | beginning==cat5_start & cat55==5 | beginning==cat5_start & cat56==5 | beginning==cat5_start & cat57==5 | beginning==cat5_start & cat58==5 | beginning==cat5_start & cat59==5 | beginning==cat5_start & cat60==5 | beginning==cat5_start & cat61==5 | beginning==cat5_start & cat62==5 | beginning==cat5_start & cat63==5 | beginning==cat5_start & cat64==5 | beginning==cat5_start & cat65==5 | beginning==cat5_start & cat66==5 | beginning==cat5_start & cat67==5 | beginning==cat5_start & cat68==5 | beginning==cat5_start & cat69==5 | beginning==cat5_start & cat70==5 | beginning==cat5_start & cat71==5 | beginning==cat5_start & cat72==5 | beginning==cat5_start & cat73==5 | beginning==cat5_start & cat74==5 | beginning==cat5_start & cat75==5 | beginning==cat5_start & cat76==5 | beginning==cat5_start & cat77==5 | beginning==cat5_start & cat78==5 | beginning==cat5_start & cat79==5 | beginning==cat5_start & cat80==5 | beginning==cat5_start & cat81==5 | beginning==cat5_start & cat82==5 | beginning==cat5_start & cat83==5 | beginning==cat5_start & cat84==5 | beginning==cat5_start & cat85==5 | beginning==cat5_start & cat86==5 | beginning==cat5_start & cat87==5 | beginning==cat5_start & cat88==5 | beginning==cat5_start & cat89==5 | beginning==cat5_start & cat90==5 
replace indicator=1 if beginning==cat5_start & cat6==6 | beginning==cat5_start & cat7==6 | beginning==cat5_start & cat8==6 | beginning==cat5_start & cat9==6 | beginning==cat5_start & cat10==6 | beginning==cat5_start & cat11==6 | beginning==cat5_start & cat12==6 | beginning==cat5_start & cat13==6 | beginning==cat5_start & cat14==6 | beginning==cat5_start & cat15==6 | beginning==cat5_start & cat16==6 | beginning==cat5_start & cat17==6 | beginning==cat5_start & cat18==6 | beginning==cat5_start & cat19==6 | beginning==cat5_start & cat20==6 | beginning==cat5_start & cat21==6 | beginning==cat5_start & cat22==6 | beginning==cat5_start & cat23==6 | beginning==cat5_start & cat24==6 | beginning==cat5_start & cat25==6 | beginning==cat5_start & cat26==6 | beginning==cat5_start & cat27==6 | beginning==cat5_start & cat28==6 | beginning==cat5_start & cat29==6 | beginning==cat5_start & cat30==6 | beginning==cat5_start & cat31==6 | beginning==cat5_start & cat32==6 | beginning==cat5_start & cat33==6 | beginning==cat5_start & cat34==6 | beginning==cat5_start & cat35==6 | beginning==cat5_start & cat36==6 | beginning==cat5_start & cat37==6 | beginning==cat5_start & cat38==6 | beginning==cat5_start & cat39==6 | beginning==cat5_start & cat40==6 | beginning==cat5_start & cat41==6 | beginning==cat5_start & cat42==6 | beginning==cat5_start & cat43==6 | beginning==cat5_start & cat44==6 | beginning==cat5_start & cat45==6 | beginning==cat5_start & cat46==6 | beginning==cat5_start & cat47==6 | beginning==cat5_start & cat48==6 | beginning==cat5_start & cat49==6 | beginning==cat5_start & cat50==6 | beginning==cat5_start & cat51==6 | beginning==cat5_start & cat52==6 | beginning==cat5_start & cat53==6 | beginning==cat5_start & cat54==6 | beginning==cat5_start & cat55==6 | beginning==cat5_start & cat56==6 | beginning==cat5_start & cat57==6 | beginning==cat5_start & cat58==6 | beginning==cat5_start & cat59==6 | beginning==cat5_start & cat60==6 | beginning==cat5_start & cat61==6 | beginning==cat5_start & cat62==6 | beginning==cat5_start & cat63==6 | beginning==cat5_start & cat64==6 | beginning==cat5_start & cat65==6 | beginning==cat5_start & cat66==6 | beginning==cat5_start & cat67==6 | beginning==cat5_start & cat68==6 | beginning==cat5_start & cat69==6 | beginning==cat5_start & cat70==6 | beginning==cat5_start & cat71==6 | beginning==cat5_start & cat72==6 | beginning==cat5_start & cat73==6 | beginning==cat5_start & cat74==6 | beginning==cat5_start & cat75==6 | beginning==cat5_start & cat76==6 | beginning==cat5_start & cat77==6 | beginning==cat5_start & cat78==6 | beginning==cat5_start & cat79==6 | beginning==cat5_start & cat80==6 | beginning==cat5_start & cat81==6 | beginning==cat5_start & cat82==6 | beginning==cat5_start & cat83==6 | beginning==cat5_start & cat84==6 | beginning==cat5_start & cat85==6 | beginning==cat5_start & cat86==6 | beginning==cat5_start & cat87==6 | beginning==cat5_start & cat88==6 | beginning==cat5_start & cat89==6 | beginning==cat5_start & cat90==6 
replace indicator=0 if beginning==cat5_start & indicator==.
replace indicator=1 if beginning==cat6_start & cat7==5 | beginning==cat6_start & cat8==5 | beginning==cat6_start & cat9==5 | beginning==cat6_start & cat10==5 | beginning==cat6_start & cat11==5 | beginning==cat6_start & cat12==5 | beginning==cat6_start & cat13==5 | beginning==cat6_start & cat14==5 | beginning==cat6_start & cat15==5 | beginning==cat6_start & cat16==5 | beginning==cat6_start & cat17==5 | beginning==cat6_start & cat18==5 | beginning==cat6_start & cat19==5 | beginning==cat6_start & cat20==5 | beginning==cat6_start & cat21==5 | beginning==cat6_start & cat22==5 | beginning==cat6_start & cat23==5 | beginning==cat6_start & cat24==5 | beginning==cat6_start & cat25==5 | beginning==cat6_start & cat26==5 | beginning==cat6_start & cat27==5 | beginning==cat6_start & cat28==5 | beginning==cat6_start & cat29==5 | beginning==cat6_start & cat30==5 | beginning==cat6_start & cat31==5 | beginning==cat6_start & cat32==5 | beginning==cat6_start & cat33==5 | beginning==cat6_start & cat34==5 | beginning==cat6_start & cat35==5 | beginning==cat6_start & cat36==5 | beginning==cat6_start & cat37==5 | beginning==cat6_start & cat38==5 | beginning==cat6_start & cat39==5 | beginning==cat6_start & cat40==5 | beginning==cat6_start & cat41==5 | beginning==cat6_start & cat42==5 | beginning==cat6_start & cat43==5 | beginning==cat6_start & cat44==5 | beginning==cat6_start & cat45==5 | beginning==cat6_start & cat46==5 | beginning==cat6_start & cat47==5 | beginning==cat6_start & cat48==5 | beginning==cat6_start & cat49==5 | beginning==cat6_start & cat50==5 | beginning==cat6_start & cat51==5 | beginning==cat6_start & cat52==5 | beginning==cat6_start & cat53==5 | beginning==cat6_start & cat54==5 | beginning==cat6_start & cat55==5 | beginning==cat6_start & cat56==5 | beginning==cat6_start & cat57==5 | beginning==cat6_start & cat58==5 | beginning==cat6_start & cat59==5 | beginning==cat6_start & cat60==5 | beginning==cat6_start & cat61==5 | beginning==cat6_start & cat62==5 | beginning==cat6_start & cat63==5 | beginning==cat6_start & cat64==5 | beginning==cat6_start & cat65==5 | beginning==cat6_start & cat66==5 | beginning==cat6_start & cat67==5 | beginning==cat6_start & cat68==5 | beginning==cat6_start & cat69==5 | beginning==cat6_start & cat70==5 | beginning==cat6_start & cat71==5 | beginning==cat6_start & cat72==5 | beginning==cat6_start & cat73==5 | beginning==cat6_start & cat74==5 | beginning==cat6_start & cat75==5 | beginning==cat6_start & cat76==5 | beginning==cat6_start & cat77==5 | beginning==cat6_start & cat78==5 | beginning==cat6_start & cat79==5 | beginning==cat6_start & cat80==5 | beginning==cat6_start & cat81==5 | beginning==cat6_start & cat82==5 | beginning==cat6_start & cat83==5 | beginning==cat6_start & cat84==5 | beginning==cat6_start & cat85==5 | beginning==cat6_start & cat86==5 | beginning==cat6_start & cat87==5 | beginning==cat6_start & cat88==5 | beginning==cat6_start & cat89==5 | beginning==cat6_start & cat90==5
replace indicator=1 if beginning==cat6_start & cat7==6 | beginning==cat6_start & cat8==6 | beginning==cat6_start & cat9==6 | beginning==cat6_start & cat10==6 | beginning==cat6_start & cat11==6 | beginning==cat6_start & cat12==6 | beginning==cat6_start & cat13==6 | beginning==cat6_start & cat14==6 | beginning==cat6_start & cat15==6 | beginning==cat6_start & cat16==6 | beginning==cat6_start & cat17==6 | beginning==cat6_start & cat18==6 | beginning==cat6_start & cat19==6 | beginning==cat6_start & cat20==6 | beginning==cat6_start & cat21==6 | beginning==cat6_start & cat22==6 | beginning==cat6_start & cat23==6 | beginning==cat6_start & cat24==6 | beginning==cat6_start & cat25==6 | beginning==cat6_start & cat26==6 | beginning==cat6_start & cat27==6 | beginning==cat6_start & cat28==6 | beginning==cat6_start & cat29==6 | beginning==cat6_start & cat30==6 | beginning==cat6_start & cat31==6 | beginning==cat6_start & cat32==6 | beginning==cat6_start & cat33==6 | beginning==cat6_start & cat34==6 | beginning==cat6_start & cat35==6 | beginning==cat6_start & cat36==6 | beginning==cat6_start & cat37==6 | beginning==cat6_start & cat38==6 | beginning==cat6_start & cat39==6 | beginning==cat6_start & cat40==6 | beginning==cat6_start & cat41==6 | beginning==cat6_start & cat42==6 | beginning==cat6_start & cat43==6 | beginning==cat6_start & cat44==6 | beginning==cat6_start & cat45==6 | beginning==cat6_start & cat46==6 | beginning==cat6_start & cat47==6 | beginning==cat6_start & cat48==6 | beginning==cat6_start & cat49==6 | beginning==cat6_start & cat50==6 | beginning==cat6_start & cat51==6 | beginning==cat6_start & cat52==6 | beginning==cat6_start & cat53==6 | beginning==cat6_start & cat54==6 | beginning==cat6_start & cat55==6 | beginning==cat6_start & cat56==6 | beginning==cat6_start & cat57==6 | beginning==cat6_start & cat58==6 | beginning==cat6_start & cat59==6 | beginning==cat6_start & cat60==6 | beginning==cat6_start & cat61==6 | beginning==cat6_start & cat62==6 | beginning==cat6_start & cat63==6 | beginning==cat6_start & cat64==6 | beginning==cat6_start & cat65==6 | beginning==cat6_start & cat66==6 | beginning==cat6_start & cat67==6 | beginning==cat6_start & cat68==6 | beginning==cat6_start & cat69==6 | beginning==cat6_start & cat70==6 | beginning==cat6_start & cat71==6 | beginning==cat6_start & cat72==6 | beginning==cat6_start & cat73==6 | beginning==cat6_start & cat74==6 | beginning==cat6_start & cat75==6 | beginning==cat6_start & cat76==6 | beginning==cat6_start & cat77==6 | beginning==cat6_start & cat78==6 | beginning==cat6_start & cat79==6 | beginning==cat6_start & cat80==6 | beginning==cat6_start & cat81==6 | beginning==cat6_start & cat82==6 | beginning==cat6_start & cat83==6 | beginning==cat6_start & cat84==6 | beginning==cat6_start & cat85==6 | beginning==cat6_start & cat86==6 | beginning==cat6_start & cat87==6 | beginning==cat6_start & cat88==6 | beginning==cat6_start & cat89==6 | beginning==cat6_start & cat90==6
replace indicator=0 if beginning==cat6_start & indicator==.
replace indicator=1 if beginning==cat7_start & cat8==5 | beginning==cat7_start & cat9==5 | beginning==cat7_start & cat10==5 | beginning==cat7_start & cat11==5 | beginning==cat7_start & cat12==5 | beginning==cat7_start & cat13==5 | beginning==cat7_start & cat14==5 | beginning==cat7_start & cat15==5 | beginning==cat7_start & cat16==5 | beginning==cat7_start & cat17==5 | beginning==cat7_start & cat18==5 | beginning==cat7_start & cat19==5 | beginning==cat7_start & cat20==5 | beginning==cat7_start & cat21==5 | beginning==cat7_start & cat22==5 | beginning==cat7_start & cat23==5 | beginning==cat7_start & cat24==5 | beginning==cat7_start & cat25==5 | beginning==cat7_start & cat26==5 | beginning==cat7_start & cat27==5 | beginning==cat7_start & cat28==5 | beginning==cat7_start & cat29==5 | beginning==cat7_start & cat30==5 | beginning==cat7_start & cat31==5 | beginning==cat7_start & cat32==5 | beginning==cat7_start & cat33==5 | beginning==cat7_start & cat34==5 | beginning==cat7_start & cat35==5 | beginning==cat7_start & cat36==5 | beginning==cat7_start & cat37==5 | beginning==cat7_start & cat38==5 | beginning==cat7_start & cat39==5 | beginning==cat7_start & cat40==5 | beginning==cat7_start & cat41==5 | beginning==cat7_start & cat42==5 | beginning==cat7_start & cat43==5 | beginning==cat7_start & cat44==5 | beginning==cat7_start & cat45==5 | beginning==cat7_start & cat46==5 | beginning==cat7_start & cat47==5 | beginning==cat7_start & cat48==5 | beginning==cat7_start & cat49==5 | beginning==cat7_start & cat50==5 | beginning==cat7_start & cat51==5 | beginning==cat7_start & cat52==5 | beginning==cat7_start & cat53==5 | beginning==cat7_start & cat54==5 | beginning==cat7_start & cat55==5 | beginning==cat7_start & cat56==5 | beginning==cat7_start & cat57==5 | beginning==cat7_start & cat58==5 | beginning==cat7_start & cat59==5 | beginning==cat7_start & cat60==5 | beginning==cat7_start & cat61==5 | beginning==cat7_start & cat62==5 | beginning==cat7_start & cat63==5 | beginning==cat7_start & cat64==5 | beginning==cat7_start & cat65==5 | beginning==cat7_start & cat66==5 | beginning==cat7_start & cat67==5 | beginning==cat7_start & cat68==5 | beginning==cat7_start & cat69==5 | beginning==cat7_start & cat70==5 | beginning==cat7_start & cat71==5 | beginning==cat7_start & cat72==5 | beginning==cat7_start & cat73==5 | beginning==cat7_start & cat74==5 | beginning==cat7_start & cat75==5 | beginning==cat7_start & cat76==5 | beginning==cat7_start & cat77==5 | beginning==cat7_start & cat78==5 | beginning==cat7_start & cat79==5 | beginning==cat7_start & cat80==5 | beginning==cat7_start & cat81==5 | beginning==cat7_start & cat82==5 | beginning==cat7_start & cat83==5 | beginning==cat7_start & cat84==5 | beginning==cat7_start & cat85==5 | beginning==cat7_start & cat86==5 | beginning==cat7_start & cat87==5 | beginning==cat7_start & cat88==5 | beginning==cat7_start & cat89==5 | beginning==cat7_start & cat90==5
replace indicator=1 if beginning==cat7_start & cat8==6 | beginning==cat7_start & cat9==6 | beginning==cat7_start & cat10==6 | beginning==cat7_start & cat11==6 | beginning==cat7_start & cat12==6 | beginning==cat7_start & cat13==6 | beginning==cat7_start & cat14==6 | beginning==cat7_start & cat15==6 | beginning==cat7_start & cat16==6 | beginning==cat7_start & cat17==6 | beginning==cat7_start & cat18==6 | beginning==cat7_start & cat19==6 | beginning==cat7_start & cat20==6 | beginning==cat7_start & cat21==6 | beginning==cat7_start & cat22==6 | beginning==cat7_start & cat23==6 | beginning==cat7_start & cat24==6 | beginning==cat7_start & cat25==6 | beginning==cat7_start & cat26==6 | beginning==cat7_start & cat27==6 | beginning==cat7_start & cat28==6 | beginning==cat7_start & cat29==6 | beginning==cat7_start & cat30==6 | beginning==cat7_start & cat31==6 | beginning==cat7_start & cat32==6 | beginning==cat7_start & cat33==6 | beginning==cat7_start & cat34==6 | beginning==cat7_start & cat35==6 | beginning==cat7_start & cat36==6 | beginning==cat7_start & cat37==6 | beginning==cat7_start & cat38==6 | beginning==cat7_start & cat39==6 | beginning==cat7_start & cat40==6 | beginning==cat7_start & cat41==6 | beginning==cat7_start & cat42==6 | beginning==cat7_start & cat43==6 | beginning==cat7_start & cat44==6 | beginning==cat7_start & cat45==6 | beginning==cat7_start & cat46==6 | beginning==cat7_start & cat47==6 | beginning==cat7_start & cat48==6 | beginning==cat7_start & cat49==6 | beginning==cat7_start & cat50==6 | beginning==cat7_start & cat51==6 | beginning==cat7_start & cat52==6 | beginning==cat7_start & cat53==6 | beginning==cat7_start & cat54==6 | beginning==cat7_start & cat55==6 | beginning==cat7_start & cat56==6 | beginning==cat7_start & cat57==6 | beginning==cat7_start & cat58==6 | beginning==cat7_start & cat59==6 | beginning==cat7_start & cat60==6 | beginning==cat7_start & cat61==6 | beginning==cat7_start & cat62==6 | beginning==cat7_start & cat63==6 | beginning==cat7_start & cat64==6 | beginning==cat7_start & cat65==6 | beginning==cat7_start & cat66==6 | beginning==cat7_start & cat67==6 | beginning==cat7_start & cat68==6 | beginning==cat7_start & cat69==6 | beginning==cat7_start & cat70==6 | beginning==cat7_start & cat71==6 | beginning==cat7_start & cat72==6 | beginning==cat7_start & cat73==6 | beginning==cat7_start & cat74==6 | beginning==cat7_start & cat75==6 | beginning==cat7_start & cat76==6 | beginning==cat7_start & cat77==6 | beginning==cat7_start & cat78==6 | beginning==cat7_start & cat79==6 | beginning==cat7_start & cat80==6 | beginning==cat7_start & cat81==6 | beginning==cat7_start & cat82==6 | beginning==cat7_start & cat83==6 | beginning==cat7_start & cat84==6 | beginning==cat7_start & cat85==6 | beginning==cat7_start & cat86==6 | beginning==cat7_start & cat87==6 | beginning==cat7_start & cat88==6 | beginning==cat7_start & cat89==6 | beginning==cat7_start & cat90==6
replace indicator=0 if beginning==cat7_start & indicator==.
replace indicator=1 if beginning==cat8_start & cat9==5 | beginning==cat8_start & cat10==5 | beginning==cat8_start & cat11==5 | beginning==cat8_start & cat12==5 | beginning==cat8_start & cat13==5 | beginning==cat8_start & cat14==5 | beginning==cat8_start & cat15==5 | beginning==cat8_start & cat16==5 | beginning==cat8_start & cat17==5 | beginning==cat8_start & cat18==5 | beginning==cat8_start & cat19==5 | beginning==cat8_start & cat20==5 | beginning==cat8_start & cat21==5 | beginning==cat8_start & cat22==5 | beginning==cat8_start & cat23==5 | beginning==cat8_start & cat24==5 | beginning==cat8_start & cat25==5 | beginning==cat8_start & cat26==5 | beginning==cat8_start & cat27==5 | beginning==cat8_start & cat28==5 | beginning==cat8_start & cat29==5 | beginning==cat8_start & cat30==5 | beginning==cat8_start & cat31==5 | beginning==cat8_start & cat32==5 | beginning==cat8_start & cat33==5 | beginning==cat8_start & cat34==5 | beginning==cat8_start & cat35==5 | beginning==cat8_start & cat36==5 | beginning==cat8_start & cat37==5 | beginning==cat8_start & cat38==5 | beginning==cat8_start & cat39==5 | beginning==cat8_start & cat40==5 | beginning==cat8_start & cat41==5 | beginning==cat8_start & cat42==5 | beginning==cat8_start & cat43==5 | beginning==cat8_start & cat44==5 | beginning==cat8_start & cat45==5 | beginning==cat8_start & cat46==5 | beginning==cat8_start & cat47==5 | beginning==cat8_start & cat48==5 | beginning==cat8_start & cat49==5 | beginning==cat8_start & cat50==5 | beginning==cat8_start & cat51==5 | beginning==cat8_start & cat52==5 | beginning==cat8_start & cat53==5 | beginning==cat8_start & cat54==5 | beginning==cat8_start & cat55==5 | beginning==cat8_start & cat56==5 | beginning==cat8_start & cat57==5 | beginning==cat8_start & cat58==5 | beginning==cat8_start & cat59==5 | beginning==cat8_start & cat60==5 | beginning==cat8_start & cat61==5 | beginning==cat8_start & cat62==5 | beginning==cat8_start & cat63==5 | beginning==cat8_start & cat64==5 | beginning==cat8_start & cat65==5 | beginning==cat8_start & cat66==5 | beginning==cat8_start & cat67==5 | beginning==cat8_start & cat68==5 | beginning==cat8_start & cat69==5 | beginning==cat8_start & cat70==5 | beginning==cat8_start & cat71==5 | beginning==cat8_start & cat72==5 | beginning==cat8_start & cat73==5 | beginning==cat8_start & cat74==5 | beginning==cat8_start & cat75==5 | beginning==cat8_start & cat76==5 | beginning==cat8_start & cat77==5 | beginning==cat8_start & cat78==5 | beginning==cat8_start & cat79==5 | beginning==cat8_start & cat80==5 | beginning==cat8_start & cat81==5 | beginning==cat8_start & cat82==5 | beginning==cat8_start & cat83==5 | beginning==cat8_start & cat84==5 | beginning==cat8_start & cat85==5 | beginning==cat8_start & cat86==5 | beginning==cat8_start & cat87==5 | beginning==cat8_start & cat88==5 | beginning==cat8_start & cat89==5 | beginning==cat8_start & cat90==5
replace indicator=1 if beginning==cat8_start & cat9==6 | beginning==cat8_start & cat10==6 | beginning==cat8_start & cat11==6 | beginning==cat8_start & cat12==6 | beginning==cat8_start & cat13==6 | beginning==cat8_start & cat14==6 | beginning==cat8_start & cat15==6 | beginning==cat8_start & cat16==6 | beginning==cat8_start & cat17==6 | beginning==cat8_start & cat18==6 | beginning==cat8_start & cat19==6 | beginning==cat8_start & cat20==6 | beginning==cat8_start & cat21==6 | beginning==cat8_start & cat22==6 | beginning==cat8_start & cat23==6 | beginning==cat8_start & cat24==6 | beginning==cat8_start & cat25==6 | beginning==cat8_start & cat26==6 | beginning==cat8_start & cat27==6 | beginning==cat8_start & cat28==6 | beginning==cat8_start & cat29==6 | beginning==cat8_start & cat30==6 | beginning==cat8_start & cat31==6 | beginning==cat8_start & cat32==6 | beginning==cat8_start & cat33==6 | beginning==cat8_start & cat34==6 | beginning==cat8_start & cat35==6 | beginning==cat8_start & cat36==6 | beginning==cat8_start & cat37==6 | beginning==cat8_start & cat38==6 | beginning==cat8_start & cat39==6 | beginning==cat8_start & cat40==6 | beginning==cat8_start & cat41==6 | beginning==cat8_start & cat42==6 | beginning==cat8_start & cat43==6 | beginning==cat8_start & cat44==6 | beginning==cat8_start & cat45==6 | beginning==cat8_start & cat46==6 | beginning==cat8_start & cat47==6 | beginning==cat8_start & cat48==6 | beginning==cat8_start & cat49==6 | beginning==cat8_start & cat50==6 | beginning==cat8_start & cat51==6 | beginning==cat8_start & cat52==6 | beginning==cat8_start & cat53==6 | beginning==cat8_start & cat54==6 | beginning==cat8_start & cat55==6 | beginning==cat8_start & cat56==6 | beginning==cat8_start & cat57==6 | beginning==cat8_start & cat58==6 | beginning==cat8_start & cat59==6 | beginning==cat8_start & cat60==6 | beginning==cat8_start & cat61==6 | beginning==cat8_start & cat62==6 | beginning==cat8_start & cat63==6 | beginning==cat8_start & cat64==6 | beginning==cat8_start & cat65==6 | beginning==cat8_start & cat66==6 | beginning==cat8_start & cat67==6 | beginning==cat8_start & cat68==6 | beginning==cat8_start & cat69==6 | beginning==cat8_start & cat70==6 | beginning==cat8_start & cat71==6 | beginning==cat8_start & cat72==6 | beginning==cat8_start & cat73==6 | beginning==cat8_start & cat74==6 | beginning==cat8_start & cat75==6 | beginning==cat8_start & cat76==6 | beginning==cat8_start & cat77==6 | beginning==cat8_start & cat78==6 | beginning==cat8_start & cat79==6 | beginning==cat8_start & cat80==6 | beginning==cat8_start & cat81==6 | beginning==cat8_start & cat82==6 | beginning==cat8_start & cat83==6 | beginning==cat8_start & cat84==6 | beginning==cat8_start & cat85==6 | beginning==cat8_start & cat86==6 | beginning==cat8_start & cat87==6 | beginning==cat8_start & cat88==6 | beginning==cat8_start & cat89==6 | beginning==cat8_start & cat90==6
replace indicator=0 if beginning==cat8_start & indicator==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat9_start & cat10==5 | beginning==cat9_start & cat11==5 | beginning==cat9_start & cat12==5 | beginning==cat9_start & cat13==5 | beginning==cat9_start & cat14==5 | beginning==cat9_start & cat15==5 | beginning==cat9_start & cat16==5 | beginning==cat9_start & cat17==5 | beginning==cat9_start & cat18==5 | beginning==cat9_start & cat19==5 | beginning==cat9_start & cat20==5 | beginning==cat9_start & cat21==5 | beginning==cat9_start & cat22==5 | beginning==cat9_start & cat23==5 | beginning==cat9_start & cat24==5 | beginning==cat9_start & cat25==5 | beginning==cat9_start & cat26==5 | beginning==cat9_start & cat27==5 | beginning==cat9_start & cat28==5 | beginning==cat9_start & cat29==5 | beginning==cat9_start & cat30==5 | beginning==cat9_start & cat31==5 | beginning==cat9_start & cat32==5 | beginning==cat9_start & cat33==5 | beginning==cat9_start & cat34==5 | beginning==cat9_start & cat35==5 | beginning==cat9_start & cat36==5 | beginning==cat9_start & cat37==5 | beginning==cat9_start & cat38==5 | beginning==cat9_start & cat39==5 | beginning==cat9_start & cat40==5 | beginning==cat9_start & cat41==5 | beginning==cat9_start & cat42==5 | beginning==cat9_start & cat43==5 | beginning==cat9_start & cat44==5 | beginning==cat9_start & cat45==5 | beginning==cat9_start & cat46==5 | beginning==cat9_start & cat47==5 | beginning==cat9_start & cat48==5 | beginning==cat9_start & cat49==5 | beginning==cat9_start & cat50==5 | beginning==cat9_start & cat51==5 | beginning==cat9_start & cat52==5 | beginning==cat9_start & cat53==5 | beginning==cat9_start & cat54==5 | beginning==cat9_start & cat55==5 | beginning==cat9_start & cat56==5 | beginning==cat9_start & cat57==5 | beginning==cat9_start & cat58==5 | beginning==cat9_start & cat59==5 | beginning==cat9_start & cat60==5 | beginning==cat9_start & cat61==5 | beginning==cat9_start & cat62==5 | beginning==cat9_start & cat63==5 | beginning==cat9_start & cat64==5 | beginning==cat9_start & cat65==5 | beginning==cat9_start & cat66==5 | beginning==cat9_start & cat67==5 | beginning==cat9_start & cat68==5 | beginning==cat9_start & cat69==5 | beginning==cat9_start & cat70==5 | beginning==cat9_start & cat71==5 | beginning==cat9_start & cat72==5 | beginning==cat9_start & cat73==5 | beginning==cat9_start & cat74==5 | beginning==cat9_start & cat75==5 | beginning==cat9_start & cat76==5 | beginning==cat9_start & cat77==5 | beginning==cat9_start & cat78==5 | beginning==cat9_start & cat79==5 | beginning==cat9_start & cat80==5 | beginning==cat9_start & cat81==5 | beginning==cat9_start & cat82==5 | beginning==cat9_start & cat83==5 | beginning==cat9_start & cat84==5 | beginning==cat9_start & cat85==5 | beginning==cat9_start & cat86==5 | beginning==cat9_start & cat87==5 | beginning==cat9_start & cat88==5 | beginning==cat9_start & cat89==5 | beginning==cat9_start & cat90==5
replace indicator=1 if beginning==cat9_start & cat10==6 | beginning==cat9_start & cat11==6 | beginning==cat9_start & cat12==6 | beginning==cat9_start & cat13==6 | beginning==cat9_start & cat14==6 | beginning==cat9_start & cat15==6 | beginning==cat9_start & cat16==6 | beginning==cat9_start & cat17==6 | beginning==cat9_start & cat18==6 | beginning==cat9_start & cat19==6 | beginning==cat9_start & cat20==6 | beginning==cat9_start & cat21==6 | beginning==cat9_start & cat22==6 | beginning==cat9_start & cat23==6 | beginning==cat9_start & cat24==6 | beginning==cat9_start & cat25==6 | beginning==cat9_start & cat26==6 | beginning==cat9_start & cat27==6 | beginning==cat9_start & cat28==6 | beginning==cat9_start & cat29==6 | beginning==cat9_start & cat30==6 | beginning==cat9_start & cat31==6 | beginning==cat9_start & cat32==6 | beginning==cat9_start & cat33==6 | beginning==cat9_start & cat34==6 | beginning==cat9_start & cat35==6 | beginning==cat9_start & cat36==6 | beginning==cat9_start & cat37==6 | beginning==cat9_start & cat38==6 | beginning==cat9_start & cat39==6 | beginning==cat9_start & cat40==6 | beginning==cat9_start & cat41==6 | beginning==cat9_start & cat42==6 | beginning==cat9_start & cat43==6 | beginning==cat9_start & cat44==6 | beginning==cat9_start & cat45==6 | beginning==cat9_start & cat46==6 | beginning==cat9_start & cat47==6 | beginning==cat9_start & cat48==6 | beginning==cat9_start & cat49==6 | beginning==cat9_start & cat50==6 | beginning==cat9_start & cat51==6 | beginning==cat9_start & cat52==6 | beginning==cat9_start & cat53==6 | beginning==cat9_start & cat54==6 | beginning==cat9_start & cat55==6 | beginning==cat9_start & cat56==6 | beginning==cat9_start & cat57==6 | beginning==cat9_start & cat58==6 | beginning==cat9_start & cat59==6 | beginning==cat9_start & cat60==6 | beginning==cat9_start & cat61==6 | beginning==cat9_start & cat62==6 | beginning==cat9_start & cat63==6 | beginning==cat9_start & cat64==6 | beginning==cat9_start & cat65==6 | beginning==cat9_start & cat66==6 | beginning==cat9_start & cat67==6 | beginning==cat9_start & cat68==6 | beginning==cat9_start & cat69==6 | beginning==cat9_start & cat70==6 | beginning==cat9_start & cat71==6 | beginning==cat9_start & cat72==6 | beginning==cat9_start & cat73==6 | beginning==cat9_start & cat74==6 | beginning==cat9_start & cat75==6 | beginning==cat9_start & cat76==6 | beginning==cat9_start & cat77==6 | beginning==cat9_start & cat78==6 | beginning==cat9_start & cat79==6 | beginning==cat9_start & cat80==6 | beginning==cat9_start & cat81==6 | beginning==cat9_start & cat82==6 | beginning==cat9_start & cat83==6 | beginning==cat9_start & cat84==6 | beginning==cat9_start & cat85==6 | beginning==cat9_start & cat86==6 | beginning==cat9_start & cat87==6 | beginning==cat9_start & cat88==6 | beginning==cat9_start & cat89==6 | beginning==cat9_start & cat90==6
replace indicator=0 if beginning==cat9_start & indicator==.
replace indicator=1 if beginning==cat10_start & cat11==5 | beginning==cat10_start & cat12==5 | beginning==cat10_start & cat13==5 | beginning==cat10_start & cat14==5 | beginning==cat10_start & cat15==5 | beginning==cat10_start & cat16==5 | beginning==cat10_start & cat17==5 | beginning==cat10_start & cat18==5 | beginning==cat10_start & cat19==5 | beginning==cat10_start & cat20==5 | beginning==cat10_start & cat21==5 | beginning==cat10_start & cat22==5 | beginning==cat10_start & cat23==5 | beginning==cat10_start & cat24==5 | beginning==cat10_start & cat25==5 | beginning==cat10_start & cat26==5 | beginning==cat10_start & cat27==5 | beginning==cat10_start & cat28==5 | beginning==cat10_start & cat29==5 | beginning==cat10_start & cat30==5 | beginning==cat10_start & cat31==5 | beginning==cat10_start & cat32==5 | beginning==cat10_start & cat33==5 | beginning==cat10_start & cat34==5 | beginning==cat10_start & cat35==5 | beginning==cat10_start & cat36==5 | beginning==cat10_start & cat37==5 | beginning==cat10_start & cat38==5 | beginning==cat10_start & cat39==5 | beginning==cat10_start & cat40==5 | beginning==cat10_start & cat41==5 | beginning==cat10_start & cat42==5 | beginning==cat10_start & cat43==5 | beginning==cat10_start & cat44==5 | beginning==cat10_start & cat45==5 | beginning==cat10_start & cat46==5 | beginning==cat10_start & cat47==5 | beginning==cat10_start & cat48==5 | beginning==cat10_start & cat49==5 | beginning==cat10_start & cat50==5 | beginning==cat10_start & cat51==5 | beginning==cat10_start & cat52==5 | beginning==cat10_start & cat53==5 | beginning==cat10_start & cat54==5 | beginning==cat10_start & cat55==5 | beginning==cat10_start & cat56==5 | beginning==cat10_start & cat57==5 | beginning==cat10_start & cat58==5 | beginning==cat10_start & cat59==5 | beginning==cat10_start & cat60==5 | beginning==cat10_start & cat61==5 | beginning==cat10_start & cat62==5 | beginning==cat10_start & cat63==5 | beginning==cat10_start & cat64==5 | beginning==cat10_start & cat65==5 | beginning==cat10_start & cat66==5 | beginning==cat10_start & cat67==5 | beginning==cat10_start & cat68==5 | beginning==cat10_start & cat69==5 | beginning==cat10_start & cat70==5 | beginning==cat10_start & cat71==5 | beginning==cat10_start & cat72==5 | beginning==cat10_start & cat73==5 | beginning==cat10_start & cat74==5 | beginning==cat10_start & cat75==5 | beginning==cat10_start & cat76==5 | beginning==cat10_start & cat77==5 | beginning==cat10_start & cat78==5 | beginning==cat10_start & cat79==5 | beginning==cat10_start & cat80==5 | beginning==cat10_start & cat81==5 | beginning==cat10_start & cat82==5 | beginning==cat10_start & cat83==5 | beginning==cat10_start & cat84==5 | beginning==cat10_start & cat85==5 | beginning==cat10_start & cat86==5 | beginning==cat10_start & cat87==5 | beginning==cat10_start & cat88==5 | beginning==cat10_start & cat89==5 | beginning==cat10_start & cat90==5
replace indicator=1 if beginning==cat10_start & cat11==6 | beginning==cat10_start & cat12==6 | beginning==cat10_start & cat13==6 | beginning==cat10_start & cat14==6 | beginning==cat10_start & cat15==6 | beginning==cat10_start & cat16==6 | beginning==cat10_start & cat17==6 | beginning==cat10_start & cat18==6 | beginning==cat10_start & cat19==6 | beginning==cat10_start & cat20==6 | beginning==cat10_start & cat21==6 | beginning==cat10_start & cat22==6 | beginning==cat10_start & cat23==6 | beginning==cat10_start & cat24==6 | beginning==cat10_start & cat25==6 | beginning==cat10_start & cat26==6 | beginning==cat10_start & cat27==6 | beginning==cat10_start & cat28==6 | beginning==cat10_start & cat29==6 | beginning==cat10_start & cat30==6 | beginning==cat10_start & cat31==6 | beginning==cat10_start & cat32==6 | beginning==cat10_start & cat33==6 | beginning==cat10_start & cat34==6 | beginning==cat10_start & cat35==6 | beginning==cat10_start & cat36==6 | beginning==cat10_start & cat37==6 | beginning==cat10_start & cat38==6 | beginning==cat10_start & cat39==6 | beginning==cat10_start & cat40==6 | beginning==cat10_start & cat41==6 | beginning==cat10_start & cat42==6 | beginning==cat10_start & cat43==6 | beginning==cat10_start & cat44==6 | beginning==cat10_start & cat45==6 | beginning==cat10_start & cat46==6 | beginning==cat10_start & cat47==6 | beginning==cat10_start & cat48==6 | beginning==cat10_start & cat49==6 | beginning==cat10_start & cat50==6 | beginning==cat10_start & cat51==6 | beginning==cat10_start & cat52==6 | beginning==cat10_start & cat53==6 | beginning==cat10_start & cat54==6 | beginning==cat10_start & cat55==6 | beginning==cat10_start & cat56==6 | beginning==cat10_start & cat57==6 | beginning==cat10_start & cat58==6 | beginning==cat10_start & cat59==6 | beginning==cat10_start & cat60==6 | beginning==cat10_start & cat61==6 | beginning==cat10_start & cat62==6 | beginning==cat10_start & cat63==6 | beginning==cat10_start & cat64==6 | beginning==cat10_start & cat65==6 | beginning==cat10_start & cat66==6 | beginning==cat10_start & cat67==6 | beginning==cat10_start & cat68==6 | beginning==cat10_start & cat69==6 | beginning==cat10_start & cat70==6 | beginning==cat10_start & cat71==6 | beginning==cat10_start & cat72==6 | beginning==cat10_start & cat73==6 | beginning==cat10_start & cat74==6 | beginning==cat10_start & cat75==6 | beginning==cat10_start & cat76==6 | beginning==cat10_start & cat77==6 | beginning==cat10_start & cat78==6 | beginning==cat10_start & cat79==6 | beginning==cat10_start & cat80==6 | beginning==cat10_start & cat81==6 | beginning==cat10_start & cat82==6 | beginning==cat10_start & cat83==6 | beginning==cat10_start & cat84==6 | beginning==cat10_start & cat85==6 | beginning==cat10_start & cat86==6 | beginning==cat10_start & cat87==6 | beginning==cat10_start & cat88==6 | beginning==cat10_start & cat89==6 | beginning==cat10_start & cat90==6
replace indicator=0 if beginning==cat10_start & indicator==.
replace indicator=1 if beginning==cat11_start & cat12==5 | beginning==cat11_start & cat13==5 | beginning==cat11_start & cat14==5 | beginning==cat11_start & cat15==5 | beginning==cat11_start & cat16==5 | beginning==cat11_start & cat17==5 | beginning==cat11_start & cat18==5 | beginning==cat11_start & cat19==5 | beginning==cat11_start & cat20==5 | beginning==cat11_start & cat21==5 | beginning==cat11_start & cat22==5 | beginning==cat11_start & cat23==5 | beginning==cat11_start & cat24==5 | beginning==cat11_start & cat25==5 | beginning==cat11_start & cat26==5 | beginning==cat11_start & cat27==5 | beginning==cat11_start & cat28==5 | beginning==cat11_start & cat29==5 | beginning==cat11_start & cat30==5 | beginning==cat11_start & cat31==5 | beginning==cat11_start & cat32==5 | beginning==cat11_start & cat33==5 | beginning==cat11_start & cat34==5 | beginning==cat11_start & cat35==5 | beginning==cat11_start & cat36==5 | beginning==cat11_start & cat37==5 | beginning==cat11_start & cat38==5 | beginning==cat11_start & cat39==5 | beginning==cat11_start & cat40==5 | beginning==cat11_start & cat41==5 | beginning==cat11_start & cat42==5 | beginning==cat11_start & cat43==5 | beginning==cat11_start & cat44==5 | beginning==cat11_start & cat45==5 | beginning==cat11_start & cat46==5 | beginning==cat11_start & cat47==5 | beginning==cat11_start & cat48==5 | beginning==cat11_start & cat49==5 | beginning==cat11_start & cat50==5 | beginning==cat11_start & cat51==5 | beginning==cat11_start & cat52==5 | beginning==cat11_start & cat53==5 | beginning==cat11_start & cat54==5 | beginning==cat11_start & cat55==5 | beginning==cat11_start & cat56==5 | beginning==cat11_start & cat57==5 | beginning==cat11_start & cat58==5 | beginning==cat11_start & cat59==5 | beginning==cat11_start & cat60==5 | beginning==cat11_start & cat61==5 | beginning==cat11_start & cat62==5 | beginning==cat11_start & cat63==5 | beginning==cat11_start & cat64==5 | beginning==cat11_start & cat65==5 | beginning==cat11_start & cat66==5 | beginning==cat11_start & cat67==5 | beginning==cat11_start & cat68==5 | beginning==cat11_start & cat69==5 | beginning==cat11_start & cat70==5 | beginning==cat11_start & cat71==5 | beginning==cat11_start & cat72==5 | beginning==cat11_start & cat73==5 | beginning==cat11_start & cat74==5 | beginning==cat11_start & cat75==5 | beginning==cat11_start & cat76==5 | beginning==cat11_start & cat77==5 | beginning==cat11_start & cat78==5 | beginning==cat11_start & cat79==5 | beginning==cat11_start & cat80==5 | beginning==cat11_start & cat81==5 | beginning==cat11_start & cat82==5 | beginning==cat11_start & cat83==5 | beginning==cat11_start & cat84==5 | beginning==cat11_start & cat85==5 | beginning==cat11_start & cat86==5 | beginning==cat11_start & cat87==5 | beginning==cat11_start & cat88==5 | beginning==cat11_start & cat89==5 | beginning==cat11_start & cat90==5
replace indicator=1 if beginning==cat11_start & cat12==6 | beginning==cat11_start & cat13==6 | beginning==cat11_start & cat14==6 | beginning==cat11_start & cat15==6 | beginning==cat11_start & cat16==6 | beginning==cat11_start & cat17==6 | beginning==cat11_start & cat18==6 | beginning==cat11_start & cat19==6 | beginning==cat11_start & cat20==6 | beginning==cat11_start & cat21==6 | beginning==cat11_start & cat22==6 | beginning==cat11_start & cat23==6 | beginning==cat11_start & cat24==6 | beginning==cat11_start & cat25==6 | beginning==cat11_start & cat26==6 | beginning==cat11_start & cat27==6 | beginning==cat11_start & cat28==6 | beginning==cat11_start & cat29==6 | beginning==cat11_start & cat30==6 | beginning==cat11_start & cat31==6 | beginning==cat11_start & cat32==6 | beginning==cat11_start & cat33==6 | beginning==cat11_start & cat34==6 | beginning==cat11_start & cat35==6 | beginning==cat11_start & cat36==6 | beginning==cat11_start & cat37==6 | beginning==cat11_start & cat38==6 | beginning==cat11_start & cat39==6 | beginning==cat11_start & cat40==6 | beginning==cat11_start & cat41==6 | beginning==cat11_start & cat42==6 | beginning==cat11_start & cat43==6 | beginning==cat11_start & cat44==6 | beginning==cat11_start & cat45==6 | beginning==cat11_start & cat46==6 | beginning==cat11_start & cat47==6 | beginning==cat11_start & cat48==6 | beginning==cat11_start & cat49==6 | beginning==cat11_start & cat50==6 | beginning==cat11_start & cat51==6 | beginning==cat11_start & cat52==6 | beginning==cat11_start & cat53==6 | beginning==cat11_start & cat54==6 | beginning==cat11_start & cat55==6 | beginning==cat11_start & cat56==6 | beginning==cat11_start & cat57==6 | beginning==cat11_start & cat58==6 | beginning==cat11_start & cat59==6 | beginning==cat11_start & cat60==6 | beginning==cat11_start & cat61==6 | beginning==cat11_start & cat62==6 | beginning==cat11_start & cat63==6 | beginning==cat11_start & cat64==6 | beginning==cat11_start & cat65==6 | beginning==cat11_start & cat66==6 | beginning==cat11_start & cat67==6 | beginning==cat11_start & cat68==6 | beginning==cat11_start & cat69==6 | beginning==cat11_start & cat70==6 | beginning==cat11_start & cat71==6 | beginning==cat11_start & cat72==6 | beginning==cat11_start & cat73==6 | beginning==cat11_start & cat74==6 | beginning==cat11_start & cat75==6 | beginning==cat11_start & cat76==6 | beginning==cat11_start & cat77==6 | beginning==cat11_start & cat78==6 | beginning==cat11_start & cat79==6 | beginning==cat11_start & cat80==6 | beginning==cat11_start & cat81==6 | beginning==cat11_start & cat82==6 | beginning==cat11_start & cat83==6 | beginning==cat11_start & cat84==6 | beginning==cat11_start & cat85==6 | beginning==cat11_start & cat86==6 | beginning==cat11_start & cat87==6 | beginning==cat11_start & cat88==6 | beginning==cat11_start & cat89==6 | beginning==cat11_start & cat90==6
replace indicator=0 if beginning==cat11_start & indicator==.
replace indicator=1 if beginning==cat12_start & cat13==5 | beginning==cat12_start & cat14==5 | beginning==cat12_start & cat15==5 | beginning==cat12_start & cat16==5 | beginning==cat12_start & cat17==5 | beginning==cat12_start & cat18==5 | beginning==cat12_start & cat19==5 | beginning==cat12_start & cat20==5 | beginning==cat12_start & cat21==5 | beginning==cat12_start & cat22==5 | beginning==cat12_start & cat23==5 | beginning==cat12_start & cat24==5 | beginning==cat12_start & cat25==5 | beginning==cat12_start & cat26==5 | beginning==cat12_start & cat27==5 | beginning==cat12_start & cat28==5 | beginning==cat12_start & cat29==5 | beginning==cat12_start & cat30==5 | beginning==cat12_start & cat31==5 | beginning==cat12_start & cat32==5 | beginning==cat12_start & cat33==5 | beginning==cat12_start & cat34==5 | beginning==cat12_start & cat35==5 | beginning==cat12_start & cat36==5 | beginning==cat12_start & cat37==5 | beginning==cat12_start & cat38==5 | beginning==cat12_start & cat39==5 | beginning==cat12_start & cat40==5 | beginning==cat12_start & cat41==5 | beginning==cat12_start & cat42==5 | beginning==cat12_start & cat43==5 | beginning==cat12_start & cat44==5 | beginning==cat12_start & cat45==5 | beginning==cat12_start & cat46==5 | beginning==cat12_start & cat47==5 | beginning==cat12_start & cat48==5 | beginning==cat12_start & cat49==5 | beginning==cat12_start & cat50==5 | beginning==cat12_start & cat51==5 | beginning==cat12_start & cat52==5 | beginning==cat12_start & cat53==5 | beginning==cat12_start & cat54==5 | beginning==cat12_start & cat55==5 | beginning==cat12_start & cat56==5 | beginning==cat12_start & cat57==5 | beginning==cat12_start & cat58==5 | beginning==cat12_start & cat59==5 | beginning==cat12_start & cat60==5 | beginning==cat12_start & cat61==5 | beginning==cat12_start & cat62==5 | beginning==cat12_start & cat63==5 | beginning==cat12_start & cat64==5 | beginning==cat12_start & cat65==5 | beginning==cat12_start & cat66==5 | beginning==cat12_start & cat67==5 | beginning==cat12_start & cat68==5 | beginning==cat12_start & cat69==5 | beginning==cat12_start & cat70==5 | beginning==cat12_start & cat71==5 | beginning==cat12_start & cat72==5 | beginning==cat12_start & cat73==5 | beginning==cat12_start & cat74==5 | beginning==cat12_start & cat75==5 | beginning==cat12_start & cat76==5 | beginning==cat12_start & cat77==5 | beginning==cat12_start & cat78==5 | beginning==cat12_start & cat79==5 | beginning==cat12_start & cat80==5 | beginning==cat12_start & cat81==5 | beginning==cat12_start & cat82==5 | beginning==cat12_start & cat83==5 | beginning==cat12_start & cat84==5 | beginning==cat12_start & cat85==5 | beginning==cat12_start & cat86==5 | beginning==cat12_start & cat87==5 | beginning==cat12_start & cat88==5 | beginning==cat12_start & cat89==5 | beginning==cat12_start & cat90==5
replace indicator=1 if beginning==cat12_start & cat13==6 | beginning==cat12_start & cat14==6 | beginning==cat12_start & cat15==6 | beginning==cat12_start & cat16==6 | beginning==cat12_start & cat17==6 | beginning==cat12_start & cat18==6 | beginning==cat12_start & cat19==6 | beginning==cat12_start & cat20==6 | beginning==cat12_start & cat21==6 | beginning==cat12_start & cat22==6 | beginning==cat12_start & cat23==6 | beginning==cat12_start & cat24==6 | beginning==cat12_start & cat25==6 | beginning==cat12_start & cat26==6 | beginning==cat12_start & cat27==6 | beginning==cat12_start & cat28==6 | beginning==cat12_start & cat29==6 | beginning==cat12_start & cat30==6 | beginning==cat12_start & cat31==6 | beginning==cat12_start & cat32==6 | beginning==cat12_start & cat33==6 | beginning==cat12_start & cat34==6 | beginning==cat12_start & cat35==6 | beginning==cat12_start & cat36==6 | beginning==cat12_start & cat37==6 | beginning==cat12_start & cat38==6 | beginning==cat12_start & cat39==6 | beginning==cat12_start & cat40==6 | beginning==cat12_start & cat41==6 | beginning==cat12_start & cat42==6 | beginning==cat12_start & cat43==6 | beginning==cat12_start & cat44==6 | beginning==cat12_start & cat45==6 | beginning==cat12_start & cat46==6 | beginning==cat12_start & cat47==6 | beginning==cat12_start & cat48==6 | beginning==cat12_start & cat49==6 | beginning==cat12_start & cat50==6 | beginning==cat12_start & cat51==6 | beginning==cat12_start & cat52==6 | beginning==cat12_start & cat53==6 | beginning==cat12_start & cat54==6 | beginning==cat12_start & cat55==6 | beginning==cat12_start & cat56==6 | beginning==cat12_start & cat57==6 | beginning==cat12_start & cat58==6 | beginning==cat12_start & cat59==6 | beginning==cat12_start & cat60==6 | beginning==cat12_start & cat61==6 | beginning==cat12_start & cat62==6 | beginning==cat12_start & cat63==6 | beginning==cat12_start & cat64==6 | beginning==cat12_start & cat65==6 | beginning==cat12_start & cat66==6 | beginning==cat12_start & cat67==6 | beginning==cat12_start & cat68==6 | beginning==cat12_start & cat69==6 | beginning==cat12_start & cat70==6 | beginning==cat12_start & cat71==6 | beginning==cat12_start & cat72==6 | beginning==cat12_start & cat73==6 | beginning==cat12_start & cat74==6 | beginning==cat12_start & cat75==6 | beginning==cat12_start & cat76==6 | beginning==cat12_start & cat77==6 | beginning==cat12_start & cat78==6 | beginning==cat12_start & cat79==6 | beginning==cat12_start & cat80==6 | beginning==cat12_start & cat81==6 | beginning==cat12_start & cat82==6 | beginning==cat12_start & cat83==6 | beginning==cat12_start & cat84==6 | beginning==cat12_start & cat85==6 | beginning==cat12_start & cat86==6 | beginning==cat12_start & cat87==6 | beginning==cat12_start & cat88==6 | beginning==cat12_start & cat89==6 | beginning==cat12_start & cat90==6
replace indicator=0 if beginning==cat12_start & indicator==.
replace indicator=0 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat26_start & cat27==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat24_start & cat25==.
replace indicator=0 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat25_start & cat26==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat23_start & cat24==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat29_start & cat30==.
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace indicator=1 if beginning==cat27_start & cat28==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace indicator=1 if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35==5
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5
* Drop individuals that are not in the risk set
tab indicator,m
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat3_start if beginning==cat2_start & cat3==6
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==5
replace beginning2=cat4_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4==6
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat14_start if beginning==cat2_start & cat3!=5 & cat3!=6 & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==5
replace beginning2=cat4_start if beginning==cat3_start & cat4==6
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==5
replace beginning2=cat5_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5==6
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat20_start if beginning==cat3_start & cat4!=5 & cat4!=6 & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=6 & cat15!=5 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==5
replace beginning2=cat5_start if beginning==cat4_start & cat5==6
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==5
replace beginning2=cat6_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6==6
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat14_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat4_start & cat5!=5 & cat5!=6 & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat6_start if beginning==cat5_start & cat6==5
replace beginning2=cat6_start if beginning==cat5_start & cat6==6
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==5
replace beginning2=cat7_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7==6
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat32_start if beginning==cat5_start & cat6!=5 & cat6!=6 & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==5
replace beginning2=cat7_start if beginning==cat6_start & cat7==6
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==5
replace beginning2=cat8_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8==6
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat17_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=6 & cat13!=5 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat8_start if beginning==cat7_start & cat8==5
replace beginning2=cat8_start if beginning==cat7_start & cat8==6
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==5
replace beginning2=cat9_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9==6
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==5
replace beginning2=cat9_start if beginning==cat8_start & cat9==6
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==5
replace beginning2=cat10_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10==6
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat16_start if beginning==cat8_start & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat10_start if beginning==cat9_start & cat10==5
replace beginning2=cat10_start if beginning==cat9_start & cat10==6
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==5
replace beginning2=cat11_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11==6
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat15_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat11_start if beginning==cat10_start & cat11==5
replace beginning2=cat11_start if beginning==cat10_start & cat11==6
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==5
replace beginning2=cat12_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat16_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat12_start if beginning==cat11_start & cat12==5
replace beginning2=cat12_start if beginning==cat11_start & cat12==6
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat13_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat13_start if beginning==cat12_start & cat13==5
replace beginning2=cat13_start if beginning==cat12_start & cat13==6
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat34_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==6
replace beginning2=cat24_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat27_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat28_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat37_start if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==6
replace beginning2=cat25_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat35_start if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/70 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=2 if beginning==cat1_start & cat2==2
replace event=3 if beginning==cat1_start & cat2==3
replace event=4 if beginning==cat1_start & cat2==4
replace event=5 if beginning==cat1_start & cat1==6 & cat2==5
replace event=6 if beginning==cat1_start & cat1==5 & cat2==6
replace event=7 if beginning==cat1_start & cat2==7
replace event=8 if beginning==cat1_start & cat2==8
replace event=9 if beginning==cat1_start & cat2==9
replace event=10 if beginning==cat1_start & cat2==10
replace event=0 if beginning==cat1_start & cat2==.
replace event=1 if beginning==cat2_start & cat3==1
replace event=2 if beginning==cat2_start & cat3==2
replace event=3 if beginning==cat2_start & cat3==3
replace event=4 if beginning==cat2_start & cat3==4
replace event=5 if beginning==cat2_start & cat2==6 & cat3==5
replace event=6 if beginning==cat2_start & cat2==5 & cat3==6
replace event=7 if beginning==cat2_start & cat3==7
replace event=8 if beginning==cat2_start & cat3==8
replace event=9 if beginning==cat2_start & cat3==9
replace event=10 if beginning==cat2_start & cat3==10
replace event=0 if beginning==cat2_start & cat3==.
replace event=1 if beginning==cat3_start & cat4==1
replace event=2 if beginning==cat3_start & cat4==2
replace event=3 if beginning==cat3_start & cat4==3
replace event=4 if beginning==cat3_start & cat4==4
replace event=5 if beginning==cat3_start & cat3==6 & cat4==5
replace event=6 if beginning==cat3_start & cat3==5 & cat4==6
replace event=7 if beginning==cat3_start & cat4==7
replace event=8 if beginning==cat3_start & cat4==8
replace event=9 if beginning==cat3_start & cat4==9
replace event=10 if beginning==cat3_start & cat4==10
replace event=0 if beginning==cat3_start & cat4==.
replace event=1 if beginning==cat4_start & cat5==1
replace event=2 if beginning==cat4_start & cat5==2
replace event=3 if beginning==cat4_start & cat5==3
replace event=4 if beginning==cat4_start & cat5==4
replace event=5 if beginning==cat4_start & cat4==6 & cat5==5
replace event=6 if beginning==cat4_start & cat4==5 & cat5==6
replace event=7 if beginning==cat4_start & cat5==7
replace event=8 if beginning==cat4_start & cat5==8
replace event=9 if beginning==cat4_start & cat5==9
replace event=10 if beginning==cat4_start & cat5==10
replace event=0 if beginning==cat4_start & cat5==.
replace event=1 if beginning==cat5_start & cat6==1
replace event=2 if beginning==cat5_start & cat6==2
replace event=3 if beginning==cat5_start & cat6==3
replace event=4 if beginning==cat5_start & cat6==4
replace event=5 if beginning==cat5_start & cat5==6 & cat6==5
replace event=6 if beginning==cat5_start & cat5==5 & cat6==6
replace event=7 if beginning==cat5_start & cat6==7
replace event=8 if beginning==cat5_start & cat6==8
replace event=9 if beginning==cat5_start & cat6==9
replace event=10 if beginning==cat5_start & cat6==10
replace event=0 if beginning==cat5_start & cat6==.
replace event=1 if beginning==cat6_start & cat7==1
replace event=2 if beginning==cat6_start & cat7==2
replace event=3 if beginning==cat6_start & cat7==3
replace event=4 if beginning==cat6_start & cat7==4
replace event=5 if beginning==cat6_start & cat6==6 & cat7==5
replace event=6 if beginning==cat6_start & cat6==5 & cat7==6
replace event=7 if beginning==cat6_start & cat7==7
replace event=8 if beginning==cat6_start & cat7==8
replace event=9 if beginning==cat6_start & cat7==9
replace event=10 if beginning==cat6_start & cat7==10
replace event=0 if beginning==cat6_start & cat7==.
replace event=1 if beginning==cat7_start & cat8==1
replace event=2 if beginning==cat7_start & cat8==2
replace event=3 if beginning==cat7_start & cat8==3
replace event=4 if beginning==cat7_start & cat8==4
replace event=5 if beginning==cat7_start & cat7==6 & cat8==5
replace event=6 if beginning==cat7_start & cat7==5 & cat8==6
replace event=7 if beginning==cat7_start & cat8==7
replace event=8 if beginning==cat7_start & cat8==8
replace event=9 if beginning==cat7_start & cat8==9
replace event=10 if beginning==cat7_start & cat8==10
replace event=0 if beginning==cat7_start & cat8==.
replace event=1 if beginning==cat8_start & cat9==1
replace event=2 if beginning==cat8_start & cat9==2
replace event=3 if beginning==cat8_start & cat9==3
replace event=4 if beginning==cat8_start & cat9==4
replace event=5 if beginning==cat8_start & cat8==6 & cat9==5
replace event=6 if beginning==cat8_start & cat8==5 & cat9==6
replace event=7 if beginning==cat8_start & cat9==7
replace event=8 if beginning==cat8_start & cat9==8
replace event=9 if beginning==cat8_start & cat9==9
replace event=10 if beginning==cat8_start & cat9==10
replace event=0 if beginning==cat8_start & cat9==.
replace event=1 if beginning==cat9_start & cat10==1
replace event=2 if beginning==cat9_start & cat10==2 
replace event=3 if beginning==cat9_start & cat10==3
replace event=4 if beginning==cat9_start & cat10==4 
replace event=5 if beginning==cat9_start & cat9==6 & cat10==5
replace event=6 if beginning==cat9_start & cat9==5 & cat10==6 
replace event=7 if beginning==cat9_start & cat10==7 
replace event=8 if beginning==cat9_start & cat10==8 
replace event=9 if beginning==cat9_start & cat10==9 
replace event=10 if beginning==cat9_start & cat10==10 
replace event=0 if beginning==cat9_start & cat10==.
replace event=1 if beginning==cat10_start & cat11==1
replace event=2 if beginning==cat10_start & cat11==2
replace event=3 if beginning==cat10_start & cat11==3
replace event=4 if beginning==cat10_start & cat11==4
replace event=5 if beginning==cat10_start & cat10==6 & cat11==5
replace event=6 if beginning==cat10_start & cat10==5 & cat11==6
replace event=7 if beginning==cat10_start & cat11==7
replace event=8 if beginning==cat10_start & cat11==8
replace event=9 if beginning==cat10_start & cat11==9
replace event=10 if beginning==cat10_start & cat11==10
replace event=0 if beginning==cat10_start & cat11==.
replace event=1 if beginning==cat11_start & cat12==1
replace event=2 if beginning==cat11_start & cat12==2
replace event=3 if beginning==cat11_start & cat12==3
replace event=4 if beginning==cat11_start & cat12==4
replace event=5 if beginning==cat11_start & cat11==6 & cat12==5
replace event=6 if beginning==cat11_start & cat11==5 & cat12==6
replace event=7 if beginning==cat11_start & cat12==7
replace event=8 if beginning==cat11_start & cat12==8
replace event=9 if beginning==cat11_start & cat12==9
replace event=10 if beginning==cat11_start & cat12==10
replace event=0 if beginning==cat11_start & cat12==.
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=0 if beginning==cat23_start & cat24==.
replace event=6 if beginning==cat20_start & cat20==5 & cat21==6
replace event=9 if beginning==cat29_start & cat30==9
replace event=7 if beginning==cat20_start & cat21==7
replace event=3 if beginning==cat24_start & cat25==3
replace event=5 if beginning==cat20_start & cat20==6 & cat21==5
replace event=5 if beginning==cat21_start & cat21==6 & cat22==5
replace event=3 if beginning==cat30_start & cat31==3
replace event=10 if beginning==cat26_start & cat27==10
replace event=1 if beginning==cat22_start & cat23==1
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat25_start & cat26==9
replace event=8 if beginning==cat22_start & cat23==8
replace event=2 if beginning==cat23_start & cat24==2
replace event=5 if beginning==cat22_start & cat22==6 & cat23==5
replace event=1 if beginning==cat21_start & cat22==1
replace event=6 if beginning==cat21_start & cat21==5 & cat22==6
replace event=1 if beginning==cat23_start & cat24==1
replace event=9 if beginning==cat37_start & cat38==9
replace event=4 if beginning==cat24_start & cat25==4
replace event=4 if beginning==cat23_start & cat24==4
replace event=3 if beginning==cat26_start & cat27==3
replace event=7 if beginning==cat23_start & cat24==7
replace event=9 if beginning==cat28_start & cat29==9
replace event=6 if beginning==cat24_start & cat24==5 & cat25==6
replace event=2 if beginning==cat24_start & cat25==2
replace event=10 if beginning==cat35_start & cat36==10
replace event=6 if beginning==cat23_start & cat23==5 & cat24==6
replace event=4 if beginning==cat29_start & cat30==4

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==2
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==3
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==4
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==6 & cat2==5
replace duration = cat2_start - beginning if beginning==cat1_start & cat1==5 & cat2==6
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==7
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==8
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==9
replace duration = cat2_start - beginning if beginning==cat1_start & cat2==10
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==1
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==2
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==3
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==4
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==5 & cat3==6
replace duration = cat3_start - beginning if beginning==cat2_start & cat2==6 & cat3==5
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==7
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==8
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==9
replace duration = cat3_start - beginning if beginning==cat2_start & cat3==10
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==1
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==2
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==3
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==4
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==6 & cat4==5
replace duration = cat4_start - beginning if beginning==cat3_start & cat3==5 & cat4==6
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==7
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==8
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==9
replace duration = cat4_start - beginning if beginning==cat3_start & cat4==10
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==1
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==2
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==3
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==4
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==6 & cat5==5
replace duration = cat5_start - beginning if beginning==cat4_start & cat4==5 & cat5==6
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==7
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==8
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==9
replace duration = cat5_start - beginning if beginning==cat4_start & cat5==10
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==1
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==2
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==3
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==4
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==6 & cat6==5
replace duration = cat6_start - beginning if beginning==cat5_start & cat5==5 & cat6==6
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==7
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==8
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==9
replace duration = cat6_start - beginning if beginning==cat5_start & cat6==10
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==1
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==2
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==3
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==4
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==6 & cat7==5
replace duration = cat7_start - beginning if beginning==cat6_start & cat6==5 & cat7==6
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==7
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==8
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==9
replace duration = cat7_start - beginning if beginning==cat6_start & cat7==10
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==1
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==2
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==3
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==4
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==6 & cat8==5
replace duration = cat8_start - beginning if beginning==cat7_start & cat7==5 & cat8==6
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==7
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==8
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==9
replace duration = cat8_start - beginning if beginning==cat7_start & cat8==10
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==1
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==2
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==3
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==4
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==6 & cat9==5
replace duration = cat9_start - beginning if beginning==cat8_start & cat8==5 & cat9==6
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==7
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==8
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==9
replace duration = cat9_start - beginning if beginning==cat8_start & cat9==10
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==1
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==2 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==3
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==4 
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==6 & cat10==5
replace duration = cat10_start - beginning if beginning==cat9_start & cat9==5 & cat10==6 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==7 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==8 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==9 
replace duration = cat10_start - beginning if beginning==cat9_start & cat10==10 
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==1
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==2
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==3
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==4
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==6 & cat11==5
replace duration = cat11_start - beginning if beginning==cat10_start & cat10==5 & cat11==6
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==7
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==8
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==9
replace duration = cat11_start - beginning if beginning==cat10_start & cat11==10
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==1
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==2
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==3
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==4
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==6 & cat12==5
replace duration = cat12_start - beginning if beginning==cat11_start & cat11==5 & cat12==6
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==7
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==8
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==9
replace duration = cat12_start - beginning if beginning==cat11_start & cat12==10
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==5 & cat21==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==6 & cat21==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==6 & cat22==5
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==1
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==8
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==6 & cat23==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==1
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==5 & cat22==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==1
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==3
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==7
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==5 & cat25==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==2
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==5 & cat24==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==4

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp11", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =11

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling22 if beginning==cat22_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =3 if beginning==cat32_start & cat31==3
replace previous_occ =9 if beginning==cat37_start & cat36==9
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp11", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp12: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp11"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp12 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat26_start & cat27==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat24_start & cat25==.
replace indicator=0 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat25_start & cat26==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat23_start & cat24==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat29_start & cat30==.
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace indicator=1 if beginning==cat27_start & cat28==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==end
replace indicator=0 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==.
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27==6
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat38_start & cat39==5
replace indicator=1 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace indicator=1 if beginning==cat36_start & cat37!=5 & cat37!=6 & cat38==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==cat30_start & cat31==.
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat34_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==6
replace beginning2=cat24_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat27_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat28_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat37_start if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==6
replace beginning2=cat25_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat25_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat27_start if beginning==cat26_start & cat27==6
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat39_start if beginning==cat38_start & cat39==5
replace beginning2=cat35_start if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace beginning2=cat29_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat27_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat31_start if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace beginning2=cat38_start if beginning==cat36_start & cat37!=5 & cat37!=6 & cat38==5
replace beginning2=cat28_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat28_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=0 if beginning==cat23_start & cat24==.
replace event=6 if beginning==cat20_start & cat20==5 & cat21==6
replace event=9 if beginning==cat29_start & cat30==9
replace event=7 if beginning==cat20_start & cat21==7
replace event=3 if beginning==cat24_start & cat25==3
replace event=5 if beginning==cat20_start & cat20==6 & cat21==5
replace event=5 if beginning==cat21_start & cat21==6 & cat22==5
replace event=3 if beginning==cat30_start & cat31==3
replace event=10 if beginning==cat26_start & cat27==10
replace event=1 if beginning==cat22_start & cat23==1
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat25_start & cat26==9
replace event=8 if beginning==cat22_start & cat23==8
replace event=2 if beginning==cat23_start & cat24==2
replace event=5 if beginning==cat22_start & cat22==6 & cat23==5
replace event=1 if beginning==cat21_start & cat22==1
replace event=6 if beginning==cat21_start & cat21==5 & cat22==6
replace event=1 if beginning==cat23_start & cat24==1
replace event=9 if beginning==cat37_start & cat38==9
replace event=4 if beginning==cat24_start & cat25==4
replace event=4 if beginning==cat23_start & cat24==4
replace event=3 if beginning==cat26_start & cat27==3
replace event=7 if beginning==cat23_start & cat24==7
replace event=9 if beginning==cat28_start & cat29==9
replace event=6 if beginning==cat24_start & cat24==5 & cat25==6
replace event=2 if beginning==cat24_start & cat25==2
replace event=0 if beginning==cat27_start & cat28==.
replace event=0 if beginning==cat26_start & cat27==.
replace event=9 if beginning==cat35_start & cat36==9
replace event=6 if beginning==cat25_start & cat25==5 & cat26==6
replace event=8 if beginning==cat24_start & cat25==8
replace event=7 if beginning==cat24_start & cat25==7
replace event=8 if beginning==cat25_start & cat26==8
replace event=6 if beginning==cat28_start & cat28==5 & cat29==6
replace event=6 if beginning==cat23_start & cat23==5 & cat24==6
replace event=1 if beginning==cat25_start & cat26==1
replace event=9 if beginning==cat39_start & cat40==9
replace event=3 if beginning==cat25_start & cat26==3
replace event=5 if beginning==cat24_start & cat24==6 & cat25==5
replace event=5 if beginning==cat26_start & cat26==6 & cat27==5
replace event=1 if beginning==cat24_start & cat25==1
replace event=9 if beginning==cat31_start & cat32==9
replace event=9 if beginning==cat38_start & cat39==9
replace event=0 if beginning==cat28_start & cat29==.

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==5 & cat21==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==6 & cat21==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==6 & cat22==5
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==1
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==8
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==6 & cat23==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==1
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==5 & cat22==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==1
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==3
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==7
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==5 & cat25==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==2
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat25==5 & cat26==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==8
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==7
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==8
replace duration = cat29_start - beginning if beginning==cat28_start & cat28==5 & cat29==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==5 & cat24==6
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==1
replace duration = cat40_start - beginning if beginning==cat39_start & cat40==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==3
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==6 & cat25==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat26==6 & cat27==5
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==1
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat39_start - beginning if beginning==cat38_start & cat39==9

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp12", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =12

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling25 if beginning==cat25_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =10 if beginning==cat35_start & cat34==10
replace previous_occ =8 if beginning==cat25_start & cat24==8
replace previous_occ =1 if beginning==cat25_start & cat24==1
replace previous_occ =4 if beginning==cat25_start & cat24==4
replace previous_occ =4 if beginning==cat26_start & cat25==4
replace previous_occ =2 if beginning==cat26_start & cat25==2
replace previous_occ =8 if beginning==cat24_start & cat23==8
replace previous_occ =7 if beginning==cat24_start & cat23==7
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =3 if beginning==cat28_start & cat27==3
replace previous_occ =9 if beginning==cat38_start & cat37==9
replace previous_occ =9 if beginning==cat39_start & cat38==9
replace previous_occ =4 if beginning==cat24_start & cat23==4

recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp12", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp13: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp12"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp13 across multiple categories
gen indicator = . // Initialize the variable
replace indicator=1 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat26_start & cat27==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat24_start & cat25==.
replace indicator=0 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat25_start & cat26==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat23_start & cat24==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat29_start & cat30==.
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace indicator=1 if beginning==cat27_start & cat28==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==end
replace indicator=0 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==.
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27==6
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat38_start & cat39==5
replace indicator=1 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace indicator=0 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==.
replace indicator=0 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==.
replace indicator=1 if beginning==cat32_start & cat33==5
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==6
replace indicator=1 if beginning==cat28_start & cat29==5
replace indicator=1 if beginning==cat40_start & cat41==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==6
replace indicator=1 if beginning==cat36_start & cat37!=5 & cat38!=6 & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41!=5 & cat41!=6 & cat42!=5 & cat42!=6 & cat43!=5 & cat43!=6 & cat44!=5 & cat45!=6 & cat46!=5 & cat46!=6 & cat47!=5 & cat47!=6 & cat48!=5 & cat48!=6 & cat49!=5 & cat49!=6 & cat50!=5 & cat50!=6 & cat51!=5 & cat51!=6 & cat52!=5 & cat52!=6 & cat53==6
replace indicator=1 if beginning==cat39_start & cat40==5
replace indicator=1 if beginning==cat31_start & cat32==. & cat33==5
replace indicator=1 if beginning==cat28_start & cat29==6
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==6
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat34_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==6
replace beginning2=cat24_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat27_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat28_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat37_start if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==6
replace beginning2=cat25_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat25_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat27_start if beginning==cat26_start & cat27==6
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat39_start if beginning==cat38_start & cat39==5
replace beginning2=cat35_start if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace beginning2=cat29_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat27_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat31_start if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat30_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==6
replace beginning2=cat29_start if beginning==cat28_start & cat29==5
replace beginning2=cat41_start if beginning==cat40_start & cat41==5
replace beginning2=cat29_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==6
replace beginning2=cat53_start if beginning==cat36_start & cat37!=5 & cat38!=6 & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41!=5 & cat41!=6 & cat42!=5 & cat42!=6 & cat43!=5 & cat43!=6 & cat44!=5 & cat45!=6 & cat46!=5 & cat46!=6 & cat47!=5 & cat47!=6 & cat48!=5 & cat48!=6 & cat49!=5 & cat49!=6 & cat50!=5 & cat50!=6 & cat51!=5 & cat51!=6 & cat52!=5 & cat52!=6 & cat53==6
replace beginning2=cat40_start if beginning==cat39_start & cat40==5
replace beginning2=cat33_start if beginning==cat31_start & cat32==. & cat33==5
replace beginning2=cat29_start if beginning==cat28_start & cat29==6
replace beginning2=cat29_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==6

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=0 if beginning==cat23_start & cat24==.
replace event=6 if beginning==cat20_start & cat20==5 & cat21==6
replace event=9 if beginning==cat29_start & cat30==9
replace event=7 if beginning==cat20_start & cat21==7
replace event=3 if beginning==cat24_start & cat25==3
replace event=5 if beginning==cat20_start & cat20==6 & cat21==5
replace event=5 if beginning==cat21_start & cat21==6 & cat22==5
replace event=3 if beginning==cat30_start & cat31==3
replace event=10 if beginning==cat26_start & cat27==10
replace event=1 if beginning==cat22_start & cat23==1
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat25_start & cat26==9
replace event=8 if beginning==cat22_start & cat23==8
replace event=2 if beginning==cat23_start & cat24==2
replace event=5 if beginning==cat22_start & cat22==6 & cat23==5
replace event=1 if beginning==cat21_start & cat22==1
replace event=6 if beginning==cat21_start & cat21==5 & cat22==6
replace event=1 if beginning==cat23_start & cat24==1
replace event=9 if beginning==cat37_start & cat38==9
replace event=4 if beginning==cat24_start & cat25==4
replace event=4 if beginning==cat23_start & cat24==4
replace event=3 if beginning==cat26_start & cat27==3
replace event=7 if beginning==cat23_start & cat24==7
replace event=9 if beginning==cat28_start & cat29==9
replace event=6 if beginning==cat24_start & cat24==5 & cat25==6
replace event=2 if beginning==cat24_start & cat25==2
replace event=0 if beginning==cat27_start & cat28==.
replace event=0 if beginning==cat26_start & cat27==.
replace event=9 if beginning==cat35_start & cat36==9
replace event=6 if beginning==cat25_start & cat25==5 & cat26==6
replace event=8 if beginning==cat24_start & cat25==8
replace event=7 if beginning==cat24_start & cat25==7
replace event=8 if beginning==cat25_start & cat26==8
replace event=6 if beginning==cat28_start & cat28==5 & cat29==6
replace event=6 if beginning==cat23_start & cat23==5 & cat24==6
replace event=1 if beginning==cat25_start & cat26==1
replace event=9 if beginning==cat39_start & cat40==9
replace event=3 if beginning==cat25_start & cat26==3
replace event=5 if beginning==cat24_start & cat24==6 & cat25==5
replace event=5 if beginning==cat26_start & cat26==6 & cat27==5
replace event=1 if beginning==cat24_start & cat25==1
replace event=9 if beginning==cat31_start & cat32==9
replace event=0 if beginning==cat28_start & cat29==.
replace event=0 if beginning==cat30_start & cat31==.
replace event=0 if beginning==cat33_start & cat34==.
replace event=9 if beginning==cat53_start & cat54==9
replace event=8 if beginning==cat26_start & cat27==8
replace event=7 if beginning==cat26_start & cat27==7
replace event=8 if beginning==cat27_start & cat28==8
replace event=5 if beginning==cat25_start & cat25==6 & cat26==5
replace event=6 if beginning==cat26_start & cat26==5 & cat27==6
replace event=6 if beginning==cat27_start & cat27==5 & cat28==6
replace event=9 if beginning==cat41_start & cat42==9
replace event=7 if beginning==cat32_start & cat33==7
replace event=3 if beginning==cat27_start & cat28==3
replace event=2 if beginning==cat26_start & cat27==2
replace event=9 if beginning==cat40_start & cat41==9
replace event=10 if beginning==cat32_start & cat32==5 & cat33==5 & cat34==10
replace event=10 if beginning==cat33_start & cat34==10
replace event=10 if beginning==cat29_start & cat30==10

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==5 & cat21==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==6 & cat21==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==6 & cat22==5
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==1
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==8
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==6 & cat23==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==1
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==5 & cat22==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==1
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==3
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==7
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==5 & cat25==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==2
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat25==5 & cat26==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==8
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==7
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==8
replace duration = cat29_start - beginning if beginning==cat28_start & cat28==5 & cat29==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==5 & cat24==6
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==1
replace duration = cat40_start - beginning if beginning==cat39_start & cat40==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==3
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==6 & cat25==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat26==6 & cat27==5
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==1
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat54_start - beginning if beginning==cat53_start & cat54==9
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==7
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==8
replace duration = cat26_start - beginning if beginning==cat25_start & cat25==6 & cat26==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat26==5 & cat27==6
replace duration = cat28_start - beginning if beginning==cat27_start & cat27==5 & cat28==6
replace duration = cat42_start - beginning if beginning==cat41_start & cat42==9
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==7
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==2
replace duration = cat41_start - beginning if beginning==cat40_start & cat41==9
replace duration = cat34_start - beginning if beginning==cat32_start & cat32==5 & cat33==5 & cat34==10
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==10
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp13", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =13

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling30 if beginning==cat30_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =9 if beginning==cat29_start & cat28==9
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =9 if beginning==cat30_start & cat29==9
replace previous_occ =8 if beginning==cat26_start & cat25==8
replace previous_occ =7 if beginning==cat26_start & cat25==7
replace previous_occ =0 if beginning==cat26_start & cat26==6 & cat25==5
replace previous_occ =8 if beginning==cat25_start & cat24==8
replace previous_occ =3 if beginning==cat25_start & cat24==3
replace previous_occ =10 if beginning==cat53_start & cat52==10
replace previous_occ =8 if beginning==cat27_start & cat26==8
replace previous_occ =4 if beginning==cat27_start & cat26==4
replace previous_occ =3 if beginning==cat27_start & cat26==3
replace previous_occ =2 if beginning==cat27_start & cat26==2
replace previous_occ =0 if beginning==cat27_start & cat27==5 & cat26==6
replace previous_occ =9 if beginning==cat40_start & cat39==9
replace previous_occ =10 if beginning==cat33_start & cat32==. & cat31==10
replace previous_occ =9 if beginning==cat33_start & cat32==9
replace previous_occ =9 if beginning==cat41_start & cat40==9
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp13", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp14: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp13"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp14 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat14_start & cat15==6
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace indicator=1 if beginning==cat13_start & cat14==6
replace indicator=1 if beginning==cat13_start & cat14==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat19_start & cat20==6
replace indicator=0 if beginning==cat18_start & cat19==.
replace indicator=1 if beginning==cat24_start & cat25==6
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat15_start & cat16==5
replace indicator=0 if beginning==cat15_start & cat16==.
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==.
replace indicator=1 if beginning==cat18_start & cat19==5
replace indicator=1 if beginning==cat21_start & cat22==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat16_start & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace indicator=0 if beginning==cat17_start & cat18==.
replace indicator=1 if beginning==cat17_start & cat18==5
replace indicator=0 if beginning==cat35_start & cat36==.
replace indicator=0 if beginning==cat19_start & cat20==.
replace indicator=1 if beginning==cat16_start & cat17==6
replace indicator=1 if beginning==cat27_start & cat28==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==.
replace indicator=1 if beginning==cat15_start & cat16==6
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat17_start & cat18==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=0 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==.
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=0 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=1 if beginning==cat19_start & cat20==5
replace indicator=1 if beginning==cat18_start & cat19==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=0 if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==.
replace indicator=0 if beginning==cat20_start & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat20_start & cat21==6
replace indicator=1 if beginning==cat20_start & cat21==5
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat24_start & cat25==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace indicator=0 if beginning==cat22_start & cat23==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==.
replace indicator=0 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=1 if beginning==cat26_start & cat27==5
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace indicator=1 if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace indicator=1 if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat23_start & cat24==5
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==.
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==.
replace indicator=0 if beginning==cat23_start & cat24==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==.
replace indicator=0 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==.
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace indicator=1 if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat22_start & cat23==5
replace indicator=1 if beginning==cat21_start & cat22==6
replace indicator=1 if beginning==cat22_start & cat23==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace indicator=1 if beginning==cat25_start & cat26==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace indicator=0 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==.
replace indicator=0 if beginning==cat26_start & cat27==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat24_start & cat25==.
replace indicator=0 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==.
replace indicator=0 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==.
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat25_start & cat26==6
replace indicator=1 if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace indicator=1 if beginning==cat23_start & cat24==6
replace indicator=1 if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==cat25_start & cat26==.
replace indicator=0 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==.
replace indicator=0 if beginning==cat29_start & cat30==.
replace indicator=1 if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace indicator=1 if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace indicator=1 if beginning==cat27_start & cat28==6
replace indicator=1 if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace indicator=0 if beginning==end
replace indicator=0 if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==.
replace indicator=0 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==.
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace indicator=1 if beginning==cat26_start & cat27==6
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace indicator=1 if beginning==cat38_start & cat39==5
replace indicator=1 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace indicator=1 if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace indicator=1 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace indicator=0 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==.
replace indicator=0 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==.
replace indicator=1 if beginning==cat32_start & cat33==5
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==6
replace indicator=1 if beginning==cat28_start & cat29==5
replace indicator=1 if beginning==cat40_start & cat41==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==6
replace indicator=1 if beginning==cat36_start & cat37!=5 & cat38!=6 & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41!=5 & cat41!=6 & cat42!=5 & cat42!=6 & cat43!=5 & cat43!=6 & cat44!=5 & cat45!=6 & cat46!=5 & cat46!=6 & cat47!=5 & cat47!=6 & cat48!=5 & cat48!=6 & cat49!=5 & cat49!=6 & cat50!=5 & cat50!=6 & cat51!=5 & cat51!=6 & cat52!=5 & cat52!=6 & cat53==6
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=0 if beginning==cat42_start & cat43==.
replace indicator=0 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35!=5 & cat35!=6 & cat36==.
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35!=5 & cat36!=6 & cat37==5
replace indicator=1 if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==6
replace indicator=1 if beginning==cat30_start & cat31==5
replace indicator=1 if beginning==cat28_start & cat29==6
replace indicator=1 if beginning==cat54_start & cat55!=5 & cat55!=6 & cat56==6
replace indicator=1 if beginning==cat29_start & cat30==6
replace indicator=1 if beginning==cat31_start & cat32==6
replace indicator=1 if beginning==cat41_start & cat42==5
replace indicator=1 if beginning==cat34_start & cat35==5
replace indicator=0 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==.
replace indicator=0 if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30!=6 & cat30!=5 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=1 if beginning==cat30_start & cat31==6
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33==5
replace indicator=1 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==5
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==5
replace beginning2=cat14_start if beginning==cat13_start & cat14==6
replace beginning2=cat15_start if beginning==cat14_start & cat15==5
replace beginning2=cat15_start if beginning==cat14_start & cat15==6
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat17_start if beginning==cat16_start & cat17==5
replace beginning2=cat17_start if beginning==cat16_start & cat17==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==6
replace beginning2=cat25_start if beginning==cat24_start & cat25==6
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==5
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat12_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12==6
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==5
replace beginning2=cat13_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13==6
replace beginning2=cat14_start if beginning==cat6_start & cat7!=5 & cat7!=6 & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat17_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat19_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat18_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat26_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat14_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat14_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat15_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat15_start if beginning==cat7_start & cat8!=5 & cat8!=6 & cat9!=5 & cat9!=6 & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat14_start if beginning==cat10_start & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14==5
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat15_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15==5
replace beginning2=cat17_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat16_start if beginning==cat13_start & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat16_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16==6
replace beginning2=cat18_start if beginning==cat17_start & cat18==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==5
replace beginning2=cat16_start if beginning==cat15_start & cat16==6
replace beginning2=cat16_start if beginning==cat9_start & cat10!=5 & cat10!=6 & cat11!=5 & cat11!=6 & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat15_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat15_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15==6
replace beginning2=cat16_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16==5
replace beginning2=cat17_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat18_start if beginning==cat17_start & cat18==6
replace beginning2=cat19_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat19_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat22_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat20_start if beginning==cat19_start & cat20==5
replace beginning2=cat19_start if beginning==cat18_start & cat19==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat18_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat11_start & cat12!=5 & cat12!=6 & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat21_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat19_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==5
replace beginning2=cat17_start if beginning==cat12_start & cat13!=5 & cat13!=6 & cat14!=5 & cat14!=6 & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat21_start if beginning==cat20_start & cat21==6
replace beginning2=cat21_start if beginning==cat20_start & cat21==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat25_start if beginning==cat24_start & cat25==5
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==6
replace beginning2=cat17_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat20_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==5
replace beginning2=cat18_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat19_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19==6
replace beginning2=cat27_start if beginning==cat26_start & cat27==5
replace beginning2=cat23_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat18_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==6
replace beginning2=cat22_start if beginning==cat15_start & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat21_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==6
replace beginning2=cat20_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat20_start if beginning==cat18_start & cat19!=6 & cat19!=5 & cat20==5
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat21_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21==5
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat27_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat18_start if beginning==cat14_start & cat15!=5 & cat15!=6 & cat16!=5 & cat16!=6 & cat17!=5 & cat17!=6 & cat18==5
replace beginning2=cat23_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==5
replace beginning2=cat22_start if beginning==cat20_start & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==5
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==6
replace beginning2=cat22_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat22_start if beginning==cat17_start & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat20_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20==6
replace beginning2=cat24_start if beginning==cat16_start & cat17!=5 & cat17!=6 & cat18!=5 & cat18!=6 & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==5
replace beginning2=cat22_start if beginning==cat21_start & cat22==6
replace beginning2=cat23_start if beginning==cat22_start & cat23==6
replace beginning2=cat22_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat23_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23==6
replace beginning2=cat34_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat26_start if beginning==cat25_start & cat26==6
replace beginning2=cat21_start if beginning==cat18_start & cat19!=5 & cat19!=6 & cat20!=5 & cat20!=6 & cat21==6
replace beginning2=cat24_start if beginning==cat23_start & cat24==6
replace beginning2=cat24_start if beginning==cat19_start & cat20!=5 & cat20!=6 & cat21!=5 & cat21!=6 & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat27_start if beginning==cat25_start & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat28_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat26_start if beginning==cat24_start & cat25!=5 & cat25!=6 & cat26==5
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat24_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24==5
replace beginning2=cat37_start if beginning==cat35_start & cat36!=5 & cat36!=6 & cat37==5
replace beginning2=cat28_start if beginning==cat27_start & cat28==6
replace beginning2=cat25_start if beginning==cat21_start & cat22!=5 & cat22!=6 & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==5
replace beginning2=cat25_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25==5
replace beginning2=cat27_start if beginning==cat26_start & cat27==6
replace beginning2=cat24_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24==6
replace beginning2=cat39_start if beginning==cat38_start & cat39==5
replace beginning2=cat35_start if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace beginning2=cat25_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25==6
replace beginning2=cat29_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat26_start if beginning==cat22_start & cat23!=5 & cat23!=6 & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26==6
replace beginning2=cat27_start if beginning==cat23_start & cat24!=5 & cat24!=6 & cat25!=5 & cat25!=6 & cat26!=5 & cat26!=6 & cat27==5
replace beginning2=cat31_start if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==5
replace beginning2=cat29_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat30_start if beginning==cat27_start & cat28!=5 & cat28!=6 & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat28_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28==6
replace beginning2=cat29_start if beginning==cat28_start & cat29==5
replace beginning2=cat41_start if beginning==cat40_start & cat41==5
replace beginning2=cat29_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==6
replace beginning2=cat53_start if beginning==cat36_start & cat37!=5 & cat38!=6 & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41!=5 & cat41!=6 & cat42!=5 & cat42!=6 & cat43!=5 & cat43!=6 & cat44!=5 & cat45!=6 & cat46!=5 & cat46!=6 & cat47!=5 & cat47!=6 & cat48!=5 & cat48!=6 & cat49!=5 & cat49!=6 & cat50!=5 & cat50!=6 & cat51!=5 & cat51!=6 & cat52!=5 & cat52!=6 & cat53==6
replace beginning2=cat37_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35!=5 & cat36!=6 & cat37==5
replace beginning2=cat29_start if beginning==cat26_start & cat27!=5 & cat27!=6 & cat28!=5 & cat28!=6 & cat29==6
replace beginning2=cat31_start if beginning==cat30_start & cat31==5
replace beginning2=cat29_start if beginning==cat28_start & cat29==6
replace beginning2=cat56_start if beginning==cat54_start & cat55!=5 & cat55!=6 & cat56==6
replace beginning2=cat30_start if beginning==cat29_start & cat30==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==6
replace beginning2=cat42_start if beginning==cat41_start & cat42==5
replace beginning2=cat35_start if beginning==cat34_start & cat35==5
replace beginning2=cat31_start if beginning==cat30_start & cat31==6
replace beginning2=cat33_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33==5
replace beginning2=cat35_start if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==5
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=1 if beginning==cat12_start & cat13==1
replace event=2 if beginning==cat12_start & cat13==2
replace event=3 if beginning==cat12_start & cat13==3
replace event=4 if beginning==cat12_start & cat13==4
replace event=5 if beginning==cat12_start & cat12==6 & cat13==5
replace event=6 if beginning==cat12_start & cat12==5 & cat13==6
replace event=7 if beginning==cat12_start & cat13==7
replace event=8 if beginning==cat12_start & cat13==8
replace event=9 if beginning==cat12_start & cat13==9
replace event=10 if beginning==cat12_start & cat13==10
replace event=0 if beginning==cat12_start & cat13==.
replace event=1 if beginning==cat13_start & cat14==1
replace event=2 if beginning==cat13_start & cat14==2
replace event=3 if beginning==cat13_start & cat14==3
replace event=4 if beginning==cat13_start & cat14==4
replace event=5 if beginning==cat13_start & cat13==6 & cat14==5
replace event=6 if beginning==cat13_start & cat13==5 & cat14==6
replace event=7 if beginning==cat13_start & cat14==7
replace event=8 if beginning==cat13_start & cat14==8
replace event=9 if beginning==cat13_start & cat14==9
replace event=10 if beginning==cat13_start & cat14==10
replace event=0 if beginning==cat13_start & cat14==.
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat23_start & cat24==10
replace event=0 if beginning==cat21_start & cat22==.
replace event=10 if beginning==cat28_start & cat29==10
replace event=9 if beginning==cat14_start & cat15==9
replace event=0 if beginning==cat25_start & cat26==.
replace event=4 if beginning==cat14_start & cat15==4
replace event=0 if beginning==cat15_start & cat16==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat14_start & cat15==10
replace event=10 if beginning==cat17_start & cat18==10
replace event=9 if beginning==cat16_start & cat17==9
replace event=9 if beginning==cat15_start & cat16==9
replace event=5 if beginning==cat14_start & cat15==5 & cat14==6
replace event=0 if beginning==cat14_start & cat15==.
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=0 if beginning==cat19_start & cat20==.
replace event=10 if beginning==cat22_start & cat23==10
replace event=10 if beginning==cat19_start & cat20==10
replace event=0 if beginning==cat17_start & cat18==.
replace event=8 if beginning==cat16_start & cat17==8
replace event=8 if beginning==cat14_start & cat15==8
replace event=3 if beginning==cat16_start & cat17==3
replace event=10 if beginning==cat16_start & cat17==10
replace event=3 if beginning==cat15_start & cat16==3
replace event=2 if beginning==cat14_start & cat15==2
replace event=3 if beginning==cat17_start & cat18==3
replace event=10 if beginning==cat34_start & cat35==10
replace event=2 if beginning==cat15_start & cat16==2
replace event=4 if beginning==cat18_start & cat19==4
replace event=3 if beginning==cat14_start & cat15==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=9 if beginning==cat26_start & cat27==9
replace event=4 if beginning==cat17_start & cat18==4
replace event=1 if beginning==cat14_start & cat15==1
replace event=1 if beginning==cat15_start & cat16==1
replace event=2 if beginning==cat15_start & cat16==2
replace event=3 if beginning==cat15_start & cat16==3
replace event=4 if beginning==cat15_start & cat16==4
replace event=5 if beginning==cat15_start & cat15==6 & cat16==5
replace event=6 if beginning==cat15_start & cat15==5 & cat16==6
replace event=7 if beginning==cat15_start & cat16==7
replace event=8 if beginning==cat15_start & cat16==8
replace event=9 if beginning==cat15_start & cat16==9
replace event=10 if beginning==cat15_start & cat16==10
replace event=0 if beginning==cat15_start & cat16==.
replace event=0 if beginning==cat16_start & cat17==.
replace event=2 if beginning==cat16_start & cat17==2
replace event=7 if beginning==cat22_start & cat23==7
replace event=6 if beginning==cat14_start & cat14==5 & cat15==6
replace event=0 if beginning==cat18_start & cat19==.
replace event=8 if beginning==cat17_start & cat18==8
replace event=9 if beginning==cat18_start & cat19==9
replace event=10 if beginning==cat18_start & cat19==10
replace event=7 if beginning==cat17_start & cat18==7
replace event=5 if beginning==cat17_start & cat17==6 & cat18==5
replace event=9 if beginning==cat17_start & cat18==9
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=3 if beginning==cat28_start & cat29==3
replace event=9 if beginning==cat19_start & cat20==9
replace event=1 if beginning==cat16_start & cat17==1
replace event=2 if beginning==cat16_start & cat17==2
replace event=3 if beginning==cat16_start & cat17==3
replace event=4 if beginning==cat16_start & cat17==4
replace event=5 if beginning==cat16_start & cat16==6 & cat17==5
replace event=6 if beginning==cat16_start & cat16==5 & cat17==6
replace event=7 if beginning==cat16_start & cat17==7
replace event=8 if beginning==cat16_start & cat17==8
replace event=9 if beginning==cat16_start & cat17==9
replace event=10 if beginning==cat16_start & cat17==10
replace event=0 if beginning==cat16_start & cat17==.
replace event=0 if beginning==cat22_start & cat23==.
replace event=2 if beginning==cat17_start & cat18==2
replace event=2 if beginning==cat18_start & cat19==2
replace event=3 if beginning==cat19_start & cat20==3
replace event=8 if beginning==cat19_start & cat20==8
replace event=9 if beginning==cat20_start & cat21==9
replace event=10 if beginning==cat20_start & cat21==10
replace event=9 if beginning==cat21_start & cat22==9
replace event=7 if beginning==cat14_start & cat15==7
replace event=0 if beginning==cat24_start & cat25==.
replace event=9 if beginning==cat23_start & cat24==9
replace event=10 if beginning==cat25_start & cat26==10
replace event=10 if beginning==cat21_start & cat22==10
replace event=8 if beginning==cat21_start & cat22==8
replace event=4 if beginning==cat21_start & cat22==4
replace event=8 if beginning==cat18_start & cat19==8
replace event=3 if beginning==cat18_start & cat19==3
replace event=2 if beginning==cat19_start & cat20==2
replace event=9 if beginning==cat22_start & cat23==9
replace event=0 if beginning==cat20_start & cat21==.
replace event=5 if beginning==cat19_start & cat19==6 & cat20==5
replace event=6 if beginning==cat19_start & cat19==5 & cat20==6
replace event=7 if beginning==cat19_start & cat20==7
replace event=2 if beginning==cat20_start & cat21==2
replace event=3 if beginning==cat20_start & cat21==3
replace event=4 if beginning==cat20_start & cat21==4
replace event=2 if beginning==cat21_start & cat22==2
replace event=3 if beginning==cat21_start & cat22==3
replace event=4 if beginning==cat22_start & cat23==4
replace event=10 if beginning==cat27_start & cat28==10
replace event=6 if beginning==cat17_start & cat17==5 & cat18==6
replace event=6 if beginning==cat18_start & cat18==5 & cat19==6
replace event=7 if beginning==cat18_start & cat19==7
replace event=9 if beginning==cat24_start & cat25==9
replace event=6 if beginning==cat22_start & cat22==5 & cat23==6
replace event=3 if beginning==cat22_start & cat23==3
replace event=9 if beginning==cat27_start & cat28==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=4 if beginning==cat19_start & cat20==4
replace event=8 if beginning==cat23_start & cat24==8
replace event=1 if beginning==cat19_start & cat20==1
replace event=10 if beginning==cat24_start & cat25==10
replace event=3 if beginning==cat23_start & cat24==3
replace event=2 if beginning==cat22_start & cat23==2
replace event=1 if beginning==cat18_start & cat19==1
replace event=5 if beginning==cat23_start & cat23==6 & cat24==5
replace event=5 if beginning==cat18_start & cat18==6 & cat19==5
replace event=4 if beginning==cat26_start & cat27==4
replace event=7 if beginning==cat21_start & cat22==7
replace event=8 if beginning==cat20_start & cat21==8
replace event=1 if beginning==cat26_start & cat27==1
replace event=1 if beginning==cat17_start & cat18==1
replace event=0 if beginning==cat23_start & cat24==.
replace event=6 if beginning==cat20_start & cat20==5 & cat21==6
replace event=9 if beginning==cat29_start & cat30==9
replace event=7 if beginning==cat20_start & cat21==7
replace event=3 if beginning==cat24_start & cat25==3
replace event=5 if beginning==cat20_start & cat20==6 & cat21==5
replace event=5 if beginning==cat21_start & cat21==6 & cat22==5
replace event=3 if beginning==cat30_start & cat31==3
replace event=10 if beginning==cat26_start & cat27==10
replace event=1 if beginning==cat22_start & cat23==1
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat25_start & cat26==9
replace event=8 if beginning==cat22_start & cat23==8
replace event=2 if beginning==cat23_start & cat24==2
replace event=5 if beginning==cat22_start & cat22==6 & cat23==5
replace event=1 if beginning==cat21_start & cat22==1
replace event=6 if beginning==cat21_start & cat21==5 & cat22==6
replace event=1 if beginning==cat23_start & cat24==1
replace event=9 if beginning==cat37_start & cat38==9
replace event=4 if beginning==cat24_start & cat25==4
replace event=4 if beginning==cat23_start & cat24==4
replace event=3 if beginning==cat26_start & cat27==3
replace event=7 if beginning==cat23_start & cat24==7
replace event=9 if beginning==cat28_start & cat29==9
replace event=6 if beginning==cat24_start & cat24==5 & cat25==6
replace event=2 if beginning==cat24_start & cat25==2
replace event=0 if beginning==cat27_start & cat28==.
replace event=0 if beginning==cat26_start & cat27==.
replace event=9 if beginning==cat35_start & cat36==9
replace event=6 if beginning==cat25_start & cat25==5 & cat26==6
replace event=8 if beginning==cat24_start & cat25==8
replace event=7 if beginning==cat24_start & cat25==7
replace event=8 if beginning==cat25_start & cat26==8
replace event=6 if beginning==cat28_start & cat28==5 & cat29==6
replace event=6 if beginning==cat23_start & cat23==5 & cat24==6
replace event=1 if beginning==cat25_start & cat26==1
replace event=9 if beginning==cat39_start & cat40==9
replace event=3 if beginning==cat25_start & cat26==3
replace event=5 if beginning==cat24_start & cat24==6 & cat25==5
replace event=5 if beginning==cat26_start & cat26==6 & cat27==5
replace event=1 if beginning==cat24_start & cat25==1
replace event=9 if beginning==cat31_start & cat32==9
replace event=0 if beginning==cat28_start & cat29==.
replace event=0 if beginning==cat30_start & cat31==.
replace event=0 if beginning==cat33_start & cat34==.
replace event=9 if beginning==cat53_start & cat54==9
replace event=8 if beginning==cat26_start & cat27==8
replace event=7 if beginning==cat26_start & cat27==7
replace event=8 if beginning==cat27_start & cat28==8
replace event=5 if beginning==cat25_start & cat25==6 & cat26==5
replace event=6 if beginning==cat26_start & cat26==5 & cat27==6
replace event=6 if beginning==cat27_start & cat27==5 & cat28==6
replace event=9 if beginning==cat41_start & cat42==9
replace event=7 if beginning==cat32_start & cat33==7
replace event=3 if beginning==cat27_start & cat28==3
replace event=2 if beginning==cat26_start & cat27==2
replace event=0 if beginning==cat31_start & cat32==.
replace event=10 if beginning==cat29_start & cat30==10
replace event=9 if beginning==cat56_start & cat57==9
replace event=5 if beginning==cat28_start & cat28==6 & cat29==5
replace event=4 if beginning==cat28_start & cat29==4
replace event=8 if beginning==cat28_start & cat29==8
replace event=6 if beginning==cat30_start & cat30==5 & cat31==6
replace event=7 if beginning==cat28_start & cat29==7
replace event=10 if beginning==cat31_start & cat32==10
replace event=5 if beginning==cat30_start & cat30==6 & cat31==5
replace event=3 if beginning==cat37_start & cat38==3
replace event=4 if beginning==cat27_start & cat28==4
replace event=4 if beginning==cat29_start & cat30==4
replace event=3 if beginning==cat33_start & cat34==3
replace event=6 if beginning==cat29_start & cat29==5 & cat30==6
replace event=9 if beginning==cat42_start & cat43==9
replace event=10 if beginning==cat35_start & cat36==10

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==1
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==2
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==3
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==4
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==6 & cat13==5
replace duration = cat13_start - beginning if beginning==cat12_start & cat12==5 & cat13==6
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==7
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==8
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==9
replace duration = cat13_start - beginning if beginning==cat12_start & cat13==10
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==1
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==2
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==3
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==4
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==6 & cat14==5
replace duration = cat14_start - beginning if beginning==cat13_start & cat13==5 & cat14==6
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==7
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==8
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==9
replace duration = cat14_start - beginning if beginning==cat13_start & cat14==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==10
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==4
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==10
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==5 & cat14==6
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==10
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==8
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==8
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==3
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==2
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==3
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==3
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==9
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==4
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==8
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==10
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==7
replace duration = cat15_start - beginning if beginning==cat14_start & cat14==5 & cat15==6
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==9
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==6 & cat18==5
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==5 & cat17==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==7
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==1
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==6 & cat15==5
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==1
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==2
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==3
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==4
replace duration = cat17_start - beginning if beginning==cat16_start & cat17==7
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==2
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==8
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==9
replace duration = cat15_start - beginning if beginning==cat14_start & cat15==7
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==10
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==8
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==4
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==8
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==3
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==9
replace duration = cat16_start - beginning if beginning==cat15_start & cat16==5 & cat15==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==6 & cat20==5
replace duration = cat20_start - beginning if beginning==cat19_start & cat19==5 & cat20==6
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==2
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==2
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==4
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==10
replace duration = cat18_start - beginning if beginning==cat17_start & cat17==5 & cat18==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==5 & cat19==6
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==9
replace duration = cat17_start - beginning if beginning==cat16_start & cat16==6 & cat17==5
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==5 & cat23==6
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==8
replace duration = cat20_start - beginning if beginning==cat19_start & cat20==1
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==10
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==3
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==2
replace duration = cat19_start - beginning if beginning==cat18_start & cat19==1
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==6 & cat24==5
replace duration = cat19_start - beginning if beginning==cat18_start & cat18==6 & cat19==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==4
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==7
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==1
replace duration = cat18_start - beginning if beginning==cat17_start & cat18==1
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==5 & cat21==6
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat21_start - beginning if beginning==cat20_start & cat21==7
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==3
replace duration = cat21_start - beginning if beginning==cat20_start & cat20==6 & cat21==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==6 & cat22==5
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==10
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==1
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==9
replace duration = cat23_start - beginning if beginning==cat22_start & cat23==8
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==2
replace duration = cat23_start - beginning if beginning==cat22_start & cat22==6 & cat23==5
replace duration = cat22_start - beginning if beginning==cat21_start & cat22==1
replace duration = cat22_start - beginning if beginning==cat21_start & cat21==5 & cat22==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==1
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==4
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==4
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==3
replace duration = cat24_start - beginning if beginning==cat23_start & cat24==7
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==9
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==5 & cat25==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==2
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat25==5 & cat26==6
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==8
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==7
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==8
replace duration = cat29_start - beginning if beginning==cat28_start & cat28==5 & cat29==6
replace duration = cat24_start - beginning if beginning==cat23_start & cat23==5 & cat24==6
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==1
replace duration = cat40_start - beginning if beginning==cat39_start & cat40==9
replace duration = cat26_start - beginning if beginning==cat25_start & cat26==3
replace duration = cat25_start - beginning if beginning==cat24_start & cat24==6 & cat25==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat26==6 & cat27==5
replace duration = cat25_start - beginning if beginning==cat24_start & cat25==1
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat54_start - beginning if beginning==cat53_start & cat54==9
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==8
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==7
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==8
replace duration = cat26_start - beginning if beginning==cat25_start & cat25==6 & cat26==5
replace duration = cat27_start - beginning if beginning==cat26_start & cat26==5 & cat27==6
replace duration = cat28_start - beginning if beginning==cat27_start & cat27==5 & cat28==6
replace duration = cat42_start - beginning if beginning==cat41_start & cat42==9
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==7
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==3
replace duration = cat27_start - beginning if beginning==cat26_start & cat27==2
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==10
replace duration = cat57_start - beginning if beginning==cat56_start & cat57==9
replace duration = cat29_start - beginning if beginning==cat28_start & cat28==6 & cat29==5
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==4
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==8
replace duration = cat31_start - beginning if beginning==cat30_start & cat30==5 & cat31==6
replace duration = cat29_start - beginning if beginning==cat28_start & cat29==7
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==10
replace duration = cat31_start - beginning if beginning==cat30_start & cat30==6 & cat31==5
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==3
replace duration = cat28_start - beginning if beginning==cat27_start & cat28==4
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==4
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==3
replace duration = cat30_start - beginning if beginning==cat29_start & cat29==5 & cat30==6
replace duration = cat43_start - beginning if beginning==cat42_start & cat43==9
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==10

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp14", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =14

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =9 if beginning==cat30_start & cat29==9
replace previous_occ =4 if beginning==cat31_start & cat30==4
replace previous_occ =10 if beginning==cat56_start & cat55==10
replace previous_occ =9 if beginning==cat32_start & cat31==9
replace previous_occ =9 if beginning==cat33_start & cat32==9
replace previous_occ =10 if beginning==cat35_start & cat34==10
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =8 if beginning==cat28_start & cat27==8
replace previous_occ =7 if beginning==cat28_start & cat27==7
replace previous_occ =0 if beginning==cat28_start & cat28==6 & cat27==5
replace previous_occ =8 if beginning==cat27_start & cat26==8
replace previous_occ =9 if beginning==cat29_start & cat28==9
replace previous_occ =3 if beginning==cat29_start & cat28==3
replace previous_occ =4 if beginning==cat37_start & cat36==4
replace previous_occ =9 if beginning==cat42_start & cat41==9
replace previous_occ =4 if beginning==cat33_start & cat32==4
replace previous_occ =7 if beginning==cat35_start & cat34==7
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp14", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp15: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load the dataset
clear
use "$resultdir\sample_Outofemp14"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp15 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat29_start & cat30==5
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=0 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30!=5 & cat30!=6 & cat31!=5 & cat31!=6 & cat32==.
replace indicator=1 if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace indicator=0 if beginning==cat29_start & cat30==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace indicator=1 if beginning==cat32_start & cat33==5
replace indicator=1 if beginning==cat28_start & cat29==5
replace indicator=1 if beginning==cat30_start & cat31==5
replace indicator=1 if beginning==cat28_start & cat29==6
replace indicator=1 if beginning==cat29_start & cat30==6
replace indicator=1 if beginning==cat31_start & cat32==6
replace indicator=0 if beginning==cat32_start & cat33==.
replace indicator=0 if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35!=5 & cat35!=6 & cat36!=5 & cat36!=6 & cat37!=5 & cat37!=6 & cat38==.
replace indicator=0 if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34!=5 & cat34!=6 & cat35!=5 & cat35!=6 & cat36!=5 & cat36!=6 & cat37!=5 & cat37!=6 & cat38!=5 & cat38!=6 & cat39==.
replace indicator=0 if beginning==cat30_start & cat31==.
replace indicator=0 if beginning==cat34_start & cat35==.
replace indicator=1 if beginning==cat35_start & cat36==5
replace indicator=1 if beginning==cat33_start & cat34==6
replace indicator=1 if beginning==cat30_start & cat31==6
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5
replace indicator=1 if beginning==cat57_start & cat58!=5 & cat58!=6 & cat59==6
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33==5
replace indicator=1 if beginning==cat38_start & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41==5
replace indicator=0 if beginning==cat43_start & cat44==.
replace indicator=1 if beginning==cat36_start & cat37==5
replace indicator=0 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==.
replace indicator=0 if beginning==cat43_start & cat44==.
replace indicator=1 if beginning==cat32_start & cat33==6
replace indicator=1 if beginning==cat34_start & cat35!=5 & cat35!=6 & cat36!=5 & cat36!=6 & cat37==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat30_start if beginning==cat29_start & cat30==5
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat30_start if beginning==cat28_start & cat29!=5 & cat29!=6 & cat30==5
replace beginning2=cat31_start if beginning==cat29_start & cat30!=5 & cat30!=6 & cat31==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==5
replace beginning2=cat29_start if beginning==cat28_start & cat29==5
replace beginning2=cat31_start if beginning==cat30_start & cat31==5
replace beginning2=cat29_start if beginning==cat28_start & cat29==6
replace beginning2=cat30_start if beginning==cat29_start & cat30==6
replace beginning2=cat32_start if beginning==cat31_start & cat32==6
replace beginning2=cat36_start if beginning==cat35_start & cat36==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==6
replace beginning2=cat31_start if beginning==cat30_start & cat31==6
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat59_start if beginning==cat57_start & cat58!=5 & cat58!=6 & cat59==6
replace beginning2=cat33_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33==5
replace beginning2=cat41_start if beginning==cat38_start & cat39!=5 & cat39!=6 & cat40!=5 & cat40!=6 & cat41==5
replace beginning2=cat37_start if beginning==cat36_start & cat37==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==6
replace beginning2=cat37_start if beginning==cat34_start & cat35!=5 & cat35!=6 & cat36!=5 & cat36!=6 & cat37==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=0 if beginning==cat29_start & cat30==.
replace event=10 if beginning==cat30_start & cat31==10
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=9 if beginning==cat30_start & cat31==9
replace event=9 if beginning==cat29_start & cat30==9
replace event=3 if beginning==cat30_start & cat31==3
replace event=4 if beginning==cat30_start & cat31==4
replace event=9 if beginning==cat31_start & cat32==9
replace event=0 if beginning==cat30_start & cat31==.
replace event=0 if beginning==cat31_start & cat32==.
replace event=10 if beginning==cat29_start & cat30==10
replace event=10 if beginning==cat31_start & cat32==10
replace event=0 if beginning==cat32_start & cat33==.
replace event=0 if beginning==cat41_start & cat42==.
replace event=9 if beginning==cat59_start & cat60==9
replace event=8 if beginning==cat30_start & cat31==8
replace event=7 if beginning==cat30_start & cat31==7
replace event=8 if beginning==cat29_start & cat30==8
replace event=9 if beginning==cat34_start & cat35==9
replace event=10 if beginning==cat33_start & cat34==10
replace event=4 if beginning==cat31_start & cat32==4
replace event=10 if beginning==cat36_start & cat37==10
replace event=9 if beginning==cat33_start & cat34==9
replace event=5 if beginning==cat29_start & cat29==6 & cat30==5
replace event=6 if beginning==cat29_start & cat29==5 & cat30==6
replace event=10 if beginning==cat37_start & cat38==10
replace event=5 if beginning==cat30_start & cat31==5
replace event=0 if beginning==cat37_start & cat38==.

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==9
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==3
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==4
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==10
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==10
replace duration = cat60_start - beginning if beginning==cat59_start & cat60==9
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==8
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==7
replace duration = cat30_start - beginning if beginning==cat29_start & cat30==8
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==9
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==10
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==4
replace duration = cat37_start - beginning if beginning==cat36_start & cat37==10
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==9
replace duration = cat30_start - beginning if beginning==cat29_start & cat29==6 & cat30==5
replace duration = cat30_start - beginning if beginning==cat29_start & cat29==5 & cat30==6
replace duration = cat38_start - beginning if beginning==cat37_start & cat38==10
replace duration = cat31_start - beginning if beginning==cat30_start & cat31==5

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp15", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =15

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
replace education=schooling30 if beginning==cat30_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =9 if beginning==cat32_start & cat31==9
replace previous_occ =9 if beginning==cat33_start & cat32==9
replace previous_occ =10 if beginning==cat35_start & cat34==10
replace previous_occ =9 if beginning==cat28_start & cat27==9
replace previous_occ =8 if beginning==cat28_start & cat27==8
replace previous_occ =7 if beginning==cat28_start & cat27==7
replace previous_occ =0 if beginning==cat28_start & cat28==6 & cat27==5 & cat26==6
replace previous_occ =8 if beginning==cat27_start & cat26==8
replace previous_occ =9 if beginning==cat29_start & cat28==9
replace previous_occ =3 if beginning==cat29_start & cat28==3
replace previous_occ =4 if beginning==cat37_start & cat36==4
replace previous_occ =9 if beginning==cat42_start & cat41==9
replace previous_occ =10 if beginning==cat59_start & cat58==10
replace previous_occ =9 if beginning==cat30_start & cat29==9
replace previous_occ =4 if beginning==cat30_start & cat29==4
replace previous_occ =8 if beginning==cat30_start & cat29==8
replace previous_occ =7 if beginning==cat30_start & cat29==7
replace previous_occ =0 if beginning==cat30_start & cat30==6 & cat29==5
replace previous_occ =4 if beginning==cat31_start & cat30==4
replace previous_occ =4 if beginning==cat32_start & cat31==4
replace previous_occ =8 if beginning==cat29_start & cat28==8
replace previous_occ =10 if beginning==cat34_start & cat33==10
replace previous_occ =10 if beginning==cat33_start & cat32==10
replace previous_occ =3 if beginning==cat41_start & cat40==3
replace previous_occ =10 if beginning==cat37_start & cat36==10
replace previous_occ =3 if beginning==cat37_start & cat36==3
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp15", replace

* ---------------------------------------------------------------------------- *
* Outcomes of Outofemp16: Variable Creation and Data Setup
* ---------------------------------------------------------------------------- *

* Clear current data, set directory and load dataset
clear
use "$resultdir\sample_Outofemp15"

drop event
replace beginning=beginning+duration
drop duration

* Create risk set: individuals that are in Outofemp16 across multiple categories
gen indicator = .  // Initialize the variable
replace indicator=1 if beginning==cat13_start & cat14==.
replace indicator=1 if beginning==cat31_start & cat32==5
replace indicator=0 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33!=5 & cat33!=6 & cat34==.
replace indicator=0 if beginning==end
replace indicator=1 if beginning==cat32_start & cat33==5
replace indicator=1 if beginning==cat30_start & cat31==5
replace indicator=1 if beginning==cat31_start & cat32==6
replace indicator=0 if beginning==cat32_start & cat33==.
replace indicator=0 if beginning==cat30_start & cat31==.
replace indicator=1 if beginning==cat33_start & cat34==6
replace indicator=1 if beginning==cat30_start & cat31==6
replace indicator=1 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5
replace indicator=1 if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33==5
replace indicator=0 if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32!=5 & cat32!=6 & cat33==.
replace indicator=1 if beginning==cat33_start & cat34==5
replace indicator=1 if beginning==cat60_start & cat61!=5 & cat61!=6 & cat62==6
replace indicator=1 if beginning==cat35_start & cat36==6
replace indicator=1 if beginning==cat34_start & cat35==5
replace indicator=1 if beginning==cat32_start & cat33==6
replace indicator=1 if beginning==cat37_start & cat38==5
replace indicator=1 if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34==5
replace indicator=1 if beginning==cat38_start & cat39==6
replace indicator=1 if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace indicator=0 if beginning==cat33_start & cat34==.
replace indicator=1 if beginning==cat34_start & cat35==6
replace indicator=1 if beginning==cat38_start & cat39==5
tab indicator,m
* Drop individuals that are not in the risk set
drop if indicator==0
drop indicator

* Construct the 'beginning' variable
gen beginning2 = .
replace beginning2=cat3_start if beginning==cat2_start & cat3==5
replace beginning2=cat32_start if beginning==cat31_start & cat32==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==5
replace beginning2=cat31_start if beginning==cat30_start & cat31==5
replace beginning2=cat32_start if beginning==cat31_start & cat32==6
replace beginning2=cat34_start if beginning==cat33_start & cat34==6
replace beginning2=cat31_start if beginning==cat30_start & cat31==6
replace beginning2=cat32_start if beginning==cat30_start & cat31!=5 & cat31!=6 & cat32==5
replace beginning2=cat33_start if beginning==cat31_start & cat32!=5 & cat32!=6 & cat33==5
replace beginning2=cat34_start if beginning==cat33_start & cat34==5
replace beginning2=cat62_start if beginning==cat60_start & cat61!=5 & cat61!=6 & cat62==6
replace beginning2=cat36_start if beginning==cat35_start & cat36==6
replace beginning2=cat35_start if beginning==cat34_start & cat35==5
replace beginning2=cat33_start if beginning==cat32_start & cat33==6
replace beginning2=cat38_start if beginning==cat37_start & cat38==5
replace beginning2=cat34_start if beginning==cat32_start & cat33!=5 & cat33!=6 & cat34==5
replace beginning2=cat39_start if beginning==cat38_start & cat39==6
replace beginning2=cat35_start if beginning==cat33_start & cat34!=5 & cat34!=6 & cat35==6
replace beginning2=cat35_start if beginning==cat34_start & cat35==6
replace beginning2=cat39_start if beginning==cat38_start & cat39==5

* Make sure that there are no missings
tab beginning2,m
drop beginning
rename beginning2 beginning

* Re-order variables
order folio_n20 beginning

* Make sure that all the statuses correspond to U or I
forvalues i=1/90 {
tab cat`i' if beginning==cat`i'_start
}

drop state1
* Generate a new variable state1 initially filled with missing values
gen state1 = .

* Update state1 based on the conditions across multiple categories
forval i = 1/80 {
    replace state1 = 1 if inlist(cat`i', 5) & missing(state1)
    replace state1 = 2 if inlist(cat`i', 6) & missing(state1)
}

* Label the states for clarity
label values state1 state1

* Tabulate state1 to view the distribution
tab state1,m

* Construct the 'event' variable
* event: 1 NRC formal, 2 RC formal, 3 RM formal, 4 NRM formal, 5 unemp, 6 inactive, 7 NRC informal, 8 RC informal, 9 RM informal, 10 NRM informal 
gen event = .
replace event=1 if beginning==cat1_start & cat2==1
order event,after(folio_n20)
replace event=10 if beginning==cat32_start & cat33==10
replace event=9 if beginning==cat32_start & cat33==9
replace event=9 if beginning==cat31_start & cat32==9
replace event=0 if beginning==cat31_start & cat32==.
replace event=10 if beginning==cat31_start & cat32==10
replace event=0 if beginning==cat32_start & cat33==.
replace event=9 if beginning==cat34_start & cat35==9
replace event=10 if beginning==cat33_start & cat34==10
replace event=9 if beginning==cat33_start & cat34==9
replace event=0 if beginning==cat33_start & cat34==.
replace event=0 if beginning==cat34_start & cat35==.
replace event=5 if beginning==cat62_start & cat62==6 & cat63==5
replace event=8 if beginning==cat32_start & cat33==8
replace event=5 if beginning==cat31_start & cat31==6 & cat32==5
replace event=7 if beginning==cat32_start & cat33==7
replace event=8 if beginning==cat31_start & cat32==8
replace event=9 if beginning==cat36_start & cat37==9
replace event=10 if beginning==cat35_start & cat36==10
replace event=6 if beginning==cat32_start & cat32==5 & cat33==6
replace event=10 if beginning==cat38_start & cat39==10
replace event=10 if beginning==cat34_start & cat35==10
replace event=4 if beginning==cat32_start & cat33==4
replace event=10 if beginning==cat39_start & cat40==10
replace event=0 if beginning==cat35_start & cat36==.
replace event=9 if beginning==cat35_start & cat36==9

* Make sure that there are no missings
tab event,m

* Construct the 'duration' variable
gen duration = end - beginning if event == 0
order event duration,after(end)
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==9
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==9
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==10
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==9
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==10
replace duration = cat34_start - beginning if beginning==cat33_start & cat34==9
replace duration = cat63_start - beginning if beginning==cat62_start & cat62==6 & cat63==5
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==8
replace duration = cat32_start - beginning if beginning==cat31_start & cat31==6 & cat32==5
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==7
replace duration = cat32_start - beginning if beginning==cat31_start & cat32==8
replace duration = cat37_start - beginning if beginning==cat36_start & cat37==9
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat32==5 & cat33==6
replace duration = cat39_start - beginning if beginning==cat38_start & cat39==10
replace duration = cat35_start - beginning if beginning==cat34_start & cat35==10
replace duration = cat33_start - beginning if beginning==cat32_start & cat33==4
replace duration = cat40_start - beginning if beginning==cat39_start & cat40==10
replace duration = cat36_start - beginning if beginning==cat35_start & cat36==9

* Make sure that there are no missings
tab duration,m

save "$resultdir\sample_Outofemp16", replace

gen type = event 

replace event = 1 if inrange(event, 1, 10)

* stset the data
stset duration, failure(event==1) id(folio_n20)
order folio_n20 _t0 _t _d _st event duration

sort folio_n20 _t0
gen order =16

* Define the education variable
gen education=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit educ_time_varying, at(0) after(time=cat2_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling1 if educ_time_varying==0
replace education = schooling2 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit educ_time_varying, at(0) after(time=cat3_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling3 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit educ_time_varying, at(0) after(time=cat4_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling4 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit educ_time_varying, at(0) after(time=cat5_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling5 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit educ_time_varying, at(0) after(time=cat6_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling6 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit educ_time_varying, at(0) after(time=cat7_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling7 if educ_time_varying==1
drop educ_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit educ_time_varying, at(0) after(time=cat8_start - cat1_start)
replace educ_time_varying=educ_time_varying+1
replace education = schooling8 if educ_time_varying==1
drop educ_time_varying

replace education=schooling2 if beginning==cat2_start & education==.
replace education=schooling3 if beginning==cat3_start & education==.
replace education=schooling5 if beginning==cat5_start & education==.
replace education=schooling6 if beginning==cat6_start & education==.
replace education=schooling7 if beginning==cat7_start & education==.
replace education=schooling8 if beginning==cat8_start & education==.
replace education=schooling9 if beginning==cat9_start & education==.
replace education=schooling11 if beginning==cat11_start & education==.
replace education=schooling14 if beginning==cat14_start & education==.
tab education,m

* Time since out of emp:
* Splitting 'time_since_outofemp' into periods
stsplit time_since_outofemp, at(0 12 36 60 120)
* Recoding 'time_since_outofemp' into categories
recode time_since_outofemp 0=1 12=2 36=3 60=4 120=5
label define time_since_outofemp 1 "0-1" 2 "1-3" 3 "3-5" 4 "5-10" 5 "10+"
label values time_since_outofemp time_since_outofemp

* Cleaning 'event' values
replace event = 0 if missing(event)

* Generating 'time_outofemp' based on the 'beginning' time period
gen time_outofemp = .
replace time_outofemp = 1 if inrange(beginning, 961, 1079)
replace time_outofemp = 2 if inrange(beginning, 1080, 1199)
replace time_outofemp = 3 if inrange(beginning, 1200, 1319)
replace time_outofemp = 4 if inrange(beginning, 1320, 1439)

* Labeling the time_outofemp categories
label define time_outofemp 1 "1980-1990" 2 "1990-2000" 3 "2000-2010" 4 "2010-2020"
label values time_outofemp time_outofemp

order time_since_outofemp time_outofemp, after(end)

* Initialize previous_occ to missing value
g previous_occ =1 if beginning==cat16_start & cat15==1
replace previous_occ =2 if beginning==cat21_start & cat20==2
replace previous_occ =7 if beginning==cat21_start & cat20==7
replace previous_occ =8 if beginning==cat21_start & cat20==8
replace previous_occ =4 if beginning==cat21_start & cat20==4
replace previous_occ =3 if beginning==cat21_start & cat20==3
replace previous_occ =9 if beginning==cat21_start & cat20==9
replace previous_occ =10 if beginning==cat21_start & cat20==10
replace previous_occ =2 if beginning==cat22_start & cat21==2
replace previous_occ =8 if beginning==cat22_start & cat21==8
replace previous_occ =7 if beginning==cat22_start & cat21==7
replace previous_occ =0 if beginning==cat22_start & cat21==6 & cat20==5
replace previous_occ =3 if beginning==cat22_start & cat21==3
replace previous_occ =4 if beginning==cat22_start & cat21==4
replace previous_occ =9 if beginning==cat22_start & cat21==9
replace previous_occ =10 if beginning==cat22_start & cat21==10
replace previous_occ =2 if beginning==cat23_start & cat22==2
replace previous_occ =3 if beginning==cat23_start & cat22==3
replace previous_occ =8 if beginning==cat23_start & cat22==8
replace previous_occ =4 if beginning==cat23_start & cat22==4
replace previous_occ =0 if beginning==cat23_start & cat22==5 & cat21==6
replace previous_occ =10 if beginning==cat23_start & cat22==10
replace previous_occ =9 if beginning==cat23_start & cat22==9
replace previous_occ =10 if beginning==cat24_start & cat23==10
replace previous_occ =2 if beginning==cat24_start & cat23==2
replace previous_occ =3 if beginning==cat24_start & cat23==3
replace previous_occ =9 if beginning==cat24_start & cat23==9
replace previous_occ =9 if beginning==cat25_start & cat24==9
replace previous_occ =3 if beginning==cat30_start & cat29==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =9 if beginning==cat26_start & cat25==9
replace previous_occ =3 if beginning==cat26_start & cat25==3
replace previous_occ =10 if beginning==cat26_start & cat25==10
replace previous_occ =10 if beginning==cat25_start & cat24==10
replace previous_occ =10 if beginning==cat27_start & cat26==10
replace previous_occ =9 if beginning==cat27_start & cat26==9
replace previous_occ =10 if beginning==cat28_start & cat27==10
replace previous_occ =4 if beginning==cat28_start & cat27==4
replace previous_occ =10 if beginning==cat29_start & cat28==10
replace previous_occ =10 if beginning==cat30_start & cat29==10
replace previous_occ =9 if beginning==cat31_start & cat30==9
replace previous_occ =10 if beginning==cat31_start & cat30==10
replace previous_occ =10 if beginning==cat32_start & cat31==10
replace previous_occ =9 if beginning==cat35_start & cat34==9
replace previous_occ =3 if beginning==cat35_start & cat34==3
replace previous_occ =10 if beginning==cat35_start & cat34==10
replace previous_occ =9 if beginning==cat34_start & cat33==9
replace previous_occ =10 if beginning==cat34_start & cat33==10
replace previous_occ =10 if beginning==cat33_start & cat32==10
replace previous_occ =9 if beginning==cat33_start & cat32==9
replace previous_occ =9 if beginning==cat32_start & cat31==9
replace previous_occ =4 if beginning==cat32_start & cat31==4
replace previous_occ =2 if beginning==cat32_start & cat31==2
replace previous_occ =8 if beginning==cat32_start & cat31==8
replace previous_occ =7 if beginning==cat32_start & cat31==7
replace previous_occ =10 if beginning==cat62_start & cat61==10
replace previous_occ =8 if beginning==cat31_start & cat30==8
replace previous_occ =9 if beginning==cat36_start & cat35==9
replace previous_occ =10 if beginning==cat39_start & cat38==10
recode previous_occ 7=5 8=6 9=7 10=8
label define previous_occ 1 "NRC formal" 2 "RC formal" 3 "RM formal" 4 "NRM formal" 5 "NRC informal" 6 "RC informal" 7 "RM informal" 8 "NRM informal"
label values previous_occ previous_occ

* Tabulate previous_occ to view the distribution
tab previous_occ, m

* Move to competing risk framework
* keep folio_n20 _t0 _t _d _st event type duration order
*** the respondents were at risk of 6 types of events, 
* so each row needs to be replicated 6 times
* type represents the type of transition; type2 shows the number of rows

expand 10

bysort folio_n20 _t0: gen type2 = _n

*** create new failure variable
gen fail = 0
replace fail = 1 if type == type2 & _d==1

drop type
rename type2 type

*** replace _d with the new event variable 'fail'
replace _d = fail
drop fail
order type,before(duration)
drop event

save "$resultdir\outcomes_Outofemp16", replace

* ---------------------------------------------------------------------------- *
* Append all transitions together
* ---------------------------------------------------------------------------- *

clear
cd "$resultdir"
use "$resultdir\outcomes_Outofemp1"
append using outcomes_Outofemp2
append using outcomes_Outofemp3
append using outcomes_Outofemp4
append using outcomes_Outofemp5
append using outcomes_Outofemp6
append using outcomes_Outofemp7
append using outcomes_Outofemp8
append using outcomes_Outofemp9
append using outcomes_Outofemp10
append using outcomes_Outofemp11
append using outcomes_Outofemp12
append using outcomes_Outofemp13
append using outcomes_Outofemp14
append using outcomes_Outofemp15
append using outcomes_Outofemp16
sort folio_n20 order _t0 type
order folio_n20 order
recode order 4=3 5=3 6=3 7=3 8=3 9=3 10=3 11=3 12=3 13=3 14=3 15=3 16=3
label define order 1 "1" 2 "2" 3 "3+"
label values order order

* Construct the age variable 
gen age=.
* split episodes at time of change	
replace cat2_start=99999 if cat2_start==.	
stsplit age_time_varying, at(0) after(time=cat2_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age1 if age_time_varying==0
replace age = age2 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat3_start=99999 if cat3_start==.	
stsplit age_time_varying, at(0) after(time=cat3_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age3 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat4_start=99999 if cat4_start==.	
stsplit age_time_varying, at(0) after(time=cat4_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age4 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat5_start=99999 if cat5_start==.	
stsplit age_time_varying, at(0) after(time=cat5_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age5 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat6_start=99999 if cat6_start==.	
stsplit age_time_varying, at(0) after(time=cat6_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age6 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat7_start=99999 if cat7_start==.	
stsplit age_time_varying, at(0) after(time=cat7_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age7 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat8_start=99999 if cat8_start==.	
stsplit age_time_varying, at(0) after(time=cat8_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age8 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat9_start=99999 if cat9_start==.	
stsplit age_time_varying, at(0) after(time=cat9_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age9 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat10_start=99999 if cat10_start==.	
stsplit age_time_varying, at(0) after(time=cat10_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age10 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat11_start=99999 if cat11_start==.	
stsplit age_time_varying, at(0) after(time=cat11_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age11 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat12_start=99999 if cat12_start==.	
stsplit age_time_varying, at(0) after(time=cat12_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age12 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat13_start=99999 if cat13_start==.	
stsplit age_time_varying, at(0) after(time=cat13_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age13 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat14_start=99999 if cat14_start==.	
stsplit age_time_varying, at(0) after(time=cat14_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age14 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat15_start=99999 if cat15_start==.	
stsplit age_time_varying, at(0) after(time=cat15_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age15 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat16_start=99999 if cat16_start==.	
stsplit age_time_varying, at(0) after(time=cat16_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age16 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat17_start=99999 if cat17_start==.	
stsplit age_time_varying, at(0) after(time=cat17_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age17 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat18_start=99999 if cat18_start==.	
stsplit age_time_varying, at(0) after(time=cat18_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age18 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat19_start=99999 if cat19_start==.	
stsplit age_time_varying, at(0) after(time=cat19_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age19 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat20_start=99999 if cat20_start==.	
stsplit age_time_varying, at(0) after(time=cat20_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age20 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat21_start=99999 if cat21_start==.	
stsplit age_time_varying, at(0) after(time=cat21_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age21 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat22_start=99999 if cat22_start==.	
stsplit age_time_varying, at(0) after(time=cat22_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age22 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat23_start=99999 if cat23_start==.	
stsplit age_time_varying, at(0) after(time=cat23_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age23 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat24_start=99999 if cat24_start==.	
stsplit age_time_varying, at(0) after(time=cat24_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age24 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat25_start=99999 if cat25_start==.	
stsplit age_time_varying, at(0) after(time=cat25_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age25 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat26_start=99999 if cat26_start==.	
stsplit age_time_varying, at(0) after(time=cat26_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age26 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat27_start=99999 if cat27_start==.	
stsplit age_time_varying, at(0) after(time=cat27_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age27 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat28_start=99999 if cat28_start==.	
stsplit age_time_varying, at(0) after(time=cat28_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age28 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat29_start=99999 if cat29_start==.	
stsplit age_time_varying, at(0) after(time=cat29_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age29 if age_time_varying==1
drop age_time_varying
* split episodes at time of change	
replace cat30_start=99999 if cat30_start==.	
stsplit age_time_varying, at(0) after(time=cat30_start - cat1_start)
replace age_time_varying=age_time_varying+1
replace age = age30 if age_time_varying==1
drop age_time_varying
* There are some missings
replace age=age1 if beginning==end & beginning==cat1_start
replace age=age2 if beginning==end & beginning==cat2_start
replace age=age3 if beginning==end & beginning==cat3_start
replace age=age4 if beginning==end & beginning==cat4_start
replace age=age5 if beginning==end & beginning==cat5_start
replace age=age6 if beginning==end & beginning==cat6_start
replace age=age7 if beginning==end & beginning==cat7_start
replace age=age8 if beginning==end & beginning==cat8_start
replace age=age9 if beginning==end & beginning==cat9_start
replace age=age10 if beginning==end & beginning==cat10_start
replace age=age11 if beginning==end & beginning==cat11_start
replace age=age12 if beginning==end & beginning==cat12_start
replace age=age13 if beginning==end & beginning==cat13_start
replace age=age14 if beginning==end & beginning==cat14_start
replace age=age15 if beginning==end & beginning==cat15_start
replace age=age16 if beginning==end & beginning==cat16_start
replace age=age17 if beginning==end & beginning==cat17_start
replace age=age18 if beginning==end & beginning==cat18_start
replace age=age19 if beginning==end & beginning==cat19_start
replace age=age20 if beginning==end & beginning==cat20_start
replace age=age21 if beginning==end & beginning==cat21_start
replace age=age22 if beginning==end & beginning==cat22_start
replace age=age24 if beginning==end & beginning==cat24_start
replace age=age25 if beginning==end & beginning==cat25_start
replace age=age27 if beginning==end & beginning==cat27_start
replace age=age30 if beginning==end & beginning==cat30_start
* Make sure that there are no missings
tab age,m

* Construct the age group variable based on age
gen agegroup = 1 if age > 14 & age < 19
replace agegroup = 2 if age > 18 & age < 25
replace agegroup = 3 if age > 24 & age < 30
replace agegroup = 4 if age > 29 & age < 35
replace agegroup = 5 if age > 34 & age < 40
replace agegroup = 6 if age > 39 & age < 45
replace agegroup = 7 if age > 44 & age < 50
replace agegroup = 8 if age > 49 & age < 55
replace agegroup = 9 if age > 54 & age < 60
replace agegroup = 10 if age > 59

label define agegroup 1 "15-19" 2 "20-24" 3 "25-29" 4 "30-34" 5 "35-39" 6 "40-44" 7 "45-49" 8 "50-54" 9 "55-59" 10 "60+"
label values agegroup agegroup
tab agegroup,m

save "$resultdir\outcomes_Outofemp", replace

cd "$resultdir"
erase "sample_Outofemp1.dta"
erase "sample_Outofemp2.dta"
erase "sample_Outofemp3.dta"
erase "sample_Outofemp4.dta"
erase "sample_Outofemp5.dta"
erase "sample_Outofemp6.dta"
erase "sample_Outofemp7.dta"
erase "sample_Outofemp8.dta"
erase "sample_Outofemp9.dta"
erase "sample_Outofemp10.dta"
erase "sample_Outofemp11.dta"
erase "sample_Outofemp12.dta"
erase "sample_Outofemp13.dta"
erase "sample_Outofemp14.dta"
erase "sample_Outofemp15.dta"
erase "sample_Outofemp16.dta"

erase "outcomes_Outofemp1.dta"
erase "outcomes_Outofemp2.dta"
erase "outcomes_Outofemp3.dta"
erase "outcomes_Outofemp4.dta"
erase "outcomes_Outofemp5.dta"
erase "outcomes_Outofemp6.dta"
erase "outcomes_Outofemp7.dta"
erase "outcomes_Outofemp8.dta"
erase "outcomes_Outofemp9.dta"
erase "outcomes_Outofemp10.dta"
erase "outcomes_Outofemp11.dta"
erase "outcomes_Outofemp12.dta"
erase "outcomes_Outofemp13.dta"
erase "outcomes_Outofemp14.dta"
erase "outcomes_Outofemp15.dta"
erase "outcomes_Outofemp16.dta"

* ---------------------------------------------------------------------------- *
* End of Analysis do-file for Unemployed or Inactive Outcomes
* ---------------------------------------------------------------------------- *